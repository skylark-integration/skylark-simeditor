{"version":3,"sources":["skylark-simditor.js"],"names":["define","exports","module","__isValidToReturn","obj","Array","isArray","attr","__isEmptyObject","langx","$","hotkeys","uploader","Util","InputManager","Selection","UndoManager","Keystroke","Formatter","Toolbar","Indentation","Clipboard","i18n","Simditor","Evented","inherit","init","opts","editor","uploadOpts","this","extend","util","textarea","placeholder","length","Error","data","destroy","id","count","_render","el","body","upload","inputManager","selection","undoManager","keystroke","formatter","toolbar","toolbarFloat","toolbarHidden","toolbarFloatOffset","indentation","clipboard","self","on","_placeholder","setValue","val","trim","focus","browser","mozilla","reflow","document","execCommand","_error","prototype","triggerHandler","trigger","type","args","concat","apply","defaultImage","params","indentWidth","_tpl","key","ref","results","insertBefore","wrapper","find","placeholderEl","append","blur","os","mac","addClass","linux","mobile","push","name","value","insertAfter","children","isEmptyNode","parseInt","css","show","hide","hidePopover","get","innerHTML","format","decorate","lastCaretPosition","getValue","sync","cloneBody","emptyP","firstP","lastP","clone","undecorate","autolink","last","first","is","prev","remove","next","html","$blockEl","range","caretPosition","phBr","appendTo","createRange","setRangeAtEndOf","each","i","popover","active","closest","off","clear","focused","removeData","window","hasProp","hasOwnProperty","child","parent","call","ctor","constructor","__super__","Module","base","cls","instance","instances","len","_connectedClasses","pluginName","charAt","toLowerCase","slice","_connected","_module","_init","extended","include","included","connect","_t","arguments","result","locale","replace","p0","p","position","shift","zh-CN","blockquote","bold","code","color","coloredText","hr","image","externalImage","uploadImage","uploadFailed","uploadError","imageUrl","imageSize","imageAlt","restoreImageSize","uploading","indent","outdent","italic","link","linkText","linkUrl","linkTarget","openLinkInCurrentWindow","openLinkInNewWindow","removeLink","ol","ul","strikethrough","table","deleteRow","insertRowAbove","insertRowBelow","deleteColumn","insertColumnLeft","insertColumnRight","deleteTable","title","normalText","underline","alignment","alignCenter","alignLeft","alignRight","selectLanguage","fontScale","fontScaleXLarge","fontScaleLarge","fontScaleNormal","fontScaleSmall","fontScaleXSmall","en-US","translate","Button","item","menuWrapper","menuItem","separator","icon","text","htmlTag","disableTag","menu","disabled","needFocus","shortcut","k","tag","_this","render","e","noFocus","param","preventDefault","hasClass","toggleClass","siblings","removeClass","offset","left","outerWidth","right","command","btn","currentTarget","pasting","setActive","setDisabled","add","mousedown","split","inArray","_allowedTags","_status","iconClassOf","setIcon","list","renderMenu","$menuBtnEl","$menuItemEl","ref1","menuEl","data-param","_disableStatus","endNodes","startNodes","filter","_activeStatus","endNode","startNode","node","Popover","button","top","target","_initLabelWidth","$fields","_labelWidth","field","$field","$label","Math","max","width","$target","refresh","editorOffset","maxLeft","targetH","targetOffset","outerHeight","height","min","floatInitialized","initToolbarFloat","toolbarHeight","bottomEdge","scrollTop","topEdge","buttons","prependTo","findButton","addButton","SimpleModule","AlignmentButton","align","end","nodes","text-align","throttledSelectionChanged","BlockquoteButton","$rootNodes","clearCache","nodeCache","rootNodes","save","$node","unwrap","isDecoratedNode","restore","BoldButton","queryCommandState","support","oninput","CodePopover","lang","langs","codeLanguages","selectEl","selected","removeAttr","CodeButton","$el","pre","_checkMode","cloneContents","blockNodes","join","collapsed","inlineMode","$pre","$code","match","contents","wrapInner","_inlineCommand","_blockCommand","resultNodes","clearHtml","$p","replaceAll","$contents","selectNodeContents","extractContents","insertNode","ColorButton","$link","hex","rgb","textNode","getComputedStyle","getPropertyValue","_convertRgbToHex","createTextNode","exec","r","g","b","componentToHex","c","toString","rgbToHex","FontScaleButton","sizeMap","x-large","large","small","x-small","containerNode","reset","nodeType","Node","TEXT_NODE","n","$span","size","style","fontSize","test","replaceWith","HrButton","$hr","$newBlock","$rootBlock","setRangeAtStartOf","ImagePopover","tpl","srcEl","widthEl","heightEl","altEl","which","setRangeAfter","_loadImage","_resizeImg","inputEl","$img","_restoreImg","alt","_initUploader","$uploadBtn","createInput","input","multiple","accept","stopPropagation","inline","img","onlySetVal","isNumeric","src","callback","loadImage","blob","dataURLtoBlob","prop","ImageButton","imageButton","selectNode","onselectionchange","startContainer","eq","startOffset","$masks","mask","$mask","file","cancel","$uploadItem","$input","uploadProgress","one","createImage","readImageFile","proxy","throttle","loaded","total","percent","toFixed","img_path","msg","parseJSON","success","alert","file_path","xhr","statusText","responseText","positionMask","imgOffset","wrapperOffset","Image","onload","data-image-size","isFunction","onerror","deleteContents","click","select","IndentButton","hotkey","tabIndent","ItalicButton","LinkPopover","textEl","urlEl","unlinkEl","selectTarget","throttledValueChanged","shiftKey","txtNode","LinkButton","rangeAtEndOf","href","ListButton","$list","anotherType","contains","li","OrderListButton","OutdentButton","StrikethroughButton","dom","tables","_changeCellTag","$tr","tagName","cell","$cell","td","$block","$table","$td","refreshTableWidth","setTimeout","cols","tableWidth","mixin","createTable","row","col","$tbody","$thead","l","cssClasses","$colgroup","$headRow","$wrapper","tableDecorate","wrap","before","prepend","class","resizeHandle","contenteditable","deleteCol","$newTd","index","noOtherCol","noOtherRow","tr","$newTr","$nextTr","_nextRow","$prevTr","_prevRow","insertCol","direction","$col","$newCol","cellTag","parseFloat","insertRow","colNum","resizable","container","options","clsResizeHandle","selectorWrapper","selectorResizeHandle","$resizeHandle","parents","pageX","$handle","$leftCol","$leftTd","$rightCol","$rightTd","startHandleLeft","startLeftWidth","startRightWidth","startX","deltaX","leftWidth","rightWidth","TableButton","merge","_allowedAttributes","_allowedStyles","th","_initShortcuts","_initResize","$container","_tdNav","$anotherTr","action","editMenu","createMenu","$trs","num","prevAll","addBack","$closestBlock","rowNum","after","ret","newTr","newTd","TitleButton","UnderlineButton","UnorderListButton","main"],"mappings":"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","file":"../skylark-simditor.js","sourcesContent":["define([], function () {\n    'use strict';\n    var exports = {};\n    var module = { exports: {} };\n    define([\n        'skylark-langx/langx',\n        'skylark-jquery',\n        './hotkeys',\n        './uploader',\n        './Util',\n        './InputManager',\n        './Selection',\n        './UndoManager',\n        './Keystroke',\n        './Formatter',\n        './Toolbar',\n        './Indentation',\n        './Clipboard',\n        './i18n'\n    ], function (langx, $, hotkeys, uploader, Util, InputManager, Selection, UndoManager, Keystroke, Formatter, Toolbar, Indentation, Clipboard, i18n) {\n        var Simditor = langx.Evented.inherit({\n            init: function (opts) {\n                this.opts = $.extend({}, this.opts, opts);\n                this.util = new Util(this);\n                var e, editor, uploadOpts;\n                this.textarea = $(this.opts.textarea);\n                this.opts.placeholder = this.opts.placeholder || this.textarea.attr('placeholder');\n                if (!this.textarea.length) {\n                    throw new Error('simditor: param textarea is required.');\n                    return;\n                }\n                editor = this.textarea.data('simditor');\n                if (editor != null) {\n                    editor.destroy();\n                }\n                this.id = ++Simditor.count;\n                this._render();\n                if (hotkeys) {\n                    this.hotkeys = hotkeys({ el: this.body });\n                } else {\n                    throw new Error('simditor: simple-hotkeys is required.');\n                    return;\n                }\n                if (this.opts.upload && uploader) {\n                    uploadOpts = typeof this.opts.upload === 'object' ? this.opts.upload : {};\n                    this.uploader = uploader(uploadOpts);\n                }\n                this.inputManager = new InputManager(this);\n                this.selection = new Selection(this);\n                this.undoManager = new UndoManager(this);\n                this.keystroke = new Keystroke(this);\n                this.formatter = new Formatter(this);\n                this.toolbar = new Toolbar(this, {\n                    toolbar: this.opts.toolbar,\n                    toolbarFloat: this.opts.toolbarFloat,\n                    toolbarHidden: this.opts.toolbarHidden,\n                    toolbarFloatOffset: this.opts.toolbarFloatOffset\n                });\n                this.indentation = new Indentation(this);\n                this.clipboard = new Clipboard(this);\n                var self = this;\n                if (this.opts.placeholder) {\n                    this.on('valuechanged', function () {\n                        return self._placeholder();\n                    });\n                }\n                this.setValue(this.textarea.val().trim() || '');\n                if (this.textarea.attr('autofocus')) {\n                    return self.focus();\n                }\n                if (this.util.browser.mozilla) {\n                    this.util.reflow();\n                    try {\n                        document.execCommand('enableObjectResizing', false, false);\n                        return document.execCommand('enableInlineTableEditing', false, false);\n                    } catch (_error) {\n                        e = _error;\n                    }\n                }\n            }\n        });\n        Simditor.prototype.triggerHandler = Simditor.prototype.trigger = function (type, data) {\n            var args, ref;\n            args = [type];\n            if (data) {\n                args = args.concat(data);\n            }\n            langx.Evented.prototype.trigger.apply(this, args);\n            return this;\n        };\n        Simditor.count = 0;\n        Simditor.prototype.opts = {\n            textarea: null,\n            placeholder: '',\n            defaultImage: 'images/image.png',\n            params: {},\n            upload: false,\n            indentWidth: 40\n        };\n        Simditor.prototype._tpl = '<div class=\"simditor\">\\n  <div class=\"simditor-wrapper\">\\n    <div class=\"simditor-placeholder\"></div>\\n    <div class=\"simditor-body\" contenteditable=\"true\">\\n    </div>\\n  </div>\\n</div>';\n        Simditor.prototype._render = function () {\n            var key, ref, results, val;\n            this.el = $(this._tpl).insertBefore(this.textarea);\n            this.wrapper = this.el.find('.simditor-wrapper');\n            this.body = this.wrapper.find('.simditor-body');\n            this.placeholderEl = this.wrapper.find('.simditor-placeholder').append(this.opts.placeholder);\n            this.el.data('simditor', this);\n            this.wrapper.append(this.textarea);\n            this.textarea.data('simditor', this).blur();\n            this.body.attr('tabindex', this.textarea.attr('tabindex'));\n            if (this.util.os.mac) {\n                this.el.addClass('simditor-mac');\n            } else if (this.util.os.linux) {\n                this.el.addClass('simditor-linux');\n            }\n            if (this.util.os.mobile) {\n                this.el.addClass('simditor-mobile');\n            }\n            if (this.opts.params) {\n                ref = this.opts.params;\n                results = [];\n                for (key in ref) {\n                    val = ref[key];\n                    results.push($('<input/>', {\n                        type: 'hidden',\n                        name: key,\n                        value: val\n                    }).insertAfter(this.textarea));\n                }\n                return results;\n            }\n        };\n        Simditor.prototype._placeholder = function () {\n            var children;\n            children = this.body.children();\n            if (children.length === 0 || children.length === 1 && this.util.isEmptyNode(children) && parseInt(children.css('margin-left') || 0) < this.opts.indentWidth) {\n                return this.placeholderEl.show();\n            } else {\n                return this.placeholderEl.hide();\n            }\n        };\n        Simditor.prototype.setValue = function (val) {\n            this.hidePopover();\n            this.textarea.val(val);\n            this.body.get(0).innerHTML = val;\n            this.formatter.format();\n            this.formatter.decorate();\n            this.util.reflow(this.body);\n            this.inputManager.lastCaretPosition = null;\n            return this.trigger('valuechanged');\n        };\n        Simditor.prototype.getValue = function () {\n            return this.sync();\n        };\n        Simditor.prototype.sync = function () {\n            var children, cloneBody, emptyP, firstP, lastP, val;\n            cloneBody = this.body.clone();\n            this.formatter.undecorate(cloneBody);\n            this.formatter.format(cloneBody);\n            this.formatter.autolink(cloneBody);\n            children = cloneBody.children();\n            lastP = children.last('p');\n            firstP = children.first('p');\n            while (lastP.is('p') && this.util.isEmptyNode(lastP)) {\n                emptyP = lastP;\n                lastP = lastP.prev('p');\n                emptyP.remove();\n            }\n            while (firstP.is('p') && this.util.isEmptyNode(firstP)) {\n                emptyP = firstP;\n                firstP = lastP.next('p');\n                emptyP.remove();\n            }\n            cloneBody.find('img.uploading').remove();\n            val = $.trim(cloneBody.html());\n            this.textarea.val(val);\n            return val;\n        };\n        Simditor.prototype.focus = function () {\n            var $blockEl, range;\n            if (!(this.body.is(':visible') && this.body.is('[contenteditable]'))) {\n                this.el.find('textarea:visible').focus();\n                return;\n            }\n            if (this.inputManager.lastCaretPosition) {\n                this.undoManager.caretPosition(this.inputManager.lastCaretPosition);\n                return this.inputManager.lastCaretPosition = null;\n            } else {\n                $blockEl = this.body.children().last();\n                if (!$blockEl.is('p')) {\n                    $blockEl = $('<p/>').append(this.util.phBr).appendTo(this.body);\n                }\n                range = document.createRange();\n                return this.selection.setRangeAtEndOf($blockEl, range);\n            }\n        };\n        Simditor.prototype.blur = function () {\n            if (this.body.is(':visible') && this.body.is('[contenteditable]')) {\n                return this.body.blur();\n            } else {\n                return this.body.find('textarea:visible').blur();\n            }\n        };\n        Simditor.prototype.hidePopover = function () {\n            return this.el.find('.simditor-popover').each(function (i, popover) {\n                popover = $(popover).data('popover');\n                if (popover.active) {\n                    return popover.hide();\n                }\n            });\n        };\n        Simditor.prototype.destroy = function () {\n            this.triggerHandler('destroy');\n            this.textarea.closest('form').off('.simditor .simditor-' + this.id);\n            this.selection.clear();\n            this.inputManager.focused = false;\n            this.textarea.insertBefore(this.el).hide().val('').removeData('simditor');\n            this.el.remove();\n            $(document).off('.simditor-' + this.id);\n            $(window).off('.simditor-' + this.id);\n            return this.off();\n        };\n        Simditor.Toolbar = Toolbar;\n        Simditor.i18n = i18n;\n        return Simditor;\n    });\n    function __isEmptyObject(obj) {\n        var attr;\n        for (attr in obj)\n            return !1;\n        return !0;\n    }\n    function __isValidToReturn(obj) {\n        return typeof obj != 'object' || Array.isArray(obj) || !__isEmptyObject(obj);\n    }\n    if (__isValidToReturn(module.exports))\n        return module.exports;\n    else if (__isValidToReturn(exports))\n        return exports;\n});\ndefine(\"skylark-simditor/Simditor\", function(){});\n\ndefine('skylark-simditor/_extend',[],function(){\r\n    var hasProp = {}.hasOwnProperty;\r\n\r\n    return function extend(child, parent) { \r\n      for (var key in parent) { \r\n        if (hasProp.call(parent, key)) child[key] = parent[key]; \r\n      } \r\n      function ctor() { \r\n        this.constructor = child; \r\n      } ctor.prototype = parent.prototype; \r\n      child.prototype = new ctor(); \r\n      child.__super__ = parent.prototype; \r\n      return child; \r\n  };\r\n});\r\n\ndefine('skylark-simditor/Module',[\n  \"skylark-langx/langx\",\n  \"skylark-jquery\"\n], function (langx,$) {\n\n  var  slice = [].slice;\n\n  var Module = langx.Evented.inherit({\n    init : function (opts) {\n      var base, cls, i, instance, instances, len, name;\n      this.opts = $.extend({}, this.opts, opts);\n      (base = this.constructor)._connectedClasses || (base._connectedClasses = []);\n      instances = (function() {\n        var i, len, ref, results;\n        ref = this.constructor._connectedClasses;\n        results = [];\n        for (i = 0, len = ref.length; i < len; i++) {\n          cls = ref[i];\n          name = cls.pluginName.charAt(0).toLowerCase() + cls.pluginName.slice(1);\n          if (cls.prototype._connected) {\n            cls.prototype._module = this;\n          }\n          results.push(this[name] = new cls());\n        }\n        return results;\n      }).call(this);\n      if (this._connected) {\n        this.opts = $.extend({}, this.opts, this._module.opts);\n      } else {\n        this._init();\n        for (i = 0, len = instances.length; i < len; i++) {\n          instance = instances[i];\n          if (typeof instance._init === \"function\") {\n            instance._init();\n          }\n        }\n      }\n      this.trigger('initialized');\n    }\n\n  });\n\n\n  Module.extend = function(obj) {\n    var key, ref, val;\n    if (!((obj != null) && typeof obj === 'object')) {\n      return;\n    }\n    for (key in obj) {\n      val = obj[key];\n      if (key !== 'included' && key !== 'extended') {\n        this[key] = val;\n      }\n    }\n    return (ref = obj.extended) != null ? ref.call(this) : void 0;\n  };\n\n  Module.include = function(obj) {\n    var key, ref, val;\n    if (!((obj != null) && typeof obj === 'object')) {\n      return;\n    }\n    for (key in obj) {\n      val = obj[key];\n      if (key !== 'included' && key !== 'extended') {\n        this.prototype[key] = val;\n      }\n    }\n    return (ref = obj.included) != null ? ref.call(this) : void 0;\n  };\n\n  Module.connect = function(cls) {\n    if (typeof cls !== 'function') {\n      return;\n    }\n    if (!cls.pluginName) {\n      throw new Error('Module.connect: cannot connect plugin without pluginName');\n      return;\n    }\n    cls.prototype._connected = true;\n    if (!this._connectedClasses) {\n      this._connectedClasses = [];\n    }\n    this._connectedClasses.push(cls);\n    if (cls.pluginName) {\n      return this[cls.pluginName] = cls;\n    }\n  };\n\n  Module.prototype.opts = {};\n\n\n  Module.prototype._init = function() {};\n\n/*\n  Module.prototype.on = function() {\n    var args, ref;\n    args = 1 <= arguments.length ? Array.prototype.slice.call(arguments, 0) : [];\n    (ref = $(this)).on.apply(ref, args);\n    return this;\n  };\n\n  Module.prototype.one = function() {\n    var args, ref;\n    args = 1 <= arguments.length ? Array.prototype.slice.call(arguments, 0) : [];\n    (ref = $(this)).one.apply(ref, args);\n    return this;\n  };\n\n  Module.prototype.off = function() {\n    var args, ref;\n    args = 1 <= arguments.length ? Array.prototype.slice.call(arguments, 0) : [];\n    (ref = $(this)).off.apply(ref, args);\n    return this;\n  };\n\n  Module.prototype.trigger = function() {\n    var args, ref;\n    args = 1 <= arguments.length ? Array.prototype.slice.call(arguments, 0) : [];\n    (ref = $(this)).trigger.apply(ref, args);\n    return this;\n  };\n\n  Module.prototype.triggerHandler = function() {\n    var args, ref;\n    args = 1 <= arguments.length ? Array.prototype.slice.call(arguments, 0) : [];\n    return (ref = $(this)).triggerHandler.apply(ref, args);\n  };\n*/\n\n  Module.prototype.triggerHandler =  Module.prototype.trigger = function(type,data) {\n    var args, ref;\n    args = [type];\n    if (data) {\n      args = args.concat(data);\n    }\n    langx.Evented.prototype.trigger.apply(this, args);\n    return this;\n  };\n\n  Module.prototype._t = function() {\n    var args, ref;\n    args = 1 <= arguments.length ? Array.prototype.slice.call(arguments, 0) : [];\n    return (ref = this.constructor)._t.apply(ref, args);\n  };\n\n  Module._t = function() {\n    var args, key, ref, result;\n    key = arguments[0], args = 2 <= arguments.length ? Array.prototype.slice.call(arguments, 1) : [];\n    result = ((ref = this.i18n[this.locale]) != null ? ref[key] : void 0) || '';\n    if (!(args.length > 0)) {\n      return result;\n    }\n    result = result.replace(/([^%]|^)%(?:(\\d+)\\$)?s/g, function(p0, p, position) {\n      if (position) {\n        return p + args[parseInt(position) - 1];\n      } else {\n        return p + args.shift();\n      }\n    });\n    return result.replace(/%%s/g, '%s');\n  };\n\n  Module.i18n = {\n    'zh-CN': {}\n  };\n\n  Module.locale = 'zh-CN';\n\n  return Module;\n\n\n});\n\ndefine('skylark-simditor/i18n',[\r\n\r\n],function(){ \r\n\r\n    var i18n =  {\r\n      'zh-CN': {\r\n        'blockquote': '',\r\n        'bold': '',\r\n        'code': '',\r\n        'color': '',\r\n        'coloredText': '',\r\n        'hr': '',\r\n        'image': '',\r\n        'externalImage': '',\r\n        'uploadImage': '',\r\n        'uploadFailed': '',\r\n        'uploadError': '',\r\n        'imageUrl': '',\r\n        'imageSize': '',\r\n        'imageAlt': '',\r\n        'restoreImageSize': '',\r\n        'uploading': '',\r\n        'indent': '',\r\n        'outdent': '',\r\n        'italic': '',\r\n        'link': '',\r\n        'linkText': '',\r\n        'linkUrl': '',\r\n        'linkTarget': '',\r\n        'openLinkInCurrentWindow': '',\r\n        'openLinkInNewWindow': '',\r\n        'removeLink': '',\r\n        'ol': '',\r\n        'ul': '',\r\n        'strikethrough': '',\r\n        'table': '',\r\n        'deleteRow': '',\r\n        'insertRowAbove': '',\r\n        'insertRowBelow': '',\r\n        'deleteColumn': '',\r\n        'insertColumnLeft': '',\r\n        'insertColumnRight': '',\r\n        'deleteTable': '',\r\n        'title': '',\r\n        'normalText': '',\r\n        'underline': '',\r\n        'alignment': '',\r\n        'alignCenter': '',\r\n        'alignLeft': '',\r\n        'alignRight': '',\r\n        'selectLanguage': '',\r\n        'fontScale': '',\r\n        'fontScaleXLarge': '',\r\n        'fontScaleLarge': '',\r\n        'fontScaleNormal': '',\r\n        'fontScaleSmall': '',\r\n        'fontScaleXSmall': ''\r\n      },\r\n      'en-US': {\r\n        'blockquote': 'Block Quote',\r\n        'bold': 'Bold',\r\n        'code': 'Code',\r\n        'color': 'Text Color',\r\n        'coloredText': 'Colored Text',\r\n        'hr': 'Horizontal Line',\r\n        'image': 'Insert Image',\r\n        'externalImage': 'External Image',\r\n        'uploadImage': 'Upload Image',\r\n        'uploadFailed': 'Upload failed',\r\n        'uploadError': 'Error occurs during upload',\r\n        'imageUrl': 'Url',\r\n        'imageSize': 'Size',\r\n        'imageAlt': 'Alt',\r\n        'restoreImageSize': 'Restore Origin Size',\r\n        'uploading': 'Uploading',\r\n        'indent': 'Indent',\r\n        'outdent': 'Outdent',\r\n        'italic': 'Italic',\r\n        'link': 'Insert Link',\r\n        'linkText': 'Text',\r\n        'linkUrl': 'Url',\r\n        'linkTarget': 'Target',\r\n        'openLinkInCurrentWindow': 'Open link in current window',\r\n        'openLinkInNewWindow': 'Open link in new window',\r\n        'removeLink': 'Remove Link',\r\n        'ol': 'Ordered List',\r\n        'ul': 'Unordered List',\r\n        'strikethrough': 'Strikethrough',\r\n        'table': 'Table',\r\n        'deleteRow': 'Delete Row',\r\n        'insertRowAbove': 'Insert Row Above',\r\n        'insertRowBelow': 'Insert Row Below',\r\n        'deleteColumn': 'Delete Column',\r\n        'insertColumnLeft': 'Insert Column Left',\r\n        'insertColumnRight': 'Insert Column Right',\r\n        'deleteTable': 'Delete Table',\r\n        'title': 'Title',\r\n        'normalText': 'Text',\r\n        'underline': 'Underline',\r\n        'alignment': 'Alignment',\r\n        'alignCenter': 'Align Center',\r\n        'alignLeft': 'Align Left',\r\n        'alignRight': 'Align Right',\r\n        'selectLanguage': 'Select Language',\r\n        'fontScale': 'Font Size',\r\n        'fontScaleXLarge': 'X Large Size',\r\n        'fontScaleLarge': 'Large Size',\r\n        'fontScaleNormal': 'Normal Size',\r\n        'fontScaleSmall': 'Small Size',\r\n        'fontScaleXSmall': 'X Small Size'\r\n      },\r\n\r\n      translate : function() {\r\n        var args, key, ref, result;\r\n        key = arguments[0], args = 2 <= arguments.length ? Array.prototype.slice.call(arguments, 1) : [];\r\n        result = ((ref = i18n[this.locale]) != null ? ref[key] : void 0) || '';\r\n        if (!(args.length > 0)) {\r\n          return result;\r\n        }\r\n        result = result.replace(/([^%]|^)%(?:(\\d+)\\$)?s/g, function(p0, p, position) {\r\n          if (position) {\r\n            return p + args[parseInt(position) - 1];\r\n          } else {\r\n            return p + args.shift();\r\n          }\r\n        });\r\n        return result.replace(/%%s/g, '%s');\r\n      }\r\n\r\n    };\r\n\r\n    return i18n;\r\n});\ndefine('skylark-simditor/Button',[\r\n  \"skylark-jquery\",\r\n  \"./_extend\",\r\n  \"./Module\",\r\n  \"./Simditor\",\r\n  \"./i18n\"\r\n],function($,extend,Module,Simditor,i18n){ \r\n  var slice = [].slice;\r\n\r\n  var Button = Module.inherit( {\r\n    init : function(opts) {\r\n      this.toolbar = opts.toolbar;\r\n      this.editor = opts.toolbar.editor;\r\n      this.title = i18n.translate(this.name);\r\n      Module.prototype.init.call(this, opts);\r\n    }\r\n  }); \r\n\r\n  Button.prototype._tpl = {\r\n    item: '<li><a tabindex=\"-1\" unselectable=\"on\" class=\"toolbar-item\" href=\"javascript:;\"><span></span></a></li>',\r\n    menuWrapper: '<div class=\"toolbar-menu\"></div>',\r\n    menuItem: '<li><a tabindex=\"-1\" unselectable=\"on\" class=\"menu-item\" href=\"javascript:;\"><span></span></a></li>',\r\n    separator: '<li><span class=\"separator\"></span></li>'\r\n  };\r\n\r\n  Button.prototype.name = '';\r\n\r\n  Button.prototype.icon = '';\r\n\r\n  Button.prototype.title = '';\r\n\r\n  Button.prototype.text = '';\r\n\r\n  Button.prototype.htmlTag = '';\r\n\r\n  Button.prototype.disableTag = '';\r\n\r\n  Button.prototype.menu = false;\r\n\r\n  Button.prototype.active = false;\r\n\r\n  Button.prototype.disabled = false;\r\n\r\n  Button.prototype.needFocus = true;\r\n\r\n  Button.prototype.shortcut = null;\r\n\r\n\r\n  Button.prototype._init = function() {\r\n    var k, len, ref, tag;\r\n    this.render();\r\n    this.el.on('mousedown', (function(_this) {\r\n      return function(e) {\r\n        var exceed, noFocus, param;\r\n        e.preventDefault();\r\n        noFocus = _this.needFocus && !_this.editor.inputManager.focused;\r\n        if (_this.el.hasClass('disabled')) {\r\n          return false;\r\n        }\r\n        if (noFocus) {\r\n          _this.editor.focus();\r\n        }\r\n        if (_this.menu) {\r\n          _this.wrapper.toggleClass('menu-on').siblings('li').removeClass('menu-on');\r\n          if (_this.wrapper.is('.menu-on')) {\r\n            exceed = _this.menuWrapper.offset().left + _this.menuWrapper.outerWidth() + 5 - _this.editor.wrapper.offset().left - _this.editor.wrapper.outerWidth();\r\n            if (exceed > 0) {\r\n              _this.menuWrapper.css({\r\n                'left': 'auto',\r\n                'right': 0\r\n              });\r\n            }\r\n            _this.trigger('menuexpand');\r\n          }\r\n          return false;\r\n        }\r\n        param = _this.el.data('param');\r\n        _this.command(param);\r\n        return false;\r\n      };\r\n    })(this));\r\n    this.wrapper.on('click', 'a.menu-item', (function(_this) {\r\n      return function(e) {\r\n        var btn, noFocus, param;\r\n        e.preventDefault();\r\n        btn = $(e.currentTarget);\r\n        _this.wrapper.removeClass('menu-on');\r\n        noFocus = _this.needFocus && !_this.editor.inputManager.focused;\r\n        if (btn.hasClass('disabled') || noFocus) {\r\n          return false;\r\n        }\r\n        _this.toolbar.wrapper.removeClass('menu-on');\r\n        param = btn.data('param');\r\n        _this.command(param);\r\n        return false;\r\n      };\r\n    })(this));\r\n    this.wrapper.on('mousedown', 'a.menu-item', function(e) {\r\n      return false;\r\n    });\r\n    this.editor.on('blur', (function(_this) {\r\n      return function() {\r\n        var editorActive;\r\n        editorActive = _this.editor.body.is(':visible') && _this.editor.body.is('[contenteditable]');\r\n        if (!(editorActive && !_this.editor.clipboard.pasting)) {\r\n          return;\r\n        }\r\n        _this.setActive(false);\r\n        return _this.setDisabled(false);\r\n      };\r\n    })(this));\r\n    if (this.shortcut != null) {\r\n      this.editor.hotkeys.add(this.shortcut, (function(_this) {\r\n        return function(e) {\r\n          _this.el.mousedown();\r\n          return false;\r\n        };\r\n      })(this));\r\n    }\r\n    ref = this.htmlTag.split(',');\r\n    for (k = 0, len = ref.length; k < len; k++) {\r\n      tag = ref[k];\r\n      tag = $.trim(tag);\r\n      if (tag && $.inArray(tag, this.editor.formatter._allowedTags) < 0) {\r\n        this.editor.formatter._allowedTags.push(tag);\r\n      }\r\n    }\r\n    return this.editor.on('selectionchanged', (function(_this) {\r\n      return function(e) {\r\n        if (_this.editor.inputManager.focused) {\r\n          return _this._status();\r\n        }\r\n      };\r\n    })(this));\r\n  };\r\n\r\n  Button.prototype.iconClassOf = function(icon) {\r\n    if (icon) {\r\n      return \"simditor-icon simditor-icon-\" + icon;\r\n    } else {\r\n      return '';\r\n    }\r\n  };\r\n\r\n  Button.prototype.setIcon = function(icon) {\r\n    return this.el.find('span').removeClass().addClass(this.iconClassOf(icon)).text(this.text);\r\n  };\r\n\r\n  Button.prototype.render = function() {\r\n    this.wrapper = $(this._tpl.item).appendTo(this.toolbar.list);\r\n    this.el = this.wrapper.find('a.toolbar-item');\r\n    this.el.attr('title', this.title).addClass(\"toolbar-item-\" + this.name).data('button', this);\r\n    this.setIcon(this.icon);\r\n    if (!this.menu) {\r\n      return;\r\n    }\r\n    this.menuWrapper = $(this._tpl.menuWrapper).appendTo(this.wrapper);\r\n    this.menuWrapper.addClass(\"toolbar-menu-\" + this.name);\r\n    return this.renderMenu();\r\n  };\r\n\r\n  Button.prototype.renderMenu = function() {\r\n    var $menuBtnEl, $menuItemEl, k, len, menuItem, ref, ref1, results;\r\n    if (!$.isArray(this.menu)) {\r\n      return;\r\n    }\r\n    this.menuEl = $('<ul/>').appendTo(this.menuWrapper);\r\n    ref = this.menu;\r\n    results = [];\r\n    for (k = 0, len = ref.length; k < len; k++) {\r\n      menuItem = ref[k];\r\n      if (menuItem === '|') {\r\n        $(this._tpl.separator).appendTo(this.menuEl);\r\n        continue;\r\n      }\r\n      $menuItemEl = $(this._tpl.menuItem).appendTo(this.menuEl);\r\n      $menuBtnEl = $menuItemEl.find('a.menu-item').attr({\r\n        'title': (ref1 = menuItem.title) != null ? ref1 : menuItem.text,\r\n        'data-param': menuItem.param\r\n      }).addClass('menu-item-' + menuItem.name);\r\n      if (menuItem.icon) {\r\n        results.push($menuBtnEl.find('span').addClass(this.iconClassOf(menuItem.icon)));\r\n      } else {\r\n        results.push($menuBtnEl.find('span').text(menuItem.text));\r\n      }\r\n    }\r\n    return results;\r\n  };\r\n\r\n  Button.prototype.setActive = function(active) {\r\n    if (active === this.active) {\r\n      return;\r\n    }\r\n    this.active = active;\r\n    return this.el.toggleClass('active', this.active);\r\n  };\r\n\r\n  Button.prototype.setDisabled = function(disabled) {\r\n    if (disabled === this.disabled) {\r\n      return;\r\n    }\r\n    this.disabled = disabled;\r\n    return this.el.toggleClass('disabled', this.disabled);\r\n  };\r\n\r\n  Button.prototype._disableStatus = function() {\r\n    var disabled, endNodes, startNodes;\r\n    startNodes = this.editor.selection.startNodes();\r\n    endNodes = this.editor.selection.endNodes();\r\n    disabled = startNodes.filter(this.disableTag).length > 0 || endNodes.filter(this.disableTag).length > 0;\r\n    this.setDisabled(disabled);\r\n    if (this.disabled) {\r\n      this.setActive(false);\r\n    }\r\n    return this.disabled;\r\n  };\r\n\r\n  Button.prototype._activeStatus = function() {\r\n    var active, endNode, endNodes, startNode, startNodes;\r\n    startNodes = this.editor.selection.startNodes();\r\n    endNodes = this.editor.selection.endNodes();\r\n    startNode = startNodes.filter(this.htmlTag);\r\n    endNode = endNodes.filter(this.htmlTag);\r\n    active = startNode.length > 0 && endNode.length > 0 && startNode.is(endNode);\r\n    this.node = active ? startNode : null;\r\n    this.setActive(active);\r\n    return this.active;\r\n  };\r\n\r\n  Button.prototype._status = function() {\r\n    this._disableStatus();\r\n    if (this.disabled) {\r\n      return;\r\n    }\r\n    return this._activeStatus();\r\n  };\r\n\r\n  Button.prototype.command = function(param) {};\r\n\r\n  Button.prototype._t = i18n.translate;\r\n  \r\n\r\n  Simditor.Button = Button;\r\n\r\n  return Button;\r\n});\ndefine('skylark-simditor/Popover',[\r\n  \"skylark-jquery\",\r\n  \"./_extend\",\r\n  \"./Module\",\r\n  \"./Simditor\"\r\n],function($,extend,Module,Simditor){ \r\n\r\n  var Popover = Module.inherit({\r\n     init : function(opts) {\r\n      this.button = opts.button;\r\n      this.editor = opts.button.editor;\r\n      Module.prototype.init.call(this, opts);\r\n    }\r\n  });\r\n\r\n\r\n  Popover.prototype.offset = {\r\n    top: 4,\r\n    left: 0\r\n  };\r\n\r\n  Popover.prototype.target = null;\r\n\r\n  Popover.prototype.active = false;\r\n\r\n  Popover.prototype._init = function() {\r\n    this.el = $('<div class=\"simditor-popover\"></div>').appendTo(this.editor.el).data('popover', this);\r\n    this.render();\r\n    this.el.on('mouseenter', (function(_this) {\r\n      return function(e) {\r\n        return _this.el.addClass('hover');\r\n      };\r\n    })(this));\r\n    return this.el.on('mouseleave', (function(_this) {\r\n      return function(e) {\r\n        return _this.el.removeClass('hover');\r\n      };\r\n    })(this));\r\n  };\r\n\r\n  Popover.prototype.render = function() {};\r\n\r\n  Popover.prototype._initLabelWidth = function() {\r\n    var $fields;\r\n    $fields = this.el.find('.settings-field');\r\n    if (!($fields.length > 0)) {\r\n      return;\r\n    }\r\n    this._labelWidth = 0;\r\n    $fields.each((function(_this) {\r\n      return function(i, field) {\r\n        var $field, $label;\r\n        $field = $(field);\r\n        $label = $field.find('label');\r\n        if (!($label.length > 0)) {\r\n          return;\r\n        }\r\n        return _this._labelWidth = Math.max(_this._labelWidth, $label.width());\r\n      };\r\n    })(this));\r\n    return $fields.find('label').width(this._labelWidth);\r\n  };\r\n\r\n  Popover.prototype.show = function($target, position) {\r\n    if (position == null) {\r\n      position = 'bottom';\r\n    }\r\n    if ($target == null) {\r\n      return;\r\n    }\r\n    this.el.siblings('.simditor-popover').each(function(i, popover) {\r\n      popover = $(popover).data('popover');\r\n      if (popover.active) {\r\n        return popover.hide();\r\n      }\r\n    });\r\n    if (this.active && this.target) {\r\n      this.target.removeClass('selected');\r\n    }\r\n    this.target = $target.addClass('selected');\r\n    if (this.active) {\r\n      this.refresh(position);\r\n      return this.trigger('popovershow');\r\n    } else {\r\n      this.active = true;\r\n      this.el.css({\r\n        left: -9999\r\n      }).show();\r\n      if (!this._labelWidth) {\r\n        this._initLabelWidth();\r\n      }\r\n      this.editor.util.reflow();\r\n      this.refresh(position);\r\n      return this.trigger('popovershow');\r\n    }\r\n  };\r\n\r\n  Popover.prototype.hide = function() {\r\n    if (!this.active) {\r\n      return;\r\n    }\r\n    if (this.target) {\r\n      this.target.removeClass('selected');\r\n    }\r\n    this.target = null;\r\n    this.active = false;\r\n    this.el.hide();\r\n    return this.trigger('popoverhide');\r\n  };\r\n\r\n  Popover.prototype.refresh = function(position) {\r\n    var editorOffset, left, maxLeft, targetH, targetOffset, top;\r\n    if (position == null) {\r\n      position = 'bottom';\r\n    }\r\n    if (!this.active) {\r\n      return;\r\n    }\r\n    editorOffset = this.editor.el.offset();\r\n    targetOffset = this.target.offset();\r\n    targetH = this.target.outerHeight();\r\n    if (position === 'bottom') {\r\n      top = targetOffset.top - editorOffset.top + targetH;\r\n    } else if (position === 'top') {\r\n      top = targetOffset.top - editorOffset.top - this.el.height();\r\n    }\r\n    maxLeft = this.editor.wrapper.width() - this.el.outerWidth() - 10;\r\n    left = Math.min(targetOffset.left - editorOffset.left, maxLeft);\r\n    return this.el.css({\r\n      top: top + this.offset.top,\r\n      left: left + this.offset.left\r\n    });\r\n  };\r\n\r\n  Popover.prototype.destroy = function() {\r\n    this.target = null;\r\n    this.active = false;\r\n    this.editor.off('.linkpopover');\r\n    return this.el.remove();\r\n  };\r\n\r\n  Popover.prototype._t = function() {\r\n    var args, ref, result;\r\n    args = 1 <= arguments.length ? Array.prototype.slice.call(arguments, 0) : [];\r\n    result = Module.prototype._t.apply(this, args);\r\n    if (!result) {\r\n      result = (ref = this.button)._t.apply(ref, args);\r\n    }\r\n    return result;\r\n  };\r\n\r\n  Simditor.Popover = Popover;\r\n\r\n  return Popover;\r\n\r\n\t\r\n});\ndefine('skylark-simditor/Toolbar',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-jquery\"\r\n],function(langx,$){ \r\n\r\n  var Toolbar = langx.Evented.inherit({\r\n    init : function(editor,opts) {\r\n      var floatInitialized, initToolbarFloat, toolbarHeight;\r\n      this.editor = editor;\r\n\r\n      this.opts = $.extend({}, this.opts, opts);\r\n\r\n      if (!this.opts.toolbar) {\r\n        return;\r\n      }\r\n      if (!$.isArray(this.opts.toolbar)) {\r\n        this.opts.toolbar = ['bold', 'italic', 'underline', 'strikethrough', '|', 'ol', 'ul', 'blockquote', 'code', '|', 'link', 'image', '|', 'indent', 'outdent'];\r\n      }\r\n      this._render();\r\n      this.list.on('click', function(e) {\r\n        return false;\r\n      });\r\n      this.wrapper.on('mousedown', (function(_this) {\r\n        return function(e) {\r\n          return _this.list.find('.menu-on').removeClass('.menu-on');\r\n        };\r\n      })(this));\r\n      $(document).on('mousedown.simditor' + this.editor.id, (function(_this) {\r\n        return function(e) {\r\n          return _this.list.find('.menu-on').removeClass('.menu-on');\r\n        };\r\n      })(this));\r\n      if (!this.opts.toolbarHidden && this.opts.toolbarFloat) {\r\n        this.wrapper.css('top', this.opts.toolbarFloatOffset);\r\n        toolbarHeight = 0;\r\n        initToolbarFloat = (function(_this) {\r\n          return function() {\r\n            _this.wrapper.css('position', 'static');\r\n            _this.wrapper.width('auto');\r\n            _this.editor.util.reflow(_this.wrapper);\r\n            _this.wrapper.width(_this.wrapper.outerWidth());\r\n            _this.wrapper.css('left', _this.editor.util.os.mobile ? _this.wrapper.position().left : _this.wrapper.offset().left);\r\n            _this.wrapper.css('position', '');\r\n            toolbarHeight = _this.wrapper.outerHeight();\r\n            _this.editor.placeholderEl.css('top', toolbarHeight);\r\n            return true;\r\n          };\r\n        })(this);\r\n        floatInitialized = null;\r\n        $(window).on('resize.simditor-' + this.editor.id, function(e) {\r\n          return floatInitialized = initToolbarFloat();\r\n        });\r\n        $(window).on('scroll.simditor-' + this.editor.id, (function(_this) {\r\n          return function(e) {\r\n            var bottomEdge, scrollTop, topEdge;\r\n            if (!_this.wrapper.is(':visible')) {\r\n              return;\r\n            }\r\n            topEdge = _this.editor.wrapper.offset().top;\r\n            bottomEdge = topEdge + _this.editor.wrapper.outerHeight() - 80;\r\n            scrollTop = $(document).scrollTop() + _this.opts.toolbarFloatOffset;\r\n            if (scrollTop <= topEdge || scrollTop >= bottomEdge) {\r\n              _this.editor.wrapper.removeClass('toolbar-floating').css('padding-top', '');\r\n              if (_this.editor.util.os.mobile) {\r\n                return _this.wrapper.css('top', _this.opts.toolbarFloatOffset);\r\n              }\r\n            } else {\r\n              floatInitialized || (floatInitialized = initToolbarFloat());\r\n              _this.editor.wrapper.addClass('toolbar-floating').css('padding-top', toolbarHeight);\r\n              if (_this.editor.util.os.mobile) {\r\n                return _this.wrapper.css('top', scrollTop - topEdge + _this.opts.toolbarFloatOffset);\r\n              }\r\n            }\r\n          };\r\n        })(this));\r\n      }\r\n      this.editor.on('destroy', (function(_this) {\r\n        return function() {\r\n          return _this.buttons.length = 0;\r\n        };\r\n      })(this));\r\n      $(document).on(\"mousedown.simditor-\" + this.editor.id, (function(_this) {\r\n        return function(e) {\r\n          return _this.list.find('li.menu-on').removeClass('menu-on');\r\n        };\r\n      })(this));\r\n    }\r\n\r\n  });\r\n\r\n  Toolbar.pluginName = 'Toolbar';\r\n\r\n  Toolbar.prototype.opts = {\r\n    toolbar: true,\r\n    toolbarFloat: true,\r\n    toolbarHidden: false,\r\n    toolbarFloatOffset: 0\r\n  };\r\n\r\n  Toolbar.prototype._tpl = {\r\n    wrapper: '<div class=\"simditor-toolbar\"><ul></ul></div>',\r\n    separator: '<li><span class=\"separator\"></span></li>'\r\n  };\r\n\r\n\r\n  Toolbar.prototype._render = function() {\r\n    var k, len, name, ref;\r\n    this.buttons = [];\r\n    this.wrapper = $(this._tpl.wrapper).prependTo(this.editor.wrapper);\r\n    this.list = this.wrapper.find('ul');\r\n    ref = this.opts.toolbar;\r\n    for (k = 0, len = ref.length; k < len; k++) {\r\n      name = ref[k];\r\n      if (name === '|') {\r\n        $(this._tpl.separator).appendTo(this.list);\r\n        continue;\r\n      }\r\n      if (!this.constructor.buttons[name]) {\r\n        throw new Error(\"simditor: invalid toolbar button \" + name);\r\n        continue;\r\n      }\r\n      this.buttons.push(new this.constructor.buttons[name]({\r\n        toolbar : this,\r\n        editor: this.editor\r\n      }));\r\n    }\r\n    if (this.opts.toolbarHidden) {\r\n      return this.wrapper.hide();\r\n    }\r\n  };\r\n\r\n  Toolbar.prototype.findButton = function(name) {\r\n    var button;\r\n    button = this.list.find('.toolbar-item-' + name).data('button');\r\n    return button != null ? button : null;\r\n  };\r\n\r\n  Toolbar.addButton = function(btn) {\r\n    return this.buttons[btn.prototype.name] = btn;\r\n  };\r\n\r\n  Toolbar.buttons = {};\r\n\r\n  return Toolbar;\r\n\r\n});\ndefine('skylark-simditor/buttons/AlignmentButton',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Button\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,Button){ \r\n   var AlignmentButton = Button.inherit({\r\n\r\n    });\r\n\r\n\r\n  AlignmentButton.prototype.name = \"alignment\";\r\n\r\n  AlignmentButton.prototype.icon = 'align-left';\r\n\r\n  AlignmentButton.prototype.htmlTag = 'p, h1, h2, h3, h4, td, th';\r\n\r\n  AlignmentButton.prototype._init = function() {\r\n    this.menu = [\r\n      {\r\n        name: 'left',\r\n        text: this._t('alignLeft'),\r\n        icon: 'align-left',\r\n        param: 'left'\r\n      }, {\r\n        name: 'center',\r\n        text: this._t('alignCenter'),\r\n        icon: 'align-center',\r\n        param: 'center'\r\n      }, {\r\n        name: 'right',\r\n        text: this._t('alignRight'),\r\n        icon: 'align-right',\r\n        param: 'right'\r\n      }\r\n    ];\r\n    return Button.prototype._init.call(this);\r\n  };\r\n\r\n  AlignmentButton.prototype.setActive = function(active, align) {\r\n    if (align == null) {\r\n      align = 'left';\r\n    }\r\n    if (align !== 'left' && align !== 'center' && align !== 'right') {\r\n      align = 'left';\r\n    }\r\n    if (align === 'left') {\r\n      Button.prototype.setActive.call(this, false);\r\n    } else {\r\n      Button.prototype.setActive.call(this, active);\r\n    }\r\n    this.el.removeClass('align-left align-center align-right');\r\n    if (active) {\r\n      this.el.addClass('align-' + align);\r\n    }\r\n    this.setIcon('align-' + align);\r\n    return this.menuEl.find('.menu-item').show().end().find('.menu-item-' + align).hide();\r\n  };\r\n\r\n  AlignmentButton.prototype._status = function() {\r\n    this.nodes = this.editor.selection.nodes().filter(this.htmlTag);\r\n    if (this.nodes.length < 1) {\r\n      this.setDisabled(true);\r\n      return this.setActive(false);\r\n    } else {\r\n      this.setDisabled(false);\r\n      return this.setActive(true, this.nodes.first().css('text-align'));\r\n    }\r\n  };\r\n\r\n  AlignmentButton.prototype.command = function(align) {\r\n    if (align !== 'left' && align !== 'center' && align !== 'right') {\r\n      throw new Error(\"simditor alignment button: invalid align \" + align);\r\n    }\r\n    this.nodes.css({\r\n      'text-align': align === 'left' ? '' : align\r\n    });\r\n    this.editor.trigger('valuechanged');\r\n    return this.editor.inputManager.throttledSelectionChanged();\r\n  };\r\n\r\n  Simditor.Toolbar.addButton(AlignmentButton);\r\n\r\n  return AlignmentButton;\r\n\r\n});\ndefine('skylark-simditor/buttons/BlockquoteButton',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Button\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,Button){ \r\n   var BlockquoteButton = Button.inherit({\r\n\r\n   });\r\n\r\n\r\n\r\n  BlockquoteButton.prototype.name = 'blockquote';\r\n\r\n  BlockquoteButton.prototype.icon = 'quote-left';\r\n\r\n  BlockquoteButton.prototype.htmlTag = 'blockquote';\r\n\r\n  BlockquoteButton.prototype.disableTag = 'pre, table';\r\n\r\n  BlockquoteButton.prototype.command = function() {\r\n    var $rootNodes, clearCache, nodeCache;\r\n    $rootNodes = this.editor.selection.rootNodes();\r\n    $rootNodes = $rootNodes.filter(function(i, node) {\r\n      return !$(node).parent().is('blockquote');\r\n    });\r\n    this.editor.selection.save();\r\n    nodeCache = [];\r\n    clearCache = (function(_this) {\r\n      return function() {\r\n        if (nodeCache.length > 0) {\r\n          $(\"<\" + _this.htmlTag + \"/>\").insertBefore(nodeCache[0]).append(nodeCache);\r\n          return nodeCache.length = 0;\r\n        }\r\n      };\r\n    })(this);\r\n    $rootNodes.each((function(_this) {\r\n      return function(i, node) {\r\n        var $node;\r\n        $node = $(node);\r\n        if (!$node.parent().is(_this.editor.body)) {\r\n          return;\r\n        }\r\n        if ($node.is(_this.htmlTag)) {\r\n          clearCache();\r\n          return $node.children().unwrap();\r\n        } else if ($node.is(_this.disableTag) || _this.editor.util.isDecoratedNode($node)) {\r\n          return clearCache();\r\n        } else {\r\n          return nodeCache.push(node);\r\n        }\r\n      };\r\n    })(this));\r\n    clearCache();\r\n    this.editor.selection.restore();\r\n    return this.editor.trigger('valuechanged');\r\n  };\r\n\r\n  Simditor.Toolbar.addButton(BlockquoteButton); \r\n\r\n  return BlockquoteButton;\r\n\r\n});\ndefine('skylark-simditor/buttons/BoldButton',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Button\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,Button){ \r\n    var BoldButton = Button.inherit({\r\n\r\n    });\r\n\r\n    BoldButton.prototype.name = 'bold';\r\n\r\n    BoldButton.prototype.icon = 'bold';\r\n\r\n    BoldButton.prototype.htmlTag = 'b, strong';\r\n\r\n    BoldButton.prototype.disableTag = 'pre';\r\n\r\n    BoldButton.prototype.shortcut = 'cmd+b';\r\n\r\n    BoldButton.prototype._init = function() {\r\n      if (this.editor.util.os.mac) {\r\n        this.title = this.title + ' ( Cmd + b )';\r\n      } else {\r\n        this.title = this.title + ' ( Ctrl + b )';\r\n        this.shortcut = 'ctrl+b';\r\n      }\r\n      return Button.prototype._init.call(this);\r\n    };\r\n\r\n    BoldButton.prototype._activeStatus = function() {\r\n      var active;\r\n      active = document.queryCommandState('bold') === true;\r\n      this.setActive(active);\r\n      return this.active;\r\n    };\r\n\r\n    BoldButton.prototype.command = function() {\r\n      document.execCommand('bold');\r\n      if (!this.editor.util.support.oninput) {\r\n        this.editor.trigger('valuechanged');\r\n      }\r\n      return $(document).trigger('selectionchange');\r\n    };\r\n\r\n\r\n    Simditor.Toolbar.addButton(BoldButton);\r\n\r\n    return BoldButton;\r\n\r\n});\ndefine('skylark-simditor/buttons/CodePopover',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Popover\"\r\n],function($,extend,Module,Popover){ \r\n\r\n   var CodePopover = Popover.inherit({\r\n\r\n   });\r\n\r\n  CodePopover.prototype.render = function() {\r\n    var $option, k, lang, len, ref;\r\n    this._tpl = \"<div class=\\\"code-settings\\\">\\n  <div class=\\\"settings-field\\\">\\n    <select class=\\\"select-lang\\\">\\n      <option value=\\\"-1\\\">\" + (this._t('selectLanguage')) + \"</option>\\n    </select>\\n  </div>\\n</div>\";\r\n    this.langs = this.editor.opts.codeLanguages || [\r\n      {\r\n        name: 'Bash',\r\n        value: 'bash'\r\n      }, {\r\n        name: 'C++',\r\n        value: 'c++'\r\n      }, {\r\n        name: 'C#',\r\n        value: 'cs'\r\n      }, {\r\n        name: 'CSS',\r\n        value: 'css'\r\n      }, {\r\n        name: 'Erlang',\r\n        value: 'erlang'\r\n      }, {\r\n        name: 'Less',\r\n        value: 'less'\r\n      }, {\r\n        name: 'Sass',\r\n        value: 'sass'\r\n      }, {\r\n        name: 'Diff',\r\n        value: 'diff'\r\n      }, {\r\n        name: 'CoffeeScript',\r\n        value: 'coffeescript'\r\n      }, {\r\n        name: 'HTML,XML',\r\n        value: 'html'\r\n      }, {\r\n        name: 'JSON',\r\n        value: 'json'\r\n      }, {\r\n        name: 'Java',\r\n        value: 'java'\r\n      }, {\r\n        name: 'JavaScript',\r\n        value: 'js'\r\n      }, {\r\n        name: 'Markdown',\r\n        value: 'markdown'\r\n      }, {\r\n        name: 'Objective C',\r\n        value: 'oc'\r\n      }, {\r\n        name: 'PHP',\r\n        value: 'php'\r\n      }, {\r\n        name: 'Perl',\r\n        value: 'parl'\r\n      }, {\r\n        name: 'Python',\r\n        value: 'python'\r\n      }, {\r\n        name: 'Ruby',\r\n        value: 'ruby'\r\n      }, {\r\n        name: 'SQL',\r\n        value: 'sql'\r\n      }\r\n    ];\r\n    this.el.addClass('code-popover').append(this._tpl);\r\n    this.selectEl = this.el.find('.select-lang');\r\n    ref = this.langs;\r\n    for (k = 0, len = ref.length; k < len; k++) {\r\n      lang = ref[k];\r\n      $option = $('<option/>', {\r\n        text: lang.name,\r\n        value: lang.value\r\n      }).appendTo(this.selectEl);\r\n    }\r\n    this.selectEl.on('change', (function(_this) {\r\n      return function(e) {\r\n        var selected;\r\n        _this.lang = _this.selectEl.val();\r\n        selected = _this.target.hasClass('selected');\r\n        _this.target.removeClass().removeAttr('data-lang');\r\n        if (_this.lang !== -1) {\r\n          _this.target.attr('data-lang', _this.lang);\r\n        }\r\n        if (selected) {\r\n          _this.target.addClass('selected');\r\n        }\r\n        return _this.editor.trigger('valuechanged');\r\n      };\r\n    })(this));\r\n    return this.editor.on('valuechanged', (function(_this) {\r\n      return function(e) {\r\n        if (_this.active) {\r\n          return _this.refresh();\r\n        }\r\n      };\r\n    })(this));\r\n  };\r\n\r\n  CodePopover.prototype.show = function() {\r\n    var args;\r\n    args = 1 <= arguments.length ? Array.prototype.slice.call(arguments, 0) : [];\r\n    Popover.prototype.show.apply(this, args);\r\n    this.lang = this.target.attr('data-lang');\r\n    if (this.lang != null) {\r\n      return this.selectEl.val(this.lang);\r\n    } else {\r\n      return this.selectEl.val(-1);\r\n    }\r\n  };\r\n\r\n  return CodePopover;\r\n\r\n});\ndefine('skylark-simditor/buttons/CodeButton',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Button\",\r\n  \"./CodePopover\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,Button,CodePopover){ \r\n\r\n   var CodeButton = Button.inherit({\r\n\r\n   });\r\n\r\n\r\n\r\n  CodeButton.prototype.name = 'code';\r\n\r\n  CodeButton.prototype.icon = 'code';\r\n\r\n  CodeButton.prototype.htmlTag = 'pre';\r\n\r\n  CodeButton.prototype.disableTag = 'ul, ol, table';\r\n\r\n  CodeButton.prototype._init = function() {\r\n    Button.prototype._init.call(this);\r\n    this.editor.on('decorate', (function(_this) {\r\n      return function(e, $el) {\r\n        return $el.find('pre').each(function(i, pre) {\r\n          return _this.decorate($(pre));\r\n        });\r\n      };\r\n    })(this));\r\n    return this.editor.on('undecorate', (function(_this) {\r\n      return function(e, $el) {\r\n        return $el.find('pre').each(function(i, pre) {\r\n          return _this.undecorate($(pre));\r\n        });\r\n      };\r\n    })(this));\r\n  };\r\n\r\n  CodeButton.prototype.render = function() {\r\n    var args;\r\n    args = 1 <= arguments.length ? Array.prototype.slice.call(arguments, 0) : [];\r\n    Button.prototype.render.apply(this, args);\r\n    return this.popover = new CodePopover({\r\n      button: this\r\n    });\r\n  };\r\n\r\n  CodeButton.prototype._checkMode = function() {\r\n    var $blockNodes, range;\r\n    range = this.editor.selection.range();\r\n    if (($blockNodes = $(range.cloneContents()).find(this.editor.util.blockNodes.join(','))) > 0 || (range.collapsed && this.editor.selection.startNodes().filter('code').length === 0)) {\r\n      this.inlineMode = false;\r\n      return this.htmlTag = 'pre';\r\n    } else {\r\n      this.inlineMode = true;\r\n      return this.htmlTag = 'code';\r\n    }\r\n  };\r\n\r\n  CodeButton.prototype._status = function() {\r\n    this._checkMode();\r\n    Button.prototype._status.call(this);\r\n    if (this.inlineMode) {\r\n      return;\r\n    }\r\n    if (this.active) {\r\n      return this.popover.show(this.node);\r\n    } else {\r\n      return this.popover.hide();\r\n    }\r\n  };\r\n\r\n  CodeButton.prototype.decorate = function($pre) {\r\n    var $code, lang, ref, ref1;\r\n    $code = $pre.find('> code');\r\n    if ($code.length > 0) {\r\n      lang = (ref = $code.attr('class')) != null ? (ref1 = ref.match(/lang-(\\S+)/)) != null ? ref1[1] : void 0 : void 0;\r\n      $code.contents().unwrap();\r\n      if (lang) {\r\n        return $pre.attr('data-lang', lang);\r\n      }\r\n    }\r\n  };\r\n\r\n  CodeButton.prototype.undecorate = function($pre) {\r\n    var $code, lang;\r\n    lang = $pre.attr('data-lang');\r\n    $code = $('<code/>');\r\n    if (lang && lang !== -1) {\r\n      $code.addClass('lang-' + lang);\r\n    }\r\n    return $pre.wrapInner($code).removeAttr('data-lang');\r\n  };\r\n\r\n  CodeButton.prototype.command = function() {\r\n    if (this.inlineMode) {\r\n      return this._inlineCommand();\r\n    } else {\r\n      return this._blockCommand();\r\n    }\r\n  };\r\n\r\n  CodeButton.prototype._blockCommand = function() {\r\n    var $rootNodes, clearCache, nodeCache, resultNodes;\r\n    $rootNodes = this.editor.selection.rootNodes();\r\n    nodeCache = [];\r\n    resultNodes = [];\r\n    clearCache = (function(_this) {\r\n      return function() {\r\n        var $pre;\r\n        if (!(nodeCache.length > 0)) {\r\n          return;\r\n        }\r\n        $pre = $(\"<\" + _this.htmlTag + \"/>\").insertBefore(nodeCache[0]).text(_this.editor.formatter.clearHtml(nodeCache));\r\n        resultNodes.push($pre[0]);\r\n        return nodeCache.length = 0;\r\n      };\r\n    })(this);\r\n    $rootNodes.each((function(_this) {\r\n      return function(i, node) {\r\n        var $node, $p;\r\n        $node = $(node);\r\n        if ($node.is(_this.htmlTag)) {\r\n          clearCache();\r\n          $p = $('<p/>').append($node.html().replace('\\n', '<br/>')).replaceAll($node);\r\n          return resultNodes.push($p[0]);\r\n        } else if ($node.is(_this.disableTag) || _this.editor.util.isDecoratedNode($node) || $node.is('blockquote')) {\r\n          return clearCache();\r\n        } else {\r\n          return nodeCache.push(node);\r\n        }\r\n      };\r\n    })(this));\r\n    clearCache();\r\n    this.editor.selection.setRangeAtEndOf($(resultNodes).last());\r\n    return this.editor.trigger('valuechanged');\r\n  };\r\n\r\n  CodeButton.prototype._inlineCommand = function() {\r\n    var $code, $contents, range;\r\n    range = this.editor.selection.range();\r\n    if (this.active) {\r\n      range.selectNodeContents(this.node[0]);\r\n      this.editor.selection.save(range);\r\n      this.node.contents().unwrap();\r\n      this.editor.selection.restore();\r\n    } else {\r\n      $contents = $(range.extractContents());\r\n      $code = $(\"<\" + this.htmlTag + \"/>\").append($contents.contents());\r\n      range.insertNode($code[0]);\r\n      range.selectNodeContents($code[0]);\r\n      this.editor.selection.range(range);\r\n    }\r\n    return this.editor.trigger('valuechanged');\r\n  };\r\n\r\n  Simditor.Toolbar.addButton(CodeButton);    \r\n\r\n  return CodeButton;\r\n\r\n});\ndefine('skylark-simditor/buttons/ColorButton',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Button\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,Button){ \r\n\r\n   var ColorButton = Button.inherit({\r\n\r\n   });\r\n\r\n\r\n  ColorButton.prototype.name = 'color';\r\n\r\n  ColorButton.prototype.icon = 'tint';\r\n\r\n  ColorButton.prototype.disableTag = 'pre';\r\n\r\n  ColorButton.prototype.menu = true;\r\n\r\n  ColorButton.prototype.render = function() {\r\n    var args;\r\n    args = 1 <= arguments.length ? Array.prototype.slice.call(arguments, 0) : [];\r\n    return Button.prototype.render.apply(this, args);\r\n  };\r\n\r\n  ColorButton.prototype.renderMenu = function() {\r\n    $('<ul class=\"color-list\">\\n  <li><a href=\"javascript:;\" class=\"font-color font-color-1\"></a></li>\\n  <li><a href=\"javascript:;\" class=\"font-color font-color-2\"></a></li>\\n  <li><a href=\"javascript:;\" class=\"font-color font-color-3\"></a></li>\\n  <li><a href=\"javascript:;\" class=\"font-color font-color-4\"></a></li>\\n  <li><a href=\"javascript:;\" class=\"font-color font-color-5\"></a></li>\\n  <li><a href=\"javascript:;\" class=\"font-color font-color-6\"></a></li>\\n  <li><a href=\"javascript:;\" class=\"font-color font-color-7\"></a></li>\\n  <li><a href=\"javascript:;\" class=\"font-color font-color-default\"></a></li>\\n</ul>').appendTo(this.menuWrapper);\r\n    this.menuWrapper.on('mousedown', '.color-list', function(e) {\r\n      return false;\r\n    });\r\n    return this.menuWrapper.on('click', '.font-color', (function(_this) {\r\n      return function(e) {\r\n        var $link, $p, hex, range, rgb, textNode;\r\n        _this.wrapper.removeClass('menu-on');\r\n        $link = $(e.currentTarget);\r\n        if ($link.hasClass('font-color-default')) {\r\n          $p = _this.editor.body.find('p, li');\r\n          if (!($p.length > 0)) {\r\n            return;\r\n          }\r\n          rgb = window.getComputedStyle($p[0], null).getPropertyValue('color');\r\n          hex = _this._convertRgbToHex(rgb);\r\n        } else {\r\n          rgb = window.getComputedStyle($link[0], null).getPropertyValue('background-color');\r\n          hex = _this._convertRgbToHex(rgb);\r\n        }\r\n        if (!hex) {\r\n          return;\r\n        }\r\n        range = _this.editor.selection.range();\r\n        if (!$link.hasClass('font-color-default') && range.collapsed) {\r\n          textNode = document.createTextNode(_this._t('coloredText'));\r\n          range.insertNode(textNode);\r\n          range.selectNodeContents(textNode);\r\n        }\r\n        _this.editor.selection.range(range);\r\n        document.execCommand('styleWithCSS', false, true);\r\n        document.execCommand('foreColor', false, hex);\r\n        document.execCommand('styleWithCSS', false, false);\r\n        if (!_this.editor.util.support.oninput) {\r\n          return _this.editor.trigger('valuechanged');\r\n        }\r\n      };\r\n    })(this));\r\n  };\r\n\r\n  ColorButton.prototype._convertRgbToHex = function(rgb) {\r\n    var match, re, rgbToHex;\r\n    re = /rgb\\((\\d+),\\s?(\\d+),\\s?(\\d+)\\)/g;\r\n    match = re.exec(rgb);\r\n    if (!match) {\r\n      return '';\r\n    }\r\n    rgbToHex = function(r, g, b) {\r\n      var componentToHex;\r\n      componentToHex = function(c) {\r\n        var hex;\r\n        hex = c.toString(16);\r\n        if (hex.length === 1) {\r\n          return '0' + hex;\r\n        } else {\r\n          return hex;\r\n        }\r\n      };\r\n      return \"#\" + componentToHex(r) + componentToHex(g) + componentToHex(b);\r\n    };\r\n    return rgbToHex(match[1] * 1, match[2] * 1, match[3] * 1);\r\n  };\r\n\r\n  Simditor.Toolbar.addButton(ColorButton);\r\n\r\n  return ColorButton;\r\n\t\r\n});\ndefine('skylark-simditor/buttons/FontScaleButton',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Button\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,Button){ \r\n   var FontScaleButton = Button.inherit({\r\n\r\n   });\r\n\r\n\r\n\r\n  FontScaleButton.prototype.name = 'fontScale';\r\n\r\n  FontScaleButton.prototype.icon = 'font';\r\n\r\n  FontScaleButton.prototype.htmlTag = 'span';\r\n\r\n  FontScaleButton.prototype.disableTag = 'pre, h1, h2, h3, h4, h5';\r\n\r\n  FontScaleButton.prototype.sizeMap = {\r\n    'x-large': '1.5em',\r\n    'large': '1.25em',\r\n    'small': '.75em',\r\n    'x-small': '.5em'\r\n  };\r\n\r\n  FontScaleButton.prototype._init = function() {\r\n    this.menu = [\r\n      {\r\n        name: '150%',\r\n        text: this._t('fontScaleXLarge'),\r\n        param: '5'\r\n      }, {\r\n        name: '125%',\r\n        text: this._t('fontScaleLarge'),\r\n        param: '4'\r\n      }, {\r\n        name: '100%',\r\n        text: this._t('fontScaleNormal'),\r\n        param: '3'\r\n      }, {\r\n        name: '75%',\r\n        text: this._t('fontScaleSmall'),\r\n        param: '2'\r\n      }, {\r\n        name: '50%',\r\n        text: this._t('fontScaleXSmall'),\r\n        param: '1'\r\n      }\r\n    ];\r\n    return Button.prototype._init.call(this);\r\n  };\r\n\r\n  FontScaleButton.prototype._activeStatus = function() {\r\n    var active, endNode, endNodes, range, startNode, startNodes;\r\n    range = this.editor.selection.range();\r\n    startNodes = this.editor.selection.startNodes();\r\n    endNodes = this.editor.selection.endNodes();\r\n    startNode = startNodes.filter('span[style*=\"font-size\"]');\r\n    endNode = endNodes.filter('span[style*=\"font-size\"]');\r\n    active = startNodes.length > 0 && endNodes.length > 0 && startNode.is(endNode);\r\n    this.setActive(active);\r\n    return this.active;\r\n  };\r\n\r\n  FontScaleButton.prototype.command = function(param) {\r\n    var $scales, containerNode, range;\r\n    range = this.editor.selection.range();\r\n    if (range.collapsed) {\r\n      return;\r\n    }\r\n    this.editor.selection.range(range);\r\n    document.execCommand('styleWithCSS', false, true);\r\n    document.execCommand('fontSize', false, param);\r\n    document.execCommand('styleWithCSS', false, false);\r\n    this.editor.selection.reset();\r\n    this.editor.selection.range();\r\n    containerNode = this.editor.selection.containerNode();\r\n    if (containerNode[0].nodeType === Node.TEXT_NODE) {\r\n      $scales = containerNode.closest('span[style*=\"font-size\"]');\r\n    } else {\r\n      $scales = containerNode.find('span[style*=\"font-size\"]');\r\n    }\r\n    $scales.each((function(_this) {\r\n      return function(i, n) {\r\n        var $span, size;\r\n        $span = $(n);\r\n        size = n.style.fontSize;\r\n        if (/large|x-large|small|x-small/.test(size)) {\r\n          return $span.css('fontSize', _this.sizeMap[size]);\r\n        } else if (size === 'medium') {\r\n          if ($span[0].style.length > 1) {\r\n            return $span.css('fontSize', '');\r\n          } else {\r\n            return $span.replaceWith($span.contents());\r\n          }\r\n        }\r\n      };\r\n    })(this));\r\n    return this.editor.trigger('valuechanged');\r\n  };\r\n\r\n  Simditor.Toolbar.addButton(FontScaleButton);\r\n\r\n  return FontScaleButton;\r\n\r\n});\ndefine('skylark-simditor/buttons/HrButton',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Button\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,Button){ \r\n\r\n   var HrButton = Button.inherit({\r\n\r\n   });\r\n\r\n\r\n  HrButton.prototype.name = 'hr';\r\n\r\n  HrButton.prototype.icon = 'minus';\r\n\r\n  HrButton.prototype.htmlTag = 'hr';\r\n\r\n  HrButton.prototype._status = function() {};\r\n\r\n  HrButton.prototype.command = function() {\r\n    var $hr, $newBlock, $nextBlock, $rootBlock;\r\n    $rootBlock = this.editor.selection.rootNodes().first();\r\n    $nextBlock = $rootBlock.next();\r\n    if ($nextBlock.length > 0) {\r\n      this.editor.selection.save();\r\n    } else {\r\n      $newBlock = $('<p/>').append(this.editor.util.phBr);\r\n    }\r\n    $hr = $('<hr/>').insertAfter($rootBlock);\r\n    if ($newBlock) {\r\n      $newBlock.insertAfter($hr);\r\n      this.editor.selection.setRangeAtStartOf($newBlock);\r\n    } else {\r\n      this.editor.selection.restore();\r\n    }\r\n    return this.editor.trigger('valuechanged');\r\n  };\r\n\r\n  Simditor.Toolbar.addButton(HrButton);\r\n\r\n  return HrButton;\r\n\t\r\n});\ndefine('skylark-simditor/buttons/ImagePopover',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Popover\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,Popover){ \r\n   var ImagePopover = Popover.inherit({\r\n\r\n   });\r\n\r\n  ImagePopover.prototype.offset = {\r\n    top: 6,\r\n    left: -4\r\n  };\r\n\r\n  ImagePopover.prototype.render = function() {\r\n    var tpl;\r\n    tpl = \"<div class=\\\"link-settings\\\">\\n  <div class=\\\"settings-field\\\">\\n    <label>\" + (this._t('imageUrl')) + \"</label>\\n    <input class=\\\"image-src\\\" type=\\\"text\\\" tabindex=\\\"1\\\" />\\n    <a class=\\\"btn-upload\\\" href=\\\"javascript:;\\\"\\n      title=\\\"\" + (this._t('uploadImage')) + \"\\\" tabindex=\\\"-1\\\">\\n      <span class=\\\"simditor-icon simditor-icon-upload\\\"></span>\\n    </a>\\n  </div>\\n  <div class='settings-field'>\\n    <label>\" + (this._t('imageAlt')) + \"</label>\\n    <input class=\\\"image-alt\\\" id=\\\"image-alt\\\" type=\\\"text\\\" tabindex=\\\"1\\\" />\\n  </div>\\n  <div class=\\\"settings-field\\\">\\n    <label>\" + (this._t('imageSize')) + \"</label>\\n    <input class=\\\"image-size\\\" id=\\\"image-width\\\" type=\\\"text\\\" tabindex=\\\"2\\\" />\\n    <span class=\\\"times\\\"></span>\\n    <input class=\\\"image-size\\\" id=\\\"image-height\\\" type=\\\"text\\\" tabindex=\\\"3\\\" />\\n    <a class=\\\"btn-restore\\\" href=\\\"javascript:;\\\"\\n      title=\\\"\" + (this._t('restoreImageSize')) + \"\\\" tabindex=\\\"-1\\\">\\n      <span class=\\\"simditor-icon simditor-icon-undo\\\"></span>\\n    </a>\\n  </div>\\n</div>\";\r\n    this.el.addClass('image-popover').append(tpl);\r\n    this.srcEl = this.el.find('.image-src');\r\n    this.widthEl = this.el.find('#image-width');\r\n    this.heightEl = this.el.find('#image-height');\r\n    this.altEl = this.el.find('#image-alt');\r\n    this.srcEl.on('keydown', (function(_this) {\r\n      return function(e) {\r\n        var range;\r\n        if (!(e.which === 13 && !_this.target.hasClass('uploading'))) {\r\n          return;\r\n        }\r\n        e.preventDefault();\r\n        range = document.createRange();\r\n        _this.button.editor.selection.setRangeAfter(_this.target, range);\r\n        return _this.hide();\r\n      };\r\n    })(this));\r\n    this.srcEl.on('blur', (function(_this) {\r\n      return function(e) {\r\n        return _this._loadImage(_this.srcEl.val());\r\n      };\r\n    })(this));\r\n    this.el.find('.image-size').on('blur', (function(_this) {\r\n      return function(e) {\r\n        _this._resizeImg($(e.currentTarget));\r\n        return _this.el.data('popover').refresh();\r\n      };\r\n    })(this));\r\n    this.el.find('.image-size').on('keyup', (function(_this) {\r\n      return function(e) {\r\n        var inputEl;\r\n        inputEl = $(e.currentTarget);\r\n        if (!(e.which === 13 || e.which === 27 || e.which === 9)) {\r\n          return _this._resizeImg(inputEl, true);\r\n        }\r\n      };\r\n    })(this));\r\n    this.el.find('.image-size').on('keydown', (function(_this) {\r\n      return function(e) {\r\n        var $img, inputEl, range;\r\n        inputEl = $(e.currentTarget);\r\n        if (e.which === 13 || e.which === 27) {\r\n          e.preventDefault();\r\n          if (e.which === 13) {\r\n            _this._resizeImg(inputEl);\r\n          } else {\r\n            _this._restoreImg();\r\n          }\r\n          $img = _this.target;\r\n          _this.hide();\r\n          range = document.createRange();\r\n          return _this.button.editor.selection.setRangeAfter($img, range);\r\n        } else if (e.which === 9) {\r\n          return _this.el.data('popover').refresh();\r\n        }\r\n      };\r\n    })(this));\r\n    this.altEl.on('keydown', (function(_this) {\r\n      return function(e) {\r\n        var range;\r\n        if (e.which === 13) {\r\n          e.preventDefault();\r\n          range = document.createRange();\r\n          _this.button.editor.selection.setRangeAfter(_this.target, range);\r\n          return _this.hide();\r\n        }\r\n      };\r\n    })(this));\r\n    this.altEl.on('keyup', (function(_this) {\r\n      return function(e) {\r\n        if (e.which === 13 || e.which === 27 || e.which === 9) {\r\n          return;\r\n        }\r\n        _this.alt = _this.altEl.val();\r\n        return _this.target.attr('alt', _this.alt);\r\n      };\r\n    })(this));\r\n    this.el.find('.btn-restore').on('click', (function(_this) {\r\n      return function(e) {\r\n        _this._restoreImg();\r\n        return _this.el.data('popover').refresh();\r\n      };\r\n    })(this));\r\n    this.editor.on('valuechanged', (function(_this) {\r\n      return function(e) {\r\n        if (_this.active) {\r\n          return _this.refresh();\r\n        }\r\n      };\r\n    })(this));\r\n    return this._initUploader();\r\n  };\r\n\r\n  ImagePopover.prototype._initUploader = function() {\r\n    var $uploadBtn, createInput;\r\n    $uploadBtn = this.el.find('.btn-upload');\r\n    if (this.editor.uploader == null) {\r\n      $uploadBtn.remove();\r\n      return;\r\n    }\r\n    createInput = (function(_this) {\r\n      return function() {\r\n        if (_this.input) {\r\n          _this.input.remove();\r\n        }\r\n        return _this.input = $('<input/>', {\r\n          type: 'file',\r\n          title: _this._t('uploadImage'),\r\n          multiple: true,\r\n          accept: 'image/gif,image/jpeg,image/jpg,image/png,image/svg'\r\n        }).appendTo($uploadBtn);\r\n      };\r\n    })(this);\r\n    createInput();\r\n    this.el.on('click mousedown', 'input[type=file]', function(e) {\r\n      return e.stopPropagation();\r\n    });\r\n    return this.el.on('change', 'input[type=file]', (function(_this) {\r\n      return function(e) {\r\n        _this.editor.uploader.upload(_this.input, {\r\n          inline: true,\r\n          img: _this.target\r\n        });\r\n        return createInput();\r\n      };\r\n    })(this));\r\n  };\r\n\r\n  ImagePopover.prototype._resizeImg = function(inputEl, onlySetVal) {\r\n    var height, value, width;\r\n    if (onlySetVal == null) {\r\n      onlySetVal = false;\r\n    }\r\n    value = inputEl.val() * 1;\r\n    if (!(this.target && ($.isNumeric(value) || value < 0))) {\r\n      return;\r\n    }\r\n    if (inputEl.is(this.widthEl)) {\r\n      width = value;\r\n      height = this.height * value / this.width;\r\n      this.heightEl.val(height);\r\n    } else {\r\n      height = value;\r\n      width = this.width * value / this.height;\r\n      this.widthEl.val(width);\r\n    }\r\n    if (!onlySetVal) {\r\n      this.target.attr({\r\n        width: width,\r\n        height: height\r\n      });\r\n      return this.editor.trigger('valuechanged');\r\n    }\r\n  };\r\n\r\n  ImagePopover.prototype._restoreImg = function() {\r\n    var ref, size;\r\n    size = ((ref = this.target.data('image-size')) != null ? ref.split(\",\") : void 0) || [this.width, this.height];\r\n    this.target.attr({\r\n      width: size[0] * 1,\r\n      height: size[1] * 1\r\n    });\r\n    this.widthEl.val(size[0]);\r\n    this.heightEl.val(size[1]);\r\n    return this.editor.trigger('valuechanged');\r\n  };\r\n\r\n  ImagePopover.prototype._loadImage = function(src, callback) {\r\n    if (/^data:image/.test(src) && !this.editor.uploader) {\r\n      if (callback) {\r\n        callback(false);\r\n      }\r\n      return;\r\n    }\r\n    if (this.target.attr('src') === src) {\r\n      return;\r\n    }\r\n    return this.button.loadImage(this.target, src, (function(_this) {\r\n      return function(img) {\r\n        var blob;\r\n        if (!img) {\r\n          return;\r\n        }\r\n        if (_this.active) {\r\n          _this.width = img.width;\r\n          _this.height = img.height;\r\n          _this.widthEl.val(_this.width);\r\n          _this.heightEl.val(_this.height);\r\n        }\r\n        if (/^data:image/.test(src)) {\r\n          blob = _this.editor.util.dataURLtoBlob(src);\r\n          blob.name = \"Base64 Image.png\";\r\n          _this.editor.uploader.upload(blob, {\r\n            inline: true,\r\n            img: _this.target\r\n          });\r\n        } else {\r\n          _this.editor.trigger('valuechanged');\r\n        }\r\n        if (callback) {\r\n          return callback(img);\r\n        }\r\n      };\r\n    })(this));\r\n  };\r\n\r\n  ImagePopover.prototype.show = function() {\r\n    var $img, args;\r\n    args = 1 <= arguments.length ? Array.prototype.slice.call(arguments, 0) : [];\r\n    Popover.prototype.show.apply(this, args);\r\n    $img = this.target;\r\n    this.width = $img.width();\r\n    this.height = $img.height();\r\n    this.alt = $img.attr('alt');\r\n    if ($img.hasClass('uploading')) {\r\n      return this.srcEl.val(this._t('uploading')).prop('disabled', true);\r\n    } else {\r\n      this.srcEl.val($img.attr('src')).prop('disabled', false);\r\n      this.widthEl.val(this.width);\r\n      this.heightEl.val(this.height);\r\n      return this.altEl.val(this.alt);\r\n    }\r\n  };\r\n\r\n  return ImagePopover;\r\n\r\n});\ndefine('skylark-simditor/buttons/ImageButton',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Button\",\r\n  \"./ImagePopover\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,Button,ImagePopover){ \r\n   var ImageButton = Button.inherit({\r\n\r\n   });\r\n\r\n\r\n  ImageButton.prototype.name = 'image';\r\n\r\n  ImageButton.prototype.icon = 'picture-o';\r\n\r\n  ImageButton.prototype.htmlTag = 'img';\r\n\r\n  ImageButton.prototype.disableTag = 'pre, table';\r\n\r\n  ImageButton.prototype.defaultImage = '';\r\n\r\n  ImageButton.prototype.needFocus = false;\r\n\r\n  ImageButton.prototype._init = function() {\r\n    var item, k, len, ref;\r\n    if (this.editor.opts.imageButton) {\r\n      if (Array.isArray(this.editor.opts.imageButton)) {\r\n        this.menu = [];\r\n        ref = this.editor.opts.imageButton;\r\n        for (k = 0, len = ref.length; k < len; k++) {\r\n          item = ref[k];\r\n          this.menu.push({\r\n            name: item + '-image',\r\n            text: this._t(item + 'Image')\r\n          });\r\n        }\r\n      } else {\r\n        this.menu = false;\r\n      }\r\n    } else {\r\n      if (this.editor.uploader != null) {\r\n        this.menu = [\r\n          {\r\n            name: 'upload-image',\r\n            text: this._t('uploadImage')\r\n          }, {\r\n            name: 'external-image',\r\n            text: this._t('externalImage')\r\n          }\r\n        ];\r\n      } else {\r\n        this.menu = false;\r\n      }\r\n    }\r\n    this.defaultImage = this.editor.opts.defaultImage;\r\n    this.editor.body.on('click', 'img:not([data-non-image])', (function(_this) {\r\n      return function(e) {\r\n        var $img, range;\r\n        $img = $(e.currentTarget);\r\n        range = document.createRange();\r\n        range.selectNode($img[0]);\r\n        _this.editor.selection.range(range);\r\n        if (!_this.editor.util.support.onselectionchange) {\r\n          _this.editor.trigger('selectionchanged');\r\n        }\r\n        return false;\r\n      };\r\n    })(this));\r\n    this.editor.body.on('mouseup', 'img:not([data-non-image])', function(e) {\r\n      return false;\r\n    });\r\n    this.editor.on('selectionchanged.image', (function(_this) {\r\n      return function() {\r\n        var $contents, $img, range;\r\n        range = _this.editor.selection.range();\r\n        if (range == null) {\r\n          return;\r\n        }\r\n        $contents = $(range.cloneContents()).contents();\r\n        if ($contents.length === 1 && $contents.is('img:not([data-non-image])')) {\r\n          $img = $(range.startContainer).contents().eq(range.startOffset);\r\n          return _this.popover.show($img);\r\n        } else {\r\n          return _this.popover.hide();\r\n        }\r\n      };\r\n    })(this));\r\n    this.editor.on('valuechanged.image', (function(_this) {\r\n      return function() {\r\n        var $masks;\r\n        $masks = _this.editor.wrapper.find('.simditor-image-loading');\r\n        if (!($masks.length > 0)) {\r\n          return;\r\n        }\r\n        return $masks.each(function(i, mask) {\r\n          var $img, $mask, file;\r\n          $mask = $(mask);\r\n          $img = $mask.data('img');\r\n          if (!($img && $img.parent().length > 0)) {\r\n            $mask.remove();\r\n            if ($img) {\r\n              file = $img.data('file');\r\n              if (file) {\r\n                _this.editor.uploader.cancel(file);\r\n                if (_this.editor.body.find('img.uploading').length < 1) {\r\n                  return _this.editor.uploader.trigger('uploadready', [file]);\r\n                }\r\n              }\r\n            }\r\n          }\r\n        });\r\n      };\r\n    })(this));\r\n    return Button.prototype._init.call(this);\r\n  };\r\n\r\n  ImageButton.prototype.render = function() {\r\n    var args;\r\n    args = 1 <= arguments.length ? Array.prototype.slice.call(arguments, 0) : [];\r\n    Button.prototype.render.apply(this, args);\r\n    this.popover = new ImagePopover({\r\n      button: this\r\n    });\r\n    if (this.editor.opts.imageButton === 'upload') {\r\n      return this._initUploader(this.el);\r\n    }\r\n  };\r\n\r\n  ImageButton.prototype.renderMenu = function() {\r\n    Button.prototype.renderMenu.call(this);\r\n    return this._initUploader();\r\n  };\r\n\r\n  ImageButton.prototype._initUploader = function($uploadItem) {\r\n    var $input, createInput, uploadProgress;\r\n    if ($uploadItem == null) {\r\n      $uploadItem = this.menuEl.find('.menu-item-upload-image');\r\n    }\r\n    if (this.editor.uploader == null) {\r\n      this.el.find('.btn-upload').remove();\r\n      return;\r\n    }\r\n    $input = null;\r\n    createInput = (function(_this) {\r\n      return function() {\r\n        if ($input) {\r\n          $input.remove();\r\n        }\r\n        return $input = $('<input/>', {\r\n          type: 'file',\r\n          title: _this._t('uploadImage'),\r\n          multiple: true,\r\n          accept: 'image/gif,image/jpeg,image/jpg,image/png,image/svg'\r\n        }).appendTo($uploadItem);\r\n      };\r\n    })(this);\r\n    createInput();\r\n    $uploadItem.on('click mousedown', 'input[type=file]', function(e) {\r\n      return e.stopPropagation();\r\n    });\r\n    $uploadItem.on('change', 'input[type=file]', (function(_this) {\r\n      return function(e) {\r\n        if (_this.editor.inputManager.focused) {\r\n          _this.editor.uploader.upload($input, {\r\n            inline: true\r\n          });\r\n          createInput();\r\n        } else {\r\n          _this.editor.one('focus', function(e) {\r\n            _this.editor.uploader.upload($input, {\r\n              inline: true\r\n            });\r\n            return createInput();\r\n          });\r\n          _this.editor.focus();\r\n        }\r\n        return _this.wrapper.removeClass('menu-on');\r\n      };\r\n    })(this));\r\n    this.editor.uploader.on('beforeupload', (function(_this) {\r\n      return function(e, file) {\r\n        var $img;\r\n        if (!file.inline) {\r\n          return;\r\n        }\r\n        if (file.img) {\r\n          $img = $(file.img);\r\n        } else {\r\n          $img = _this.createImage(file.name);\r\n          file.img = $img;\r\n        }\r\n        $img.addClass('uploading');\r\n        $img.data('file', file);\r\n        return _this.editor.uploader.readImageFile(file.obj, function(img) {\r\n          var src;\r\n          if (!$img.hasClass('uploading')) {\r\n            return;\r\n          }\r\n          src = img ? img.src : _this.defaultImage;\r\n          return _this.loadImage($img, src, function() {\r\n            if (_this.popover.active) {\r\n              _this.popover.refresh();\r\n              return _this.popover.srcEl.val(_this._t('uploading')).prop('disabled', true);\r\n            }\r\n          });\r\n        });\r\n      };\r\n    })(this));\r\n    uploadProgress = $.proxy(this.editor.util.throttle(function(e, file, loaded, total) {\r\n      var $img, $mask, percent;\r\n      if (!file.inline) {\r\n        return;\r\n      }\r\n      $mask = file.img.data('mask');\r\n      if (!$mask) {\r\n        return;\r\n      }\r\n      $img = $mask.data('img');\r\n      if (!($img.hasClass('uploading') && $img.parent().length > 0)) {\r\n        $mask.remove();\r\n        return;\r\n      }\r\n      percent = loaded / total;\r\n      percent = (percent * 100).toFixed(0);\r\n      if (percent > 99) {\r\n        percent = 99;\r\n      }\r\n      return $mask.find('.progress').height((100 - percent) + \"%\");\r\n    }, 500), this);\r\n    this.editor.uploader.on('uploadprogress', uploadProgress);\r\n    this.editor.uploader.on('uploadsuccess', (function(_this) {\r\n      return function(e, file, result) {\r\n        var $img, img_path, msg;\r\n        if (!file.inline) {\r\n          return;\r\n        }\r\n        $img = file.img;\r\n        if (!($img.hasClass('uploading') && $img.parent().length > 0)) {\r\n          return;\r\n        }\r\n        if (typeof result !== 'object') {\r\n          try {\r\n            result = $.parseJSON(result);\r\n          } catch (_error) {\r\n            e = _error;\r\n            result = {\r\n              success: false\r\n            };\r\n          }\r\n        }\r\n        if (result.success === false) {\r\n          msg = result.msg || _this._t('uploadFailed');\r\n          alert(msg);\r\n          img_path = _this.defaultImage;\r\n        } else {\r\n          img_path = result.file_path;\r\n        }\r\n        _this.loadImage($img, img_path, function() {\r\n          var $mask;\r\n          $img.removeData('file');\r\n          $img.removeClass('uploading').removeClass('loading');\r\n          $mask = $img.data('mask');\r\n          if ($mask) {\r\n            $mask.remove();\r\n          }\r\n          $img.removeData('mask');\r\n          _this.editor.trigger('valuechanged');\r\n          if (_this.editor.body.find('img.uploading').length < 1) {\r\n            return _this.editor.uploader.trigger('uploadready', [file, result]);\r\n          }\r\n        });\r\n        if (_this.popover.active) {\r\n          _this.popover.srcEl.prop('disabled', false);\r\n          return _this.popover.srcEl.val(result.file_path);\r\n        }\r\n      };\r\n    })(this));\r\n    return this.editor.uploader.on('uploaderror', (function(_this) {\r\n      return function(e, file, xhr) {\r\n        var $img, msg, result;\r\n        if (!file.inline) {\r\n          return;\r\n        }\r\n        if (xhr.statusText === 'abort') {\r\n          return;\r\n        }\r\n        if (xhr.responseText) {\r\n          try {\r\n            result = $.parseJSON(xhr.responseText);\r\n            msg = result.msg;\r\n          } catch (_error) {\r\n            e = _error;\r\n            msg = _this._t('uploadError');\r\n          }\r\n        }\r\n        $img = file.img;\r\n        if (!($img.hasClass('uploading') && $img.parent().length > 0)) {\r\n          return;\r\n        }\r\n        _this.loadImage($img, _this.defaultImage, function() {\r\n          var $mask;\r\n          $img.removeData('file');\r\n          $img.removeClass('uploading').removeClass('loading');\r\n          $mask = $img.data('mask');\r\n          if ($mask) {\r\n            $mask.remove();\r\n          }\r\n          return $img.removeData('mask');\r\n        });\r\n        if (_this.popover.active) {\r\n          _this.popover.srcEl.prop('disabled', false);\r\n          _this.popover.srcEl.val(_this.defaultImage);\r\n        }\r\n        _this.editor.trigger('valuechanged');\r\n        if (_this.editor.body.find('img.uploading').length < 1) {\r\n          return _this.editor.uploader.trigger('uploadready', [file, result]);\r\n        }\r\n      };\r\n    })(this));\r\n  };\r\n\r\n  ImageButton.prototype._status = function() {\r\n    return this._disableStatus();\r\n  };\r\n\r\n  ImageButton.prototype.loadImage = function($img, src, callback) {\r\n    var $mask, img, positionMask;\r\n    positionMask = (function(_this) {\r\n      return function() {\r\n        var imgOffset, wrapperOffset;\r\n        imgOffset = $img.offset();\r\n        wrapperOffset = _this.editor.wrapper.offset();\r\n        return $mask.css({\r\n          top: imgOffset.top - wrapperOffset.top,\r\n          left: imgOffset.left - wrapperOffset.left,\r\n          width: $img.width(),\r\n          height: $img.height()\r\n        }).show();\r\n      };\r\n    })(this);\r\n    $img.addClass('loading');\r\n    $mask = $img.data('mask');\r\n    if (!$mask) {\r\n      $mask = $('<div class=\"simditor-image-loading\">\\n  <div class=\"progress\"></div>\\n</div>').hide().appendTo(this.editor.wrapper);\r\n      positionMask();\r\n      $img.data('mask', $mask);\r\n      $mask.data('img', $img);\r\n    }\r\n    img = new Image();\r\n    img.onload = (function(_this) {\r\n      return function() {\r\n        var height, width;\r\n        if (!$img.hasClass('loading') && !$img.hasClass('uploading')) {\r\n          return;\r\n        }\r\n        width = img.width;\r\n        height = img.height;\r\n        $img.attr({\r\n          src: src,\r\n          width: width,\r\n          height: height,\r\n          'data-image-size': width + ',' + height\r\n        }).removeClass('loading');\r\n        if ($img.hasClass('uploading')) {\r\n          _this.editor.util.reflow(_this.editor.body);\r\n          positionMask();\r\n        } else {\r\n          $mask.remove();\r\n          $img.removeData('mask');\r\n        }\r\n        if ($.isFunction(callback)) {\r\n          return callback(img);\r\n        }\r\n      };\r\n    })(this);\r\n    img.onerror = function() {\r\n      if ($.isFunction(callback)) {\r\n        callback(false);\r\n      }\r\n      $mask.remove();\r\n      return $img.removeData('mask').removeClass('loading');\r\n    };\r\n    return img.src = src;\r\n  };\r\n\r\n  ImageButton.prototype.createImage = function(name) {\r\n    var $img, range;\r\n    if (name == null) {\r\n      name = 'Image';\r\n    }\r\n    if (!this.editor.inputManager.focused) {\r\n      this.editor.focus();\r\n    }\r\n    range = this.editor.selection.range();\r\n    range.deleteContents();\r\n    this.editor.selection.range(range);\r\n    $img = $('<img/>').attr('alt', name);\r\n    range.insertNode($img[0]);\r\n    this.editor.selection.setRangeAfter($img, range);\r\n    this.editor.trigger('valuechanged');\r\n    return $img;\r\n  };\r\n\r\n  ImageButton.prototype.command = function(src) {\r\n    var $img;\r\n    $img = this.createImage();\r\n    return this.loadImage($img, src || this.defaultImage, (function(_this) {\r\n      return function() {\r\n        _this.editor.trigger('valuechanged');\r\n        _this.editor.util.reflow($img);\r\n        $img.click();\r\n        return _this.popover.one('popovershow', function() {\r\n          _this.popover.srcEl.focus();\r\n          return _this.popover.srcEl[0].select();\r\n        });\r\n      };\r\n    })(this));\r\n  };\r\n\r\n  Simditor.Toolbar.addButton(ImageButton);\t\r\n\r\n  return ImageButton;\r\n\r\n});\ndefine('skylark-simditor/buttons/IndentButton',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Button\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,Button){ \r\n   var IndentButton = Button.inherit({\r\n\r\n   });\r\n\r\n\r\n  IndentButton.prototype.name = 'indent';\r\n\r\n  IndentButton.prototype.icon = 'indent';\r\n\r\n  IndentButton.prototype._init = function() {\r\n    var hotkey;\r\n    hotkey = this.editor.opts.tabIndent === false ? '' : ' (Tab)';\r\n    this.title = this._t(this.name) + hotkey;\r\n    return Button.prototype._init.call(this);\r\n  };\r\n\r\n  IndentButton.prototype._status = function() {};\r\n\r\n  IndentButton.prototype.command = function() {\r\n    return this.editor.indentation.indent();\r\n  };\r\n\r\n  Simditor.Toolbar.addButton(IndentButton);\t\r\n\r\n  return IndentButton;\r\n});\ndefine('skylark-simditor/buttons/ItalicButton',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Button\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,Button){ \r\n\r\n  var ItalicButton = Button.inherit({\r\n\r\n   });\r\n\r\n\r\n  ItalicButton.prototype.name = 'italic';\r\n\r\n  ItalicButton.prototype.icon = 'italic';\r\n\r\n  ItalicButton.prototype.htmlTag = 'i';\r\n\r\n  ItalicButton.prototype.disableTag = 'pre';\r\n\r\n  ItalicButton.prototype.shortcut = 'cmd+i';\r\n\r\n  ItalicButton.prototype._init = function() {\r\n    if (this.editor.util.os.mac) {\r\n      this.title = this.title + \" ( Cmd + i )\";\r\n    } else {\r\n      this.title = this.title + \" ( Ctrl + i )\";\r\n      this.shortcut = 'ctrl+i';\r\n    }\r\n    return Button.prototype._init.call(this);\r\n  };\r\n\r\n  ItalicButton.prototype._activeStatus = function() {\r\n    var active;\r\n    active = document.queryCommandState('italic') === true;\r\n    this.setActive(active);\r\n    return this.active;\r\n  };\r\n\r\n  ItalicButton.prototype.command = function() {\r\n    document.execCommand('italic');\r\n    if (!this.editor.util.support.oninput) {\r\n      this.editor.trigger('valuechanged');\r\n    }\r\n    return $(document).trigger('selectionchange');\r\n  };\r\n\r\n  Simditor.Toolbar.addButton(ItalicButton); \r\n\r\n  return ItalicButton;\r\n\r\n});\ndefine('skylark-simditor/buttons/LinkPopover',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Popover\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,Popover){ \r\n  var LinkPopover = Popover.inherit({\r\n\r\n  });\r\n\r\n  LinkPopover.prototype.render = function() {\r\n    var tpl;\r\n    tpl = \"<div class=\\\"link-settings\\\">\\n  <div class=\\\"settings-field\\\">\\n    <label>\" + (this._t('linkText')) + \"</label>\\n    <input class=\\\"link-text\\\" type=\\\"text\\\"/>\\n    <a class=\\\"btn-unlink\\\" href=\\\"javascript:;\\\" title=\\\"\" + (this._t('removeLink')) + \"\\\"\\n      tabindex=\\\"-1\\\">\\n      <span class=\\\"simditor-icon simditor-icon-unlink\\\"></span>\\n    </a>\\n  </div>\\n  <div class=\\\"settings-field\\\">\\n    <label>\" + (this._t('linkUrl')) + \"</label>\\n    <input class=\\\"link-url\\\" type=\\\"text\\\"/>\\n  </div>\\n  <div class=\\\"settings-field\\\">\\n    <label>\" + (this._t('linkTarget')) + \"</label>\\n    <select class=\\\"link-target\\\">\\n      <option value=\\\"_blank\\\">\" + (this._t('openLinkInNewWindow')) + \" (_blank)</option>\\n      <option value=\\\"_self\\\">\" + (this._t('openLinkInCurrentWindow')) + \" (_self)</option>\\n    </select>\\n  </div>\\n</div>\";\r\n    this.el.addClass('link-popover').append(tpl);\r\n    this.textEl = this.el.find('.link-text');\r\n    this.urlEl = this.el.find('.link-url');\r\n    this.unlinkEl = this.el.find('.btn-unlink');\r\n    this.selectTarget = this.el.find('.link-target');\r\n    this.textEl.on('keyup', (function(_this) {\r\n      return function(e) {\r\n        if (e.which === 13) {\r\n          return;\r\n        }\r\n        _this.target.text(_this.textEl.val());\r\n        return _this.editor.inputManager.throttledValueChanged();\r\n      };\r\n    })(this));\r\n    this.urlEl.on('keyup', (function(_this) {\r\n      return function(e) {\r\n        var val;\r\n        if (e.which === 13) {\r\n          return;\r\n        }\r\n        val = _this.urlEl.val();\r\n        if (!(/^(http|https|ftp|ftps|file)?:\\/\\/|^(mailto|tel)?:|^\\//ig.test(val) || !val)) {\r\n          val = 'http://' + val;\r\n        }\r\n        _this.target.attr('href', val);\r\n        return _this.editor.inputManager.throttledValueChanged();\r\n      };\r\n    })(this));\r\n    $([this.urlEl[0], this.textEl[0]]).on('keydown', (function(_this) {\r\n      return function(e) {\r\n        var range;\r\n        if (e.which === 13 || e.which === 27 || (!e.shiftKey && e.which === 9 && $(e.target).hasClass('link-url'))) {\r\n          e.preventDefault();\r\n          range = document.createRange();\r\n          _this.editor.selection.setRangeAfter(_this.target, range);\r\n          _this.hide();\r\n          return _this.editor.inputManager.throttledValueChanged();\r\n        }\r\n      };\r\n    })(this));\r\n    this.unlinkEl.on('click', (function(_this) {\r\n      return function(e) {\r\n        var range, txtNode;\r\n        txtNode = document.createTextNode(_this.target.text());\r\n        _this.target.replaceWith(txtNode);\r\n        _this.hide();\r\n        range = document.createRange();\r\n        _this.editor.selection.setRangeAfter(txtNode, range);\r\n        return _this.editor.inputManager.throttledValueChanged();\r\n      };\r\n    })(this));\r\n    return this.selectTarget.on('change', (function(_this) {\r\n      return function(e) {\r\n        _this.target.attr('target', _this.selectTarget.val());\r\n        return _this.editor.inputManager.throttledValueChanged();\r\n      };\r\n    })(this));\r\n  };\r\n\r\n  LinkPopover.prototype.show = function() {\r\n    var args;\r\n    args = 1 <= arguments.length ? Array.prototype.slice.call(arguments, 0) : [];\r\n    Popover.prototype.show.apply(this, args);\r\n    this.textEl.val(this.target.text());\r\n    return this.urlEl.val(this.target.attr('href'));\r\n  };\r\n\r\n  return LinkPopover;\r\n\r\n});\ndefine('skylark-simditor/buttons/LinkButton',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Button\",\r\n  \"./LinkPopover\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,Button,LinkPopover){ \r\n\r\n  var LinkButton = Button.inherit({\r\n\r\n   });\r\n\r\n\r\n  LinkButton.prototype.name = 'link';\r\n\r\n  LinkButton.prototype.icon = 'link';\r\n\r\n  LinkButton.prototype.htmlTag = 'a';\r\n\r\n  LinkButton.prototype.disableTag = 'pre';\r\n\r\n  LinkButton.prototype.render = function() {\r\n    var args;\r\n    args = 1 <= arguments.length ? Array.prototype.slice.call(arguments, 0) : [];\r\n    Button.prototype.render.apply(this, args);\r\n    return this.popover = new LinkPopover({\r\n      button: this\r\n    });\r\n  };\r\n\r\n  LinkButton.prototype._status = function() {\r\n   Button.prototype._status.call(this);\r\n    if (this.active && !this.editor.selection.rangeAtEndOf(this.node)) {\r\n      return this.popover.show(this.node);\r\n    } else {\r\n      return this.popover.hide();\r\n    }\r\n  };\r\n\r\n  LinkButton.prototype.command = function() {\r\n    var $contents, $link, $newBlock, linkText, range, txtNode;\r\n    range = this.editor.selection.range();\r\n    if (this.active) {\r\n      txtNode = document.createTextNode(this.node.text());\r\n      this.node.replaceWith(txtNode);\r\n      range.selectNode(txtNode);\r\n    } else {\r\n      $contents = $(range.extractContents());\r\n      linkText = this.editor.formatter.clearHtml($contents.contents(), false);\r\n      $link = $('<a/>', {\r\n        href: '',\r\n        target: '_blank',\r\n        text: linkText || this._t('linkText')\r\n      });\r\n      if (this.editor.selection.blockNodes().length > 0) {\r\n        range.insertNode($link[0]);\r\n      } else {\r\n        $newBlock = $('<p/>').append($link);\r\n        range.insertNode($newBlock[0]);\r\n      }\r\n      range.selectNodeContents($link[0]);\r\n      this.popover.one('popovershow', (function(_this) {\r\n        return function() {\r\n          if (linkText) {\r\n            _this.popover.urlEl.focus();\r\n            return _this.popover.urlEl[0].select();\r\n          } else {\r\n            _this.popover.textEl.focus();\r\n            return _this.popover.textEl[0].select();\r\n          }\r\n        };\r\n      })(this));\r\n    }\r\n    this.editor.selection.range(range);\r\n    return this.editor.trigger('valuechanged');\r\n  };\r\n\r\n  Simditor.Toolbar.addButton(LinkButton);\r\n\r\n  return LinkButton;\r\n\r\n});\ndefine('skylark-simditor/buttons/ListButton',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Button\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,Button){ \r\n  var ListButton = Button.inherit({\r\n\r\n   });\r\n\r\n\r\n    ListButton.prototype.type = '';\r\n\r\n    ListButton.prototype.disableTag = 'pre, table';\r\n\r\n    ListButton.prototype.command = function(param) {\r\n      var $list, $rootNodes, anotherType;\r\n      $rootNodes = this.editor.selection.blockNodes();\r\n      anotherType = this.type === 'ul' ? 'ol' : 'ul';\r\n      this.editor.selection.save();\r\n      $list = null;\r\n      $rootNodes.each((function(_this) {\r\n        return function(i, node) {\r\n          var $node;\r\n          $node = $(node);\r\n          if ($node.is('blockquote, li') || $node.is(_this.disableTag) || _this.editor.util.isDecoratedNode($node) || !$.contains(document, node)) {\r\n            return;\r\n          }\r\n          if ($node.is(_this.type)) {\r\n            $node.children('li').each(function(i, li) {\r\n              var $childList, $li;\r\n              $li = $(li);\r\n              $childList = $li.children('ul, ol').insertAfter($node);\r\n              return $('<p/>').append($(li).html() || _this.editor.util.phBr).insertBefore($node);\r\n            });\r\n            return $node.remove();\r\n          } else if ($node.is(anotherType)) {\r\n            return $('<' + _this.type + '/>').append($node.contents()).replaceAll($node);\r\n          } else if ($list && $node.prev().is($list)) {\r\n            $('<li/>').append($node.html() || _this.editor.util.phBr).appendTo($list);\r\n            return $node.remove();\r\n          } else {\r\n            $list = $(\"<\" + _this.type + \"><li></li></\" + _this.type + \">\");\r\n            $list.find('li').append($node.html() || _this.editor.util.phBr);\r\n            return $list.replaceAll($node);\r\n          }\r\n        };\r\n      })(this));\r\n      this.editor.selection.restore();\r\n      return this.editor.trigger('valuechanged');\r\n    };\r\n\r\n    return ListButton;\r\n\t\r\n});\ndefine('skylark-simditor/buttons/OrderListButton',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"./ListButton\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,ListButton){ \r\n  var OrderListButton = ListButton.inherit({\r\n\r\n   });\r\n\r\n\r\n    OrderListButton.prototype.type = 'ol';\r\n\r\n    OrderListButton.prototype.name = 'ol';\r\n\r\n    OrderListButton.prototype.icon = 'list-ol';\r\n\r\n    OrderListButton.prototype.htmlTag = 'ol';\r\n\r\n    OrderListButton.prototype.shortcut = 'cmd+/';\r\n\r\n    OrderListButton.prototype._init = function() {\r\n      if (this.editor.util.os.mac) {\r\n        this.title = this.title + ' ( Cmd + / )';\r\n      } else {\r\n        this.title = this.title + ' ( ctrl + / )';\r\n        this.shortcut = 'ctrl+/';\r\n      }\r\n      return ListButton.prototype._init.call(this);\r\n    };\r\n\r\n    Simditor.Toolbar.addButton(OrderListButton);\r\n\r\n    return OrderListButton;\r\n\t\r\n});\ndefine('skylark-simditor/buttons/OutdentButton',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Button\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,Button){ \r\n  var OutdentButton = Button.inherit({\r\n\r\n   });\r\n\r\n\r\n  OutdentButton.prototype.name = 'outdent';\r\n\r\n  OutdentButton.prototype.icon = 'outdent';\r\n\r\n  OutdentButton.prototype._init = function() {\r\n    var hotkey;\r\n    hotkey = this.editor.opts.tabIndent === false ? '' : ' (Shift + Tab)';\r\n    this.title = this._t(this.name) + hotkey;\r\n    return Button.prototype._init.call(this);\r\n  };\r\n\r\n  OutdentButton.prototype._status = function() {};\r\n\r\n  OutdentButton.prototype.command = function() {\r\n    return this.editor.indentation.indent(true);\r\n  };\r\n\r\n  Simditor.Toolbar.addButton(OutdentButton);\t\r\n\r\n  return OutdentButton;\r\n\r\n});\ndefine('skylark-simditor/buttons/StrikethroughButton',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Button\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,Button){ \r\n  var StrikethroughButton = Button.inherit({\r\n\r\n   });\r\n\r\n\r\n  StrikethroughButton.prototype.name = 'strikethrough';\r\n\r\n  StrikethroughButton.prototype.icon = 'strikethrough';\r\n\r\n  StrikethroughButton.prototype.htmlTag = 'strike';\r\n\r\n  StrikethroughButton.prototype.disableTag = 'pre';\r\n\r\n  StrikethroughButton.prototype._activeStatus = function() {\r\n    var active;\r\n    active = document.queryCommandState('strikethrough') === true;\r\n    this.setActive(active);\r\n    return this.active;\r\n  };\r\n\r\n  StrikethroughButton.prototype.command = function() {\r\n    document.execCommand('strikethrough');\r\n    if (!this.editor.util.support.oninput) {\r\n      this.editor.trigger('valuechanged');\r\n    }\r\n    return $(document).trigger('selectionchange');\r\n  };\r\n\r\n  Simditor.Toolbar.addButton(StrikethroughButton);\t\r\n\r\n  return StrikethroughButton;\r\n\r\n});\ndefine('skylark-utils-dom/tables',[\r\n    \"./dom\",\r\n    \"./langx\",\r\n    \"./query\"\r\n], function(dom, langx,$) {\r\n  //TODO : don't use query\r\n\r\n  function tables() {\r\n      return tables;\r\n  }\r\n\r\n  function _changeCellTag($tr, tagName) {\r\n    return $tr.find('td, th').each(function(i, cell) {\r\n      var $cell;\r\n      $cell = $(cell);\r\n      return $cell.replaceWith(\"<\" + tagName + \">\" + ($cell.html()) + \"</\" + tagName + \">\");\r\n    });\r\n  }\r\n\r\n  function _nextRow($tr) {\r\n    var $nextTr;\r\n    $nextTr = $tr.next('tr');\r\n    if ($nextTr.length < 1 && $tr.parent('thead').length > 0) {\r\n      $nextTr = $tr.parent('thead').next('tbody').find('tr:first');\r\n    }\r\n    return $nextTr;\r\n  };\r\n\r\n  function _prevRow($tr) {\r\n    var $prevTr;\r\n    $prevTr = $tr.prev('tr');\r\n    if ($prevTr.length < 1 && $tr.parent('tbody').length > 0) {\r\n      $prevTr = $tr.parent('tbody').prev('thead').find('tr');\r\n    }\r\n    return $prevTr;\r\n  }\r\n\r\n  function createTable(row, col, phBr) {\r\n    var $table, $tbody, $td, $thead, $tr, c, k, l, r, ref, ref1;\r\n    $table = $('<table/>');\r\n    $thead = $('<thead/>').appendTo($table);\r\n    $tbody = $('<tbody/>').appendTo($table);\r\n    for (r = k = 0, ref = row; 0 <= ref ? k < ref : k > ref; r = 0 <= ref ? ++k : --k) {\r\n        $tr = $('<tr/>');\r\n        $tr.appendTo(r === 0 ? $thead : $tbody);\r\n        for (c = l = 0, ref1 = col; 0 <= ref1 ? l < ref1 : l > ref1; c = 0 <= ref1 ? ++l : --l) {\r\n          $td = $(r === 0 ? '<th/>' : '<td/>').appendTo($tr);\r\n          if (phBr) {\r\n              $td.append(phBr);\r\n          }\r\n        }\r\n    }   \r\n    return $table[0];\r\n  }\r\n    \r\n\r\n  //cls = simditor-table\r\n  function decorate(table,cssClasses) {\r\n    var $table = $(table);\r\n\r\n    var $colgroup, $headRow, $resizeHandle, $tbody, $thead, $wrapper;\r\n    if ($table.parent('.' + cssClasses.tableDecorate).length > 0) {\r\n      undecorate(table);\r\n    }\r\n    $table.wrap('<div class=\"' + cssClasses.tableDecorate + '\"></div>');\r\n    $wrapper = $table.parent('.' + cssClasses.tableDecorate );\r\n    $colgroup = $table.find('colgroup');\r\n    if ($table.find('thead').length < 1) {\r\n      $thead = $('<thead />');\r\n      $headRow = $table.find('tr').first();\r\n      $thead.append($headRow);\r\n      _changeCellTag($headRow, 'th');\r\n      $tbody = $table.find('tbody');\r\n      if ($tbody.length > 0) {\r\n        $tbody.before($thead);\r\n      } else {\r\n        $table.prepend($thead);\r\n      }\r\n    }\r\n    if ($colgroup.length < 1) {\r\n      $colgroup = $('<colgroup/>').prependTo($table);\r\n      $table.find('thead tr th').each(function(i, td) {\r\n        var $col;\r\n        return $col = $('<col/>').appendTo($colgroup);\r\n      });\r\n      refreshTableWidth($table);\r\n    }\r\n    $resizeHandle = $('<div />', {\r\n      \"class\": cssClasses.resizeHandle, // 'simditor-resize-handle',\r\n      contenteditable: 'false'\r\n    }).appendTo($wrapper);\r\n    return $table.parent();\r\n  }\r\n\r\n  function deleteTable(td,callback) {\r\n    var $td = $(td);\r\n\r\n    var $block, $table;\r\n    $table = $td.closest('.simditor-table');\r\n    $block = $table.next('p');\r\n    $table.remove();\r\n    if (callback) {\r\n      callback($block);\r\n    }\r\n  }\r\n\r\n  function deleteRow(td,callback) {\r\n    var $td = $(td);\r\n\r\n    var $newTr, $tr, index;\r\n    $tr = $td.parent('tr');\r\n    if ($tr.closest('table').find('tr').length < 1) {\r\n      return deleteTable(td);\r\n    } else {\r\n      $newTr = _nextRow($tr);\r\n      if (!($newTr.length > 0)) {\r\n        $newTr = _prevRow($tr);\r\n      }\r\n      index = $tr.find('td, th').index($td);\r\n      if ($tr.parent().is('thead')) {\r\n        $newTr.appendTo($tr.parent());\r\n        _changeCellTag($newTr, 'th');\r\n      }\r\n      $tr.remove();\r\n    \r\n      if (callback) {\r\n        callback($newTr[0],index);\r\n      }\r\n      //return this.editor.selection.setRangeAtEndOf($newTr.find('td, th').eq(index));\r\n    }\r\n  }\r\n\r\n  function insertRow(td, direction,phBr,callback) {\r\n    var $td = $(td);\r\n\r\n    var $newTr, $table, $tr, cellTag, colNum, i, index, k, ref;\r\n    if (direction == null) {\r\n      direction = 'after';\r\n    }\r\n    $tr = $td.parent('tr');\r\n    $table = $tr.closest('table');\r\n    colNum = 0;\r\n    $table.find('tr').each(function(i, tr) {\r\n      return colNum = Math.max(colNum, $(tr).find('td').length);\r\n    });\r\n    index = $tr.find('td, th').index($td);\r\n    $newTr = $('<tr/>');\r\n    cellTag = 'td';\r\n    if (direction === 'after' && $tr.parent().is('thead')) {\r\n      $tr.parent().next('tbody').prepend($newTr);\r\n    } else if (direction === 'before' && $tr.parent().is('thead')) {\r\n      $tr.before($newTr);\r\n      $tr.parent().next('tbody').prepend($tr);\r\n      _changeCellTag($tr, 'td');\r\n      cellTag = 'th';\r\n    } else {\r\n      $tr[direction]($newTr);\r\n    }\r\n    for (i = k = 1, ref = colNum; 1 <= ref ? k <= ref : k >= ref; i = 1 <= ref ? ++k : --k) {\r\n      $(\"<\" + cellTag + \"/>\").append(phBr).appendTo($newTr);\r\n    }\r\n\r\n    if (callback) {\r\n      callback($newTr[0],index);\r\n    }\r\n  }\r\n\r\n  function deleteCol(td,callback) {\r\n    var $td = $(td);\r\n\r\n    var $newTd, $table, $tr, index, noOtherCol, noOtherRow;\r\n    $tr = $td.parent('tr');\r\n    noOtherRow = $tr.closest('table').find('tr').length < 2;\r\n    noOtherCol = $td.siblings('td, th').length < 1;\r\n    if (noOtherRow && noOtherCol) {\r\n      return deleteTable(td);\r\n    } else {\r\n      index = $tr.find('td, th').index($td);\r\n      $newTd = $td.next('td, th');\r\n      if (!($newTd.length > 0)) {\r\n        $newTd = $tr.prev('td, th');\r\n      }\r\n      $table = $tr.closest('table');\r\n      $table.find('col').eq(index).remove();\r\n      $table.find('tr').each(function(i, tr) {\r\n        return $(tr).find('td, th').eq(index).remove();\r\n      });\r\n      refreshTableWidth($table);\r\n      //return this.editor.selection.setRangeAtEndOf($newTd);\r\n      if (callback) {\r\n        callback($newTd[0]);\r\n      }\r\n    }\r\n  }\r\n\r\n  function insertCol(td, direction,phBr,callback) {\r\n    var $td = $(td);\r\n\r\n    var $col, $newCol, $newTd, $table, $tr, index, tableWidth, width;\r\n    if (direction == null) {\r\n      direction = 'after';\r\n    }\r\n    $tr = $td.parent('tr');\r\n    index = $tr.find('td, th').index($td);\r\n    $table = $td.closest('table');\r\n    $col = $table.find('col').eq(index);\r\n    $table.find('tr').each((function(_this) {\r\n      return function(i, tr) {\r\n        var $newTd, cellTag;\r\n        cellTag = $(tr).parent().is('thead') ? 'th' : 'td';\r\n        $newTd = $(\"<\" + cellTag + \"/>\").append(phBr);\r\n        return $(tr).find('td, th').eq(index)[direction]($newTd);\r\n      };\r\n    })(this));\r\n    $newCol = $('<col/>');\r\n    $col[direction]($newCol);\r\n    tableWidth = $table.width();\r\n    width = Math.max(parseFloat($col.attr('width')) / 2, 50 / tableWidth * 100);\r\n    $col.attr('width', width + '%');\r\n    $newCol.attr('width', width + '%');\r\n    refreshTableWidth($table);\r\n    $newTd = direction === 'after' ? $td.next('td, th') : $td.prev('td, th');\r\n    //return this.editor.selection.setRangeAtStartOf($newTd);\r\n    if (callback) {\r\n      callback($newTd[0]);\r\n    }\r\n  }\r\n\r\n\r\n  function refreshTableWidth($table) {\r\n    return setTimeout((function(_this) {\r\n      return function() {\r\n        var cols, tableWidth;\r\n        tableWidth = $table.width();\r\n        cols = $table.find('col');\r\n        return $table.find('thead tr th').each(function(i, td) {\r\n          var $col;\r\n          $col = cols.eq(i);\r\n          return $col.attr('width', ($(td).outerWidth() / tableWidth * 100) + '%');\r\n        });\r\n      };\r\n    })(this), 0);\r\n  }\r\n\r\n\r\n  function resizable(container,options) {\r\n    var cssClasses = options.cssClasses,\r\n        clsResizeHandle = cssClasses.resizeHandle, // simditor-resize-handle\r\n        clsWrapper = cssClasses.wrapper, // .simditor-table\r\n        selectorWrapper = \".\" + clsWrapper,\r\n        selectorResizeHandle = \".\" + clsResizeHandle;\r\n\r\n    $(container).on('mousemove.table', selectorWrapper +' td, ' + selectorWrapper +' th', function(e) {\r\n      var $col, $colgroup, $resizeHandle, $td, $wrapper, index, ref, ref1, x;\r\n      $wrapper = $(this).parents(selectorWrapper);\r\n      $resizeHandle = $wrapper.find(selectorResizeHandle);\r\n      $colgroup = $wrapper.find('colgroup');\r\n      if ($wrapper.hasClass('resizing')) {\r\n        return;\r\n      }\r\n      $td = $(e.currentTarget);\r\n      x = e.pageX - $(e.currentTarget).offset().left;\r\n      if (x < 5 && $td.prev().length > 0) {\r\n        $td = $td.prev();\r\n      }\r\n      if ($td.next('td, th').length < 1) {\r\n        $resizeHandle.hide();\r\n        return;\r\n      }\r\n      if ((ref = $resizeHandle.data('td')) != null ? ref.is($td) : void 0) {\r\n        $resizeHandle.show();\r\n        return;\r\n      }\r\n      index = $td.parent().find('td, th').index($td);\r\n      $col = $colgroup.find('col').eq(index);\r\n      if ((ref1 = $resizeHandle.data('col')) != null ? ref1.is($col) : void 0) {\r\n        $resizeHandle.show();\r\n        return;\r\n      }\r\n      return $resizeHandle.css('left', $td.position().left + $td.outerWidth() - 5).data('td', $td).data('col', $col).show();\r\n    });\r\n\r\n    $(container).on('mouseleave'+ selectorWrapper, selectorWrapper, function(e) {\r\n      return $(this).find(selectorResizeHandle).hide();\r\n    });\r\n    return $(container).on('mousedown'+ selectorResizeHandle, selectorResizeHandle, function(e) {\r\n      var $handle, $leftCol, $leftTd, $rightCol, $rightTd, $wrapper, minWidth, startHandleLeft, startLeftWidth, startRightWidth, startX, tableWidth;\r\n      $wrapper = $(this).parent(selectorWrapper);\r\n      $handle = $(e.currentTarget);\r\n      $leftTd = $handle.data('td');\r\n      $leftCol = $handle.data('col');\r\n      $rightTd = $leftTd.next('td, th');\r\n      $rightCol = $leftCol.next('col');\r\n      startX = e.pageX;\r\n      startLeftWidth = $leftTd.outerWidth() * 1;\r\n      startRightWidth = $rightTd.outerWidth() * 1;\r\n      startHandleLeft = parseFloat($handle.css('left'));\r\n      tableWidth = $leftTd.closest(selectorWrapper).width();\r\n      minWidth = 50;\r\n      $(container).on('mousemove.resize-table', function(e) {\r\n        var deltaX, leftWidth, rightWidth;\r\n        deltaX = e.pageX - startX;\r\n        leftWidth = startLeftWidth + deltaX;\r\n        rightWidth = startRightWidth - deltaX;\r\n        if (leftWidth < minWidth) {\r\n          leftWidth = minWidth;\r\n          deltaX = minWidth - startLeftWidth;\r\n          rightWidth = startRightWidth - deltaX;\r\n        } else if (rightWidth < minWidth) {\r\n          rightWidth = minWidth;\r\n          deltaX = startRightWidth - minWidth;\r\n          leftWidth = startLeftWidth + deltaX;\r\n        }\r\n        $leftCol.attr('width', (leftWidth / tableWidth * 100) + '%');\r\n        $rightCol.attr('width', (rightWidth / tableWidth * 100) + '%');\r\n        return $handle.css('left', startHandleLeft + deltaX);\r\n      });\r\n      $(container).one('mouseup.resize-table', function(e) {\r\n        //$editor.sync();\r\n        $(container).off('.resize-table');\r\n        return $wrapper.removeClass('resizing');\r\n      });\r\n      $wrapper.addClass('resizing');\r\n      return false;\r\n    });\r\n  };\r\n\r\n  function undecorate(table) {\r\n    var $table = $(table);\r\n    if (!($table.parent('.simditor-table').length > 0)) {\r\n      return;\r\n    }\r\n    return $table.parent().replaceWith($table)[0];\r\n  };\r\n\r\n\r\n\r\n  langx.mixin(tables,{\r\n    \"createTable\" : createTable,\r\n    \"decorate\" : decorate,\r\n    \"deleteCol\" : deleteCol,\r\n    \"deleteRow\" : deleteRow,\r\n    \"deleteTable\" : deleteTable,\r\n    \"insertCol\" : insertCol,\r\n    \"insertRow\" : insertRow,\r\n    \"refreshTableWidth\" : refreshTableWidth,\r\n    \"resizable\" : resizable,\r\n    \"undecorate\" : undecorate\r\n  })\r\n\r\n\r\n  return dom.tables = tables;\r\n});\ndefine('skylark-simditor/buttons/TableButton',[\r\n  \"skylark-utils-dom/tables\",\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Button\"\r\n],function(tables,$,extend,SimpleModule,Toolbar,Simditor,Button){ \r\n  var TableButton = Button.inherit({\r\n\r\n   });\r\n\r\n\r\n  TableButton.prototype.name = 'table';\r\n\r\n  TableButton.prototype.icon = 'table';\r\n\r\n  TableButton.prototype.htmlTag = 'table';\r\n\r\n  TableButton.prototype.disableTag = 'pre, li, blockquote';\r\n\r\n  TableButton.prototype.menu = true;\r\n\r\n  TableButton.prototype._init = function() {\r\n    Button.prototype._init.call(this);\r\n    $.merge(this.editor.formatter._allowedTags, ['thead', 'th', 'tbody', 'tr', 'td', 'colgroup', 'col']);\r\n    $.extend(this.editor.formatter._allowedAttributes, {\r\n      td: ['rowspan', 'colspan'],\r\n      col: ['width']\r\n    });\r\n    $.extend(this.editor.formatter._allowedStyles, {\r\n      td: ['text-align'],\r\n      th: ['text-align']\r\n    });\r\n    this._initShortcuts();\r\n    this._initResize();\r\n    this.editor.on('decorate', (function(_this) {\r\n      return function(e, $el) {\r\n        return $el.find('table').each(function(i, table) {\r\n          return _this.decorate($(table));\r\n        });\r\n      };\r\n    })(this));\r\n    this.editor.on('undecorate', (function(_this) {\r\n      return function(e, $el) {\r\n        return $el.find('table').each(function(i, table) {\r\n          return _this.undecorate($(table));\r\n        });\r\n      };\r\n    })(this));\r\n    this.editor.on('selectionchanged.table', (function(_this) {\r\n      return function(e) {\r\n        var $container, range;\r\n        _this.editor.body.find('.simditor-table td, .simditor-table th').removeClass('active');\r\n        range = _this.editor.selection.range();\r\n        if (!range) {\r\n          return;\r\n        }\r\n        $container = _this.editor.selection.containerNode();\r\n        if (range.collapsed && $container.is('.simditor-table')) {\r\n          _this.editor.selection.setRangeAtEndOf($container);\r\n        }\r\n        return $container.closest('td, th', _this.editor.body).addClass('active');\r\n      };\r\n    })(this));\r\n    this.editor.on('blur.table', (function(_this) {\r\n      return function(e) {\r\n        return _this.editor.body.find('.simditor-table td, .simditor-table th').removeClass('active');\r\n      };\r\n    })(this));\r\n    this.editor.keystroke.add('up', 'td', (function(_this) {\r\n      return function(e, $node) {\r\n        _this._tdNav($node, 'up');\r\n        return true;\r\n      };\r\n    })(this));\r\n    this.editor.keystroke.add('up', 'th', (function(_this) {\r\n      return function(e, $node) {\r\n        _this._tdNav($node, 'up');\r\n        return true;\r\n      };\r\n    })(this));\r\n    this.editor.keystroke.add('down', 'td', (function(_this) {\r\n      return function(e, $node) {\r\n        _this._tdNav($node, 'down');\r\n        return true;\r\n      };\r\n    })(this));\r\n    return this.editor.keystroke.add('down', 'th', (function(_this) {\r\n      return function(e, $node) {\r\n        _this._tdNav($node, 'down');\r\n        return true;\r\n      };\r\n    })(this));\r\n  };\r\n\r\n  TableButton.prototype._tdNav = function($td, direction) {\r\n    var $anotherTr, $tr, action, anotherTag, index, parentTag, ref;\r\n    if (direction == null) {\r\n      direction = 'up';\r\n    }\r\n    action = direction === 'up' ? 'prev' : 'next';\r\n    ref = direction === 'up' ? ['tbody', 'thead'] : ['thead', 'tbody'], parentTag = ref[0], anotherTag = ref[1];\r\n    $tr = $td.parent('tr');\r\n    $anotherTr = this[\"_\" + action + \"Row\"]($tr);\r\n    if (!($anotherTr.length > 0)) {\r\n      return true;\r\n    }\r\n    index = $tr.find('td, th').index($td);\r\n    return this.editor.selection.setRangeAtEndOf($anotherTr.find('td, th').eq(index));\r\n  };\r\n\r\n  TableButton.prototype._initResize = function() {\r\n\r\n    tables.resizable(document,{\r\n      cssClasses : {\r\n        resizeHandle : \"simditor-resize-handle\",\r\n        wrapper : \"simditor-table\"\r\n      }\r\n    });\r\n\r\n  };\r\n\r\n  TableButton.prototype._initShortcuts = function() {\r\n    this.editor.hotkeys.add('ctrl+alt+up', (function(_this) {\r\n      return function(e) {\r\n        _this.editMenu.find('.menu-item[data-param=insertRowAbove]').click();\r\n        return false;\r\n      };\r\n    })(this));\r\n    this.editor.hotkeys.add('ctrl+alt+down', (function(_this) {\r\n      return function(e) {\r\n        _this.editMenu.find('.menu-item[data-param=insertRowBelow]').click();\r\n        return false;\r\n      };\r\n    })(this));\r\n    this.editor.hotkeys.add('ctrl+alt+left', (function(_this) {\r\n      return function(e) {\r\n        _this.editMenu.find('.menu-item[data-param=insertColLeft]').click();\r\n        return false;\r\n      };\r\n    })(this));\r\n    return this.editor.hotkeys.add('ctrl+alt+right', (function(_this) {\r\n      return function(e) {\r\n        _this.editMenu.find('.menu-item[data-param=insertColRight]').click();\r\n        return false;\r\n      };\r\n    })(this));\r\n  };\r\n\r\n  TableButton.prototype.renderMenu = function() {\r\n    var $table;\r\n    $(\"<div class=\\\"menu-create-table\\\">\\n</div>\\n<div class=\\\"menu-edit-table\\\">\\n  <ul>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"deleteRow\\\">\\n        <span>\" + (this._t('deleteRow')) + \"</span>\\n      </a>\\n    </li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"insertRowAbove\\\">\\n        <span>\" + (this._t('insertRowAbove')) + \" ( Ctrl + Alt +  )</span>\\n      </a>\\n    </li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"insertRowBelow\\\">\\n        <span>\" + (this._t('insertRowBelow')) + \" ( Ctrl + Alt +  )</span>\\n      </a>\\n    </li>\\n    <li><span class=\\\"separator\\\"></span></li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"deleteCol\\\">\\n        <span>\" + (this._t('deleteColumn')) + \"</span>\\n      </a>\\n    </li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"insertColLeft\\\">\\n        <span>\" + (this._t('insertColumnLeft')) + \" ( Ctrl + Alt +  )</span>\\n      </a>\\n    </li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"insertColRight\\\">\\n        <span>\" + (this._t('insertColumnRight')) + \" ( Ctrl + Alt +  )</span>\\n      </a>\\n    </li>\\n    <li><span class=\\\"separator\\\"></span></li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"deleteTable\\\">\\n        <span>\" + (this._t('deleteTable')) + \"</span>\\n      </a>\\n    </li>\\n  </ul>\\n</div>\").appendTo(this.menuWrapper);\r\n    this.createMenu = this.menuWrapper.find('.menu-create-table');\r\n    this.editMenu = this.menuWrapper.find('.menu-edit-table');\r\n    $table = this.createTable(6, 6).appendTo(this.createMenu);\r\n    this.createMenu.on('mouseenter', 'td, th', (function(_this) {\r\n      return function(e) {\r\n        var $td, $tr, $trs, num;\r\n        _this.createMenu.find('td, th').removeClass('selected');\r\n        $td = $(e.currentTarget);\r\n        $tr = $td.parent();\r\n        num = $tr.find('td, th').index($td) + 1;\r\n        $trs = $tr.prevAll('tr').addBack();\r\n        if ($tr.parent().is('tbody')) {\r\n          $trs = $trs.add($table.find('thead tr'));\r\n        }\r\n        return $trs.find(\"td:lt(\" + num + \"), th:lt(\" + num + \")\").addClass('selected');\r\n      };\r\n    })(this));\r\n    this.createMenu.on('mouseleave', function(e) {\r\n      return $(e.currentTarget).find('td, th').removeClass('selected');\r\n    });\r\n    return this.createMenu.on('mousedown', 'td, th', (function(_this) {\r\n      return function(e) {\r\n        var $closestBlock, $td, $tr, colNum, rowNum;\r\n        _this.wrapper.removeClass('menu-on');\r\n        if (!_this.editor.inputManager.focused) {\r\n          return;\r\n        }\r\n        $td = $(e.currentTarget);\r\n        $tr = $td.parent();\r\n        colNum = $tr.find('td').index($td) + 1;\r\n        rowNum = $tr.prevAll('tr').length + 1;\r\n        if ($tr.parent().is('tbody')) {\r\n          rowNum += 1;\r\n        }\r\n        $table = _this.createTable(rowNum, colNum, true);\r\n        $closestBlock = _this.editor.selection.blockNodes().last();\r\n        if (_this.editor.util.isEmptyNode($closestBlock)) {\r\n          $closestBlock.replaceWith($table);\r\n        } else {\r\n          $closestBlock.after($table);\r\n        }\r\n        _this.decorate($table);\r\n        _this.editor.selection.setRangeAtStartOf($table.find('th:first'));\r\n        _this.editor.trigger('valuechanged');\r\n        return false;\r\n      };\r\n    })(this));\r\n  };\r\n\r\n  TableButton.prototype.decorate = function($table) {\r\n    return $(tables.decorate($table[0],{\r\n      tableDecorate : 'simditor-table',\r\n      resizeHandle : 'simditor-resize-handle'\r\n    }));\r\n\r\n  };\r\n\r\n  TableButton.prototype.undecorate = function($table) {\r\n    return $(tables.undecorate($table[0],{\r\n      tableDecorate : 'simditor-table',\r\n      resizeHandle : 'simditor-resize-handle'\r\n    }));\r\n\r\n  };\r\n\r\n\r\n  TableButton.prototype.createTable = function(row, col, phBr) {\r\n    return $(tables.createTable(row,col,phBr ? this.editor.util.phBr : null));\r\n  };\r\n\r\n  TableButton.prototype.refreshTableWidth = function($table) {\r\n    return table.refreshTableWidth($table[0]);\r\n  };\r\n\r\n  TableButton.prototype.setActive = function(active) {\r\n    Button.prototype.setActive.call(this, active);\r\n    if (active) {\r\n      this.createMenu.hide();\r\n      return this.editMenu.show();\r\n    } else {\r\n      this.createMenu.show();\r\n      return this.editMenu.hide();\r\n    }\r\n  };\r\n\r\n  TableButton.prototype.deleteRow = function($td) {\r\n    var self = this,\r\n        ret; \r\n\r\n    tables.deleteRow($td[0],function(newTr,index){\r\n      if (newTr) {\r\n        ret = self.editor.selection.setRangeAtEndOf($(newTr).find('td, th').eq(index));\r\n      }\r\n    })\r\n\r\n    return ret;\r\n  };\r\n\r\n  TableButton.prototype.insertRow = function($td, direction) {\r\n    var self = this,\r\n        ret; \r\n\r\n    tables.insertRow($td[0],direction,self.editor.util.phBr,function(newTr,index){\r\n      ret =  self.editor.selection.setRangeAtStartOf($(newTr).find('td, th').eq(index));\r\n    })\r\n\r\n    return ret;\r\n\r\n  };\r\n\r\n  TableButton.prototype.deleteCol = function($td) {\r\n    var self = this,\r\n        ret; \r\n\r\n    tables.deleteCol($td[0],function(newTd){\r\n      if (newTd) {\r\n        ret = self.editor.selection.setRangeAtEndOf($(newTd));\r\n      }\r\n    })\r\n\r\n    return ret;\r\n  };\r\n\r\n  TableButton.prototype.insertCol = function($td, direction) {\r\n    var self = this,\r\n        ret; \r\n\r\n    tables.insertCol($td[0],direction,self.editor.util.phBr,function(newTd){\r\n      ret = self.editor.selection.setRangeAtStartOf($(newTd));\r\n    })\r\n\r\n    return ret;\r\n  };\r\n\r\n  TableButton.prototype.deleteTable = function($td) {\r\n    var self = this;\r\n    tables.deleteTable($td[0],function($block){\r\n      if ($block.length > 0) {\r\n        return self.editor.selection.setRangeAtStartOf($block);\r\n      }\r\n    });\r\n  };\r\n\r\n  TableButton.prototype.command = function(param) {\r\n    var $td;\r\n    $td = this.editor.selection.containerNode().closest('td, th');\r\n    if (!($td.length > 0)) {\r\n      return;\r\n    }\r\n    if (param === 'deleteRow') {\r\n      this.deleteRow($td);\r\n    } else if (param === 'insertRowAbove') {\r\n      this.insertRow($td, 'before');\r\n    } else if (param === 'insertRowBelow') {\r\n      this.insertRow($td);\r\n    } else if (param === 'deleteCol') {\r\n      this.deleteCol($td);\r\n    } else if (param === 'insertColLeft') {\r\n      this.insertCol($td, 'before');\r\n    } else if (param === 'insertColRight') {\r\n      this.insertCol($td);\r\n    } else if (param === 'deleteTable') {\r\n      this.deleteTable($td);\r\n    } else {\r\n      return;\r\n    }\r\n    return this.editor.trigger('valuechanged');\r\n  };\r\n\r\n  Simditor.Toolbar.addButton(TableButton);\r\n\r\n  return TableButton;\r\n\r\n\r\n});\ndefine('skylark-simditor/buttons/TitleButton',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Button\",\r\n  \"../i18n\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,Button,i18n){ \r\n  var TitleButton = Button.inherit({\r\n\r\n   });\r\n\r\n  TitleButton.prototype.name = 'title';\r\n\r\n  TitleButton.prototype.htmlTag = 'h1, h2, h3, h4, h5';\r\n\r\n  TitleButton.prototype.disableTag = 'pre, table';\r\n\r\n  TitleButton.prototype._init = function() {\r\n    this.menu = [\r\n      {\r\n        name: 'normal',\r\n        text: i18n.translate('normalText'),\r\n        param: 'p'\r\n      }, '|', {\r\n        name: 'h1',\r\n        text: i18n.translate('title') + ' 1',\r\n        param: 'h1'\r\n      }, {\r\n        name: 'h2',\r\n        text: i18n.translate('title') + ' 2',\r\n        param: 'h2'\r\n      }, {\r\n        name: 'h3',\r\n        text: i18n.translate('title') + ' 3',\r\n        param: 'h3'\r\n      }, {\r\n        name: 'h4',\r\n        text: i18n.translate('title') + ' 4',\r\n        param: 'h4'\r\n      }, {\r\n        name: 'h5',\r\n        text: i18n.translate('title') + ' 5',\r\n        param: 'h5'\r\n      }\r\n    ];\r\n    return Button.prototype._init.call(this);\r\n  };\r\n\r\n  TitleButton.prototype.setActive = function(active, param) {\r\n    Button.prototype.setActive.call(this, active);\r\n    if (active) {\r\n      param || (param = this.node[0].tagName.toLowerCase());\r\n    }\r\n    this.el.removeClass('active-p active-h1 active-h2 active-h3 active-h4 active-h5');\r\n    if (active) {\r\n      return this.el.addClass('active active-' + param);\r\n    }\r\n  };\r\n\r\n  TitleButton.prototype.command = function(param) {\r\n    var $rootNodes;\r\n    $rootNodes = this.editor.selection.rootNodes();\r\n    this.editor.selection.save();\r\n    $rootNodes.each((function(_this) {\r\n      return function(i, node) {\r\n        var $node;\r\n        $node = $(node);\r\n        if ($node.is('blockquote') || $node.is(param) || $node.is(_this.disableTag) || _this.editor.util.isDecoratedNode($node)) {\r\n          return;\r\n        }\r\n        return $('<' + param + '/>').append($node.contents()).replaceAll($node);\r\n      };\r\n    })(this));\r\n    this.editor.selection.restore();\r\n    return this.editor.trigger('valuechanged');\r\n  };\r\n\r\n  Simditor.Toolbar.addButton(TitleButton);\r\n\r\n  return TitleButton;\r\n\r\n});\ndefine('skylark-simditor/buttons/UnderlineButton',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Button\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,Button){\r\n  var UnderlineButton = Button.inherit({\r\n\r\n   });\r\n\r\n\r\n  UnderlineButton.prototype.name = 'underline';\r\n\r\n  UnderlineButton.prototype.icon = 'underline';\r\n\r\n  UnderlineButton.prototype.htmlTag = 'u';\r\n\r\n  UnderlineButton.prototype.disableTag = 'pre';\r\n\r\n  UnderlineButton.prototype.shortcut = 'cmd+u';\r\n\r\n  UnderlineButton.prototype.render = function() {\r\n    if (this.editor.util.os.mac) {\r\n      this.title = this.title + ' ( Cmd + u )';\r\n    } else {\r\n      this.title = this.title + ' ( Ctrl + u )';\r\n      this.shortcut = 'ctrl+u';\r\n    }\r\n    return Button.prototype.render.call(this);\r\n  };\r\n\r\n  UnderlineButton.prototype._activeStatus = function() {\r\n    var active;\r\n    active = document.queryCommandState('underline') === true;\r\n    this.setActive(active);\r\n    return this.active;\r\n  };\r\n\r\n  UnderlineButton.prototype.command = function() {\r\n    document.execCommand('underline');\r\n    if (!this.editor.util.support.oninput) {\r\n      this.editor.trigger('valuechanged');\r\n    }\r\n    return $(document).trigger('selectionchange');\r\n  };\r\n\r\n\r\n  Simditor.Toolbar.addButton(UnderlineButton);\r\n\r\n  return UnderlineButton;\r\n\r\n});\ndefine('skylark-simditor/buttons/UnorderListButton',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"./ListButton\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,ListButton){ \r\n   var UnorderListButton = ListButton.inherit({\r\n\r\n   });\r\n\r\n    UnorderListButton.prototype.type = 'ul';\r\n\r\n    UnorderListButton.prototype.name = 'ul';\r\n\r\n    UnorderListButton.prototype.icon = 'list-ul';\r\n\r\n    UnorderListButton.prototype.htmlTag = 'ul';\r\n\r\n    UnorderListButton.prototype.shortcut = 'cmd+.';\r\n\r\n    UnorderListButton.prototype._init = function() {\r\n      if (this.editor.util.os.mac) {\r\n        this.title = this.title + ' ( Cmd + . )';\r\n      } else {\r\n        this.title = this.title + ' ( Ctrl + . )';\r\n        this.shortcut = 'ctrl+.';\r\n      }\r\n      return ListButton.prototype._init.call(this);\r\n    };\r\n\r\n    Simditor.Toolbar.addButton(UnorderListButton);  \r\n\r\n    return UnorderListButton;\r\n\r\n});\ndefine('skylark-simditor/main',[\r\n  \"./Simditor\", \r\n  \"./Button\", \r\n  \"./Popover\", \r\n\r\n  \"./buttons/AlignmentButton\", \r\n  \"./buttons/BlockquoteButton\", \r\n  \"./buttons/BoldButton\", \r\n  \"./buttons/CodeButton\", \r\n  \"./buttons/CodePopover\", \r\n  \"./buttons/ColorButton\", \r\n  \"./buttons/FontScaleButton\", \r\n  \"./buttons/HrButton\", \r\n  \"./buttons/ImageButton\", \r\n  \"./buttons/ImagePopover\", \r\n  \"./buttons/IndentButton\", \r\n  \"./buttons/ItalicButton\", \r\n  \"./buttons/LinkButton\", \r\n  \"./buttons/LinkPopover\", \r\n  \"./buttons/ListButton\", \r\n  \"./buttons/OrderListButton\", \r\n  \"./buttons/OutdentButton\",\r\n  \"./buttons/StrikethroughButton\", \r\n  \"./buttons/TableButton\", \r\n  \"./buttons/TitleButton\", \r\n  \"./buttons/UnderlineButton\", \r\n  \"./buttons/UnorderListButton\"\r\n],function(Simditor){\r\n\t\r\n  return Simditor;\r\n});\ndefine('skylark-simditor', ['skylark-simditor/main'], function (main) { return main; });\n\n"]}