{"version":3,"sources":["skylark-simditor.js"],"names":["define","exports","module","__isValidToReturn","obj","Array","isArray","attr","__isEmptyObject","$","extend","Module","hotkeys","uploader","Util","InputManager","Selection","UndoManager","Keystroke","Formatter","Toolbar","Indentation","Clipboard","i18n","Simditor","inherit","count","prototype","opts","textarea","placeholder","defaultImage","params","upload","indentWidth","_init","editor","uploadOpts","_this","this","util","length","Error","data","destroy","id","_render","el","body","on","_placeholder","setValue","val","trim","focus","browser","mozilla","reflow","document","execCommand","_error","inputManager","selection","undoManager","keystroke","formatter","toolbar","indentation","clipboard","_tpl","key","ref","results","insertBefore","wrapper","find","placeholderEl","append","blur","os","mac","addClass","linux","mobile","push","type","name","value","insertAfter","children","isEmptyNode","parseInt","css","show","hide","hidePopover","get","innerHTML","format","decorate","lastCaretPosition","trigger","getValue","sync","cloneBody","emptyP","firstP","lastP","clone","undecorate","autolink","last","first","is","prev","remove","next","html","$blockEl","range","caretPosition","phBr","appendTo","createRange","setRangeAtEndOf","each","i","popover","active","triggerHandler","closest","off","clear","focused","removeData","window","hasProp","hasOwnProperty","child","parent","call","ctor","constructor","__super__","langx","Evented","init","base","cls","instance","instances","len","_connectedClasses","pluginName","charAt","toLowerCase","slice","_connected","_module","extended","include","included","connect","args","concat","apply","_t","arguments","result","locale","replace","p0","p","position","shift","zh-CN","Button","title","item","menuWrapper","menuItem","separator","icon","text","htmlTag","disableTag","menu","disabled","needFocus","shortcut","k","tag","render","e","noFocus","param","preventDefault","hasClass","toggleClass","siblings","removeClass","offset","left","outerWidth","right","command","btn","currentTarget","pasting","setActive","setDisabled","add","mousedown","split","inArray","_allowedTags","_status","iconClassOf","setIcon","list","renderMenu","$menuBtnEl","$menuItemEl","ref1","menuEl","data-param","_disableStatus","endNodes","startNodes","filter","_activeStatus","endNode","startNode","node","Popover","button","top","target","_initLabelWidth","$fields","_labelWidth","field","$field","$label","Math","max","width","$target","refresh","editorOffset","maxLeft","targetH","targetOffset","outerHeight","height","min","floatInitialized","initToolbarFloat","toolbarHeight","toolbarHidden","toolbarFloat","toolbarFloatOffset","bottomEdge","scrollTop","topEdge","buttons","prependTo","findButton","addButton","SimpleModule","AlignmentButton","align","end","nodes","text-align","throttledSelectionChanged","BlockquoteButton","$rootNodes","clearCache","nodeCache","rootNodes","save","$node","unwrap","isDecoratedNode","restore","BoldButton","queryCommandState","support","oninput","CodePopover","lang","langs","codeLanguages","selectEl","selected","removeAttr","CodeButton","$el","pre","_checkMode","cloneContents","blockNodes","join","collapsed","inlineMode","$pre","$code","match","contents","wrapInner","_inlineCommand","_blockCommand","resultNodes","clearHtml","$p","replaceAll","$contents","selectNodeContents","extractContents","insertNode","ColorButton","$link","hex","rgb","textNode","getComputedStyle","getPropertyValue","_convertRgbToHex","createTextNode","exec","r","g","b","componentToHex","c","toString","rgbToHex","FontScaleButton","sizeMap","x-large","large","small","x-small","containerNode","reset","nodeType","Node","TEXT_NODE","n","$span","size","style","fontSize","test","replaceWith","HrButton","$hr","$newBlock","$rootBlock","setRangeAtStartOf","ImagePopover","tpl","srcEl","widthEl","heightEl","altEl","which","setRangeAfter","_loadImage","_resizeImg","inputEl","$img","_restoreImg","alt","_initUploader","$uploadBtn","createInput","input","multiple","accept","stopPropagation","inline","img","onlySetVal","isNumeric","src","callback","loadImage","blob","dataURLtoBlob","prop","ImageButton","imageButton","selectNode","onselectionchange","startContainer","eq","startOffset","$masks","mask","$mask","file","cancel","$uploadItem","$input","uploadProgress","one","createImage","readImageFile","proxy","throttle","loaded","total","percent","toFixed","img_path","msg","parseJSON","success","alert","file_path","xhr","statusText","responseText","positionMask","imgOffset","wrapperOffset","Image","onload","data-image-size","isFunction","onerror","deleteContents","click","select","IndentButton","hotkey","tabIndent","indent","ItalicButton","LinkPopover","textEl","urlEl","unlinkEl","selectTarget","throttledValueChanged","shiftKey","txtNode","LinkButton","rangeAtEndOf","linkText","href","ListButton","$list","anotherType","contains","li","OrderListButton","OutdentButton","StrikethroughButton","dom","tables","_changeCellTag","$tr","tagName","cell","$cell","deleteTable","td","$block","$table","$td","refreshTableWidth","setTimeout","cols","tableWidth","table","mixin","createTable","row","col","$tbody","$thead","l","cssClasses","$colgroup","$headRow","$wrapper","tableDecorate","wrap","before","prepend","class","resizeHandle","contenteditable","deleteCol","$newTd","index","noOtherCol","noOtherRow","tr","deleteRow","$newTr","$nextTr","_nextRow","$prevTr","_prevRow","insertCol","direction","$col","$newCol","cellTag","parseFloat","insertRow","colNum","resizable","container","options","clsResizeHandle","selectorWrapper","selectorResizeHandle","$resizeHandle","parents","pageX","$handle","$leftCol","$leftTd","$rightCol","$rightTd","startHandleLeft","startLeftWidth","startRightWidth","startX","deltaX","leftWidth","rightWidth","TableButton","merge","_allowedAttributes","_allowedStyles","th","_initShortcuts","_initResize","$container","_tdNav","$anotherTr","action","editMenu","createMenu","$trs","num","prevAll","addBack","$closestBlock","rowNum","after","ret","self","newTr","newTd","TitleButton","UnderlineButton","UnorderListButton","main"],"mappings":"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","file":"../skylark-simditor.js","sourcesContent":["define([], function () {\n    'use strict';\n    var exports = {};\n    var module = { exports: {} };\n    define([\n        'skylark-jquery',\n        './_extend',\n        './Module',\n        './hotkeys',\n        './uploader',\n        './Util',\n        './InputManager',\n        './Selection',\n        './UndoManager',\n        './Keystroke',\n        './Formatter',\n        './Toolbar',\n        './Indentation',\n        './Clipboard',\n        './i18n'\n    ], function ($, extend, Module, hotkeys, uploader, Util, InputManager, Selection, UndoManager, Keystroke, Formatter, Toolbar, Indentation, Clipboard, i18n) {\n        var Simditor = Module.inherit({});\n        Simditor.count = 0;\n        Simditor.prototype.opts = {\n            textarea: null,\n            placeholder: '',\n            defaultImage: 'images/image.png',\n            params: {},\n            upload: false,\n            indentWidth: 40\n        };\n        Simditor.prototype._init = function () {\n            this.util = new Util(this);\n            var e, editor, uploadOpts;\n            this.textarea = $(this.opts.textarea);\n            this.opts.placeholder = this.opts.placeholder || this.textarea.attr('placeholder');\n            if (!this.textarea.length) {\n                throw new Error('simditor: param textarea is required.');\n                return;\n            }\n            editor = this.textarea.data('simditor');\n            if (editor != null) {\n                editor.destroy();\n            }\n            this.id = ++Simditor.count;\n            this._render();\n            if (hotkeys) {\n                this.hotkeys = hotkeys({ el: this.body });\n            } else {\n                throw new Error('simditor: simple-hotkeys is required.');\n                return;\n            }\n            if (this.opts.upload && uploader) {\n                uploadOpts = typeof this.opts.upload === 'object' ? this.opts.upload : {};\n                this.uploader = uploader(uploadOpts);\n            }\n            this.on('initialized', function (_this) {\n                return function () {\n                    if (_this.opts.placeholder) {\n                        _this.on('valuechanged', function () {\n                            return _this._placeholder();\n                        });\n                    }\n                    _this.setValue(_this.textarea.val().trim() || '');\n                    if (_this.textarea.attr('autofocus')) {\n                        return _this.focus();\n                    }\n                };\n            }(this));\n            if (this.util.browser.mozilla) {\n                this.util.reflow();\n                try {\n                    document.execCommand('enableObjectResizing', false, false);\n                    return document.execCommand('enableInlineTableEditing', false, false);\n                } catch (_error) {\n                    e = _error;\n                }\n            }\n            this.inputManager = new InputManager(this);\n            this.selection = new Selection(this);\n            this.undoManager = new UndoManager(this);\n            this.keystroke = new Keystroke(this);\n            this.formatter = new Formatter(this);\n            this.toolbar = new Toolbar(this);\n            this.indentation = new Indentation(this);\n            this.clipboard = new Clipboard(this);\n        };\n        Simditor.prototype._tpl = '<div class=\"simditor\">\\n  <div class=\"simditor-wrapper\">\\n    <div class=\"simditor-placeholder\"></div>\\n    <div class=\"simditor-body\" contenteditable=\"true\">\\n    </div>\\n  </div>\\n</div>';\n        Simditor.prototype._render = function () {\n            var key, ref, results, val;\n            this.el = $(this._tpl).insertBefore(this.textarea);\n            this.wrapper = this.el.find('.simditor-wrapper');\n            this.body = this.wrapper.find('.simditor-body');\n            this.placeholderEl = this.wrapper.find('.simditor-placeholder').append(this.opts.placeholder);\n            this.el.data('simditor', this);\n            this.wrapper.append(this.textarea);\n            this.textarea.data('simditor', this).blur();\n            this.body.attr('tabindex', this.textarea.attr('tabindex'));\n            if (this.util.os.mac) {\n                this.el.addClass('simditor-mac');\n            } else if (this.util.os.linux) {\n                this.el.addClass('simditor-linux');\n            }\n            if (this.util.os.mobile) {\n                this.el.addClass('simditor-mobile');\n            }\n            if (this.opts.params) {\n                ref = this.opts.params;\n                results = [];\n                for (key in ref) {\n                    val = ref[key];\n                    results.push($('<input/>', {\n                        type: 'hidden',\n                        name: key,\n                        value: val\n                    }).insertAfter(this.textarea));\n                }\n                return results;\n            }\n        };\n        Simditor.prototype._placeholder = function () {\n            var children;\n            children = this.body.children();\n            if (children.length === 0 || children.length === 1 && this.util.isEmptyNode(children) && parseInt(children.css('margin-left') || 0) < this.opts.indentWidth) {\n                return this.placeholderEl.show();\n            } else {\n                return this.placeholderEl.hide();\n            }\n        };\n        Simditor.prototype.setValue = function (val) {\n            this.hidePopover();\n            this.textarea.val(val);\n            this.body.get(0).innerHTML = val;\n            this.formatter.format();\n            this.formatter.decorate();\n            this.util.reflow(this.body);\n            this.inputManager.lastCaretPosition = null;\n            return this.trigger('valuechanged');\n        };\n        Simditor.prototype.getValue = function () {\n            return this.sync();\n        };\n        Simditor.prototype.sync = function () {\n            var children, cloneBody, emptyP, firstP, lastP, val;\n            cloneBody = this.body.clone();\n            this.formatter.undecorate(cloneBody);\n            this.formatter.format(cloneBody);\n            this.formatter.autolink(cloneBody);\n            children = cloneBody.children();\n            lastP = children.last('p');\n            firstP = children.first('p');\n            while (lastP.is('p') && this.util.isEmptyNode(lastP)) {\n                emptyP = lastP;\n                lastP = lastP.prev('p');\n                emptyP.remove();\n            }\n            while (firstP.is('p') && this.util.isEmptyNode(firstP)) {\n                emptyP = firstP;\n                firstP = lastP.next('p');\n                emptyP.remove();\n            }\n            cloneBody.find('img.uploading').remove();\n            val = $.trim(cloneBody.html());\n            this.textarea.val(val);\n            return val;\n        };\n        Simditor.prototype.focus = function () {\n            var $blockEl, range;\n            if (!(this.body.is(':visible') && this.body.is('[contenteditable]'))) {\n                this.el.find('textarea:visible').focus();\n                return;\n            }\n            if (this.inputManager.lastCaretPosition) {\n                this.undoManager.caretPosition(this.inputManager.lastCaretPosition);\n                return this.inputManager.lastCaretPosition = null;\n            } else {\n                $blockEl = this.body.children().last();\n                if (!$blockEl.is('p')) {\n                    $blockEl = $('<p/>').append(this.util.phBr).appendTo(this.body);\n                }\n                range = document.createRange();\n                return this.selection.setRangeAtEndOf($blockEl, range);\n            }\n        };\n        Simditor.prototype.blur = function () {\n            if (this.body.is(':visible') && this.body.is('[contenteditable]')) {\n                return this.body.blur();\n            } else {\n                return this.body.find('textarea:visible').blur();\n            }\n        };\n        Simditor.prototype.hidePopover = function () {\n            return this.el.find('.simditor-popover').each(function (i, popover) {\n                popover = $(popover).data('popover');\n                if (popover.active) {\n                    return popover.hide();\n                }\n            });\n        };\n        Simditor.prototype.destroy = function () {\n            this.triggerHandler('destroy');\n            this.textarea.closest('form').off('.simditor .simditor-' + this.id);\n            this.selection.clear();\n            this.inputManager.focused = false;\n            this.textarea.insertBefore(this.el).hide().val('').removeData('simditor');\n            this.el.remove();\n            $(document).off('.simditor-' + this.id);\n            $(window).off('.simditor-' + this.id);\n            return this.off();\n        };\n        Simditor.Toolbar = Toolbar;\n        Simditor.i18n = i18n;\n        return Simditor;\n    });\n    function __isEmptyObject(obj) {\n        var attr;\n        for (attr in obj)\n            return !1;\n        return !0;\n    }\n    function __isValidToReturn(obj) {\n        return typeof obj != 'object' || Array.isArray(obj) || !__isEmptyObject(obj);\n    }\n    if (__isValidToReturn(module.exports))\n        return module.exports;\n    else if (__isValidToReturn(exports))\n        return exports;\n});\ndefine(\"skylark-simditor/Simditor\", function(){});\n\ndefine('skylark-simditor/_extend',[],function(){\r\n    var hasProp = {}.hasOwnProperty;\r\n\r\n    return function extend(child, parent) { \r\n      for (var key in parent) { \r\n        if (hasProp.call(parent, key)) child[key] = parent[key]; \r\n      } \r\n      function ctor() { \r\n        this.constructor = child; \r\n      } ctor.prototype = parent.prototype; \r\n      child.prototype = new ctor(); \r\n      child.__super__ = parent.prototype; \r\n      return child; \r\n  　};\r\n});\r\n\ndefine('skylark-simditor/Module',[\n  \"skylark-langx/langx\",\n  \"skylark-jquery\"\n], function (langx,$) {\n\n  var  slice = [].slice;\n\n  var Module = langx.Evented.inherit({\n    init : function (opts) {\n      var base, cls, i, instance, instances, len, name;\n      this.opts = $.extend({}, this.opts, opts);\n      (base = this.constructor)._connectedClasses || (base._connectedClasses = []);\n      instances = (function() {\n        var i, len, ref, results;\n        ref = this.constructor._connectedClasses;\n        results = [];\n        for (i = 0, len = ref.length; i < len; i++) {\n          cls = ref[i];\n          name = cls.pluginName.charAt(0).toLowerCase() + cls.pluginName.slice(1);\n          if (cls.prototype._connected) {\n            cls.prototype._module = this;\n          }\n          results.push(this[name] = new cls());\n        }\n        return results;\n      }).call(this);\n      if (this._connected) {\n        this.opts = $.extend({}, this.opts, this._module.opts);\n      } else {\n        this._init();\n        for (i = 0, len = instances.length; i < len; i++) {\n          instance = instances[i];\n          if (typeof instance._init === \"function\") {\n            instance._init();\n          }\n        }\n      }\n      this.trigger('initialized');\n    }\n\n  });\n\n\n  Module.extend = function(obj) {\n    var key, ref, val;\n    if (!((obj != null) && typeof obj === 'object')) {\n      return;\n    }\n    for (key in obj) {\n      val = obj[key];\n      if (key !== 'included' && key !== 'extended') {\n        this[key] = val;\n      }\n    }\n    return (ref = obj.extended) != null ? ref.call(this) : void 0;\n  };\n\n  Module.include = function(obj) {\n    var key, ref, val;\n    if (!((obj != null) && typeof obj === 'object')) {\n      return;\n    }\n    for (key in obj) {\n      val = obj[key];\n      if (key !== 'included' && key !== 'extended') {\n        this.prototype[key] = val;\n      }\n    }\n    return (ref = obj.included) != null ? ref.call(this) : void 0;\n  };\n\n  Module.connect = function(cls) {\n    if (typeof cls !== 'function') {\n      return;\n    }\n    if (!cls.pluginName) {\n      throw new Error('Module.connect: cannot connect plugin without pluginName');\n      return;\n    }\n    cls.prototype._connected = true;\n    if (!this._connectedClasses) {\n      this._connectedClasses = [];\n    }\n    this._connectedClasses.push(cls);\n    if (cls.pluginName) {\n      return this[cls.pluginName] = cls;\n    }\n  };\n\n  Module.prototype.opts = {};\n\n\n  Module.prototype._init = function() {};\n\n/*\n  Module.prototype.on = function() {\n    var args, ref;\n    args = 1 <= arguments.length ? Array.prototype.slice.call(arguments, 0) : [];\n    (ref = $(this)).on.apply(ref, args);\n    return this;\n  };\n\n  Module.prototype.one = function() {\n    var args, ref;\n    args = 1 <= arguments.length ? Array.prototype.slice.call(arguments, 0) : [];\n    (ref = $(this)).one.apply(ref, args);\n    return this;\n  };\n\n  Module.prototype.off = function() {\n    var args, ref;\n    args = 1 <= arguments.length ? Array.prototype.slice.call(arguments, 0) : [];\n    (ref = $(this)).off.apply(ref, args);\n    return this;\n  };\n\n  Module.prototype.trigger = function() {\n    var args, ref;\n    args = 1 <= arguments.length ? Array.prototype.slice.call(arguments, 0) : [];\n    (ref = $(this)).trigger.apply(ref, args);\n    return this;\n  };\n\n  Module.prototype.triggerHandler = function() {\n    var args, ref;\n    args = 1 <= arguments.length ? Array.prototype.slice.call(arguments, 0) : [];\n    return (ref = $(this)).triggerHandler.apply(ref, args);\n  };\n*/\n\n  Module.prototype.triggerHandler =  Module.prototype.trigger = function(type,data) {\n    var args, ref;\n    args = [type];\n    if (data) {\n      args = args.concat(data);\n    }\n    langx.Evented.prototype.trigger.apply(this, args);\n    return this;\n  };\n\n  Module.prototype._t = function() {\n    var args, ref;\n    args = 1 <= arguments.length ? Array.prototype.slice.call(arguments, 0) : [];\n    return (ref = this.constructor)._t.apply(ref, args);\n  };\n\n  Module._t = function() {\n    var args, key, ref, result;\n    key = arguments[0], args = 2 <= arguments.length ? Array.prototype.slice.call(arguments, 1) : [];\n    result = ((ref = this.i18n[this.locale]) != null ? ref[key] : void 0) || '';\n    if (!(args.length > 0)) {\n      return result;\n    }\n    result = result.replace(/([^%]|^)%(?:(\\d+)\\$)?s/g, function(p0, p, position) {\n      if (position) {\n        return p + args[parseInt(position) - 1];\n      } else {\n        return p + args.shift();\n      }\n    });\n    return result.replace(/%%s/g, '%s');\n  };\n\n  Module.i18n = {\n    'zh-CN': {}\n  };\n\n  Module.locale = 'zh-CN';\n\n  return Module;\n\n\n});\n\ndefine('skylark-simditor/Button',[\r\n  \"skylark-jquery\",\r\n  \"./_extend\",\r\n  \"./Module\",\r\n  \"./Simditor\"\r\n],function($,extend,Module,Simditor){ \r\n  var slice = [].slice;\r\n\r\n  var Button = Module.inherit( {\r\n    init : function(opts) {\r\n      this.toolbar = opts.toolbar;\r\n      this.editor = opts.toolbar.editor;\r\n      this.title = this._t(this.name);\r\n      Module.prototype.init.call(this, opts);\r\n    }\r\n  }); \r\n\r\n  Button.prototype._tpl = {\r\n    item: '<li><a tabindex=\"-1\" unselectable=\"on\" class=\"toolbar-item\" href=\"javascript:;\"><span></span></a></li>',\r\n    menuWrapper: '<div class=\"toolbar-menu\"></div>',\r\n    menuItem: '<li><a tabindex=\"-1\" unselectable=\"on\" class=\"menu-item\" href=\"javascript:;\"><span></span></a></li>',\r\n    separator: '<li><span class=\"separator\"></span></li>'\r\n  };\r\n\r\n  Button.prototype.name = '';\r\n\r\n  Button.prototype.icon = '';\r\n\r\n  Button.prototype.title = '';\r\n\r\n  Button.prototype.text = '';\r\n\r\n  Button.prototype.htmlTag = '';\r\n\r\n  Button.prototype.disableTag = '';\r\n\r\n  Button.prototype.menu = false;\r\n\r\n  Button.prototype.active = false;\r\n\r\n  Button.prototype.disabled = false;\r\n\r\n  Button.prototype.needFocus = true;\r\n\r\n  Button.prototype.shortcut = null;\r\n\r\n\r\n  Button.prototype._init = function() {\r\n    var k, len, ref, tag;\r\n    this.render();\r\n    this.el.on('mousedown', (function(_this) {\r\n      return function(e) {\r\n        var exceed, noFocus, param;\r\n        e.preventDefault();\r\n        noFocus = _this.needFocus && !_this.editor.inputManager.focused;\r\n        if (_this.el.hasClass('disabled')) {\r\n          return false;\r\n        }\r\n        if (noFocus) {\r\n          _this.editor.focus();\r\n        }\r\n        if (_this.menu) {\r\n          _this.wrapper.toggleClass('menu-on').siblings('li').removeClass('menu-on');\r\n          if (_this.wrapper.is('.menu-on')) {\r\n            exceed = _this.menuWrapper.offset().left + _this.menuWrapper.outerWidth() + 5 - _this.editor.wrapper.offset().left - _this.editor.wrapper.outerWidth();\r\n            if (exceed > 0) {\r\n              _this.menuWrapper.css({\r\n                'left': 'auto',\r\n                'right': 0\r\n              });\r\n            }\r\n            _this.trigger('menuexpand');\r\n          }\r\n          return false;\r\n        }\r\n        param = _this.el.data('param');\r\n        _this.command(param);\r\n        return false;\r\n      };\r\n    })(this));\r\n    this.wrapper.on('click', 'a.menu-item', (function(_this) {\r\n      return function(e) {\r\n        var btn, noFocus, param;\r\n        e.preventDefault();\r\n        btn = $(e.currentTarget);\r\n        _this.wrapper.removeClass('menu-on');\r\n        noFocus = _this.needFocus && !_this.editor.inputManager.focused;\r\n        if (btn.hasClass('disabled') || noFocus) {\r\n          return false;\r\n        }\r\n        _this.toolbar.wrapper.removeClass('menu-on');\r\n        param = btn.data('param');\r\n        _this.command(param);\r\n        return false;\r\n      };\r\n    })(this));\r\n    this.wrapper.on('mousedown', 'a.menu-item', function(e) {\r\n      return false;\r\n    });\r\n    this.editor.on('blur', (function(_this) {\r\n      return function() {\r\n        var editorActive;\r\n        editorActive = _this.editor.body.is(':visible') && _this.editor.body.is('[contenteditable]');\r\n        if (!(editorActive && !_this.editor.clipboard.pasting)) {\r\n          return;\r\n        }\r\n        _this.setActive(false);\r\n        return _this.setDisabled(false);\r\n      };\r\n    })(this));\r\n    if (this.shortcut != null) {\r\n      this.editor.hotkeys.add(this.shortcut, (function(_this) {\r\n        return function(e) {\r\n          _this.el.mousedown();\r\n          return false;\r\n        };\r\n      })(this));\r\n    }\r\n    ref = this.htmlTag.split(',');\r\n    for (k = 0, len = ref.length; k < len; k++) {\r\n      tag = ref[k];\r\n      tag = $.trim(tag);\r\n      if (tag && $.inArray(tag, this.editor.formatter._allowedTags) < 0) {\r\n        this.editor.formatter._allowedTags.push(tag);\r\n      }\r\n    }\r\n    return this.editor.on('selectionchanged', (function(_this) {\r\n      return function(e) {\r\n        if (_this.editor.inputManager.focused) {\r\n          return _this._status();\r\n        }\r\n      };\r\n    })(this));\r\n  };\r\n\r\n  Button.prototype.iconClassOf = function(icon) {\r\n    if (icon) {\r\n      return \"simditor-icon simditor-icon-\" + icon;\r\n    } else {\r\n      return '';\r\n    }\r\n  };\r\n\r\n  Button.prototype.setIcon = function(icon) {\r\n    return this.el.find('span').removeClass().addClass(this.iconClassOf(icon)).text(this.text);\r\n  };\r\n\r\n  Button.prototype.render = function() {\r\n    this.wrapper = $(this._tpl.item).appendTo(this.toolbar.list);\r\n    this.el = this.wrapper.find('a.toolbar-item');\r\n    this.el.attr('title', this.title).addClass(\"toolbar-item-\" + this.name).data('button', this);\r\n    this.setIcon(this.icon);\r\n    if (!this.menu) {\r\n      return;\r\n    }\r\n    this.menuWrapper = $(this._tpl.menuWrapper).appendTo(this.wrapper);\r\n    this.menuWrapper.addClass(\"toolbar-menu-\" + this.name);\r\n    return this.renderMenu();\r\n  };\r\n\r\n  Button.prototype.renderMenu = function() {\r\n    var $menuBtnEl, $menuItemEl, k, len, menuItem, ref, ref1, results;\r\n    if (!$.isArray(this.menu)) {\r\n      return;\r\n    }\r\n    this.menuEl = $('<ul/>').appendTo(this.menuWrapper);\r\n    ref = this.menu;\r\n    results = [];\r\n    for (k = 0, len = ref.length; k < len; k++) {\r\n      menuItem = ref[k];\r\n      if (menuItem === '|') {\r\n        $(this._tpl.separator).appendTo(this.menuEl);\r\n        continue;\r\n      }\r\n      $menuItemEl = $(this._tpl.menuItem).appendTo(this.menuEl);\r\n      $menuBtnEl = $menuItemEl.find('a.menu-item').attr({\r\n        'title': (ref1 = menuItem.title) != null ? ref1 : menuItem.text,\r\n        'data-param': menuItem.param\r\n      }).addClass('menu-item-' + menuItem.name);\r\n      if (menuItem.icon) {\r\n        results.push($menuBtnEl.find('span').addClass(this.iconClassOf(menuItem.icon)));\r\n      } else {\r\n        results.push($menuBtnEl.find('span').text(menuItem.text));\r\n      }\r\n    }\r\n    return results;\r\n  };\r\n\r\n  Button.prototype.setActive = function(active) {\r\n    if (active === this.active) {\r\n      return;\r\n    }\r\n    this.active = active;\r\n    return this.el.toggleClass('active', this.active);\r\n  };\r\n\r\n  Button.prototype.setDisabled = function(disabled) {\r\n    if (disabled === this.disabled) {\r\n      return;\r\n    }\r\n    this.disabled = disabled;\r\n    return this.el.toggleClass('disabled', this.disabled);\r\n  };\r\n\r\n  Button.prototype._disableStatus = function() {\r\n    var disabled, endNodes, startNodes;\r\n    startNodes = this.editor.selection.startNodes();\r\n    endNodes = this.editor.selection.endNodes();\r\n    disabled = startNodes.filter(this.disableTag).length > 0 || endNodes.filter(this.disableTag).length > 0;\r\n    this.setDisabled(disabled);\r\n    if (this.disabled) {\r\n      this.setActive(false);\r\n    }\r\n    return this.disabled;\r\n  };\r\n\r\n  Button.prototype._activeStatus = function() {\r\n    var active, endNode, endNodes, startNode, startNodes;\r\n    startNodes = this.editor.selection.startNodes();\r\n    endNodes = this.editor.selection.endNodes();\r\n    startNode = startNodes.filter(this.htmlTag);\r\n    endNode = endNodes.filter(this.htmlTag);\r\n    active = startNode.length > 0 && endNode.length > 0 && startNode.is(endNode);\r\n    this.node = active ? startNode : null;\r\n    this.setActive(active);\r\n    return this.active;\r\n  };\r\n\r\n  Button.prototype._status = function() {\r\n    this._disableStatus();\r\n    if (this.disabled) {\r\n      return;\r\n    }\r\n    return this._activeStatus();\r\n  };\r\n\r\n  Button.prototype.command = function(param) {};\r\n\r\n  Button.prototype._t = function() {\r\n    var args, ref, result;\r\n    args = 1 <= arguments.length ? Array.prototype.slice.call(arguments, 0) : [];\r\n    result = Module.prototype._t.apply(this, args);\r\n    if (!result) {\r\n      result = (ref = this.editor)._t.apply(ref, args);\r\n    }\r\n    return result;\r\n  };\r\n\r\n\r\n  Simditor.Button = Button;\r\n\r\n  return Button;\r\n});\ndefine('skylark-simditor/Popover',[\r\n  \"skylark-jquery\",\r\n  \"./_extend\",\r\n  \"./Module\",\r\n  \"./Simditor\"\r\n],function($,extend,Module,Simditor){ \r\n\r\n  var Popover = Module.inherit({\r\n     init : function(opts) {\r\n      this.button = opts.button;\r\n      this.editor = opts.button.editor;\r\n      Module.prototype.init.call(this, opts);\r\n    }\r\n  });\r\n\r\n\r\n  Popover.prototype.offset = {\r\n    top: 4,\r\n    left: 0\r\n  };\r\n\r\n  Popover.prototype.target = null;\r\n\r\n  Popover.prototype.active = false;\r\n\r\n  Popover.prototype._init = function() {\r\n    this.el = $('<div class=\"simditor-popover\"></div>').appendTo(this.editor.el).data('popover', this);\r\n    this.render();\r\n    this.el.on('mouseenter', (function(_this) {\r\n      return function(e) {\r\n        return _this.el.addClass('hover');\r\n      };\r\n    })(this));\r\n    return this.el.on('mouseleave', (function(_this) {\r\n      return function(e) {\r\n        return _this.el.removeClass('hover');\r\n      };\r\n    })(this));\r\n  };\r\n\r\n  Popover.prototype.render = function() {};\r\n\r\n  Popover.prototype._initLabelWidth = function() {\r\n    var $fields;\r\n    $fields = this.el.find('.settings-field');\r\n    if (!($fields.length > 0)) {\r\n      return;\r\n    }\r\n    this._labelWidth = 0;\r\n    $fields.each((function(_this) {\r\n      return function(i, field) {\r\n        var $field, $label;\r\n        $field = $(field);\r\n        $label = $field.find('label');\r\n        if (!($label.length > 0)) {\r\n          return;\r\n        }\r\n        return _this._labelWidth = Math.max(_this._labelWidth, $label.width());\r\n      };\r\n    })(this));\r\n    return $fields.find('label').width(this._labelWidth);\r\n  };\r\n\r\n  Popover.prototype.show = function($target, position) {\r\n    if (position == null) {\r\n      position = 'bottom';\r\n    }\r\n    if ($target == null) {\r\n      return;\r\n    }\r\n    this.el.siblings('.simditor-popover').each(function(i, popover) {\r\n      popover = $(popover).data('popover');\r\n      if (popover.active) {\r\n        return popover.hide();\r\n      }\r\n    });\r\n    if (this.active && this.target) {\r\n      this.target.removeClass('selected');\r\n    }\r\n    this.target = $target.addClass('selected');\r\n    if (this.active) {\r\n      this.refresh(position);\r\n      return this.trigger('popovershow');\r\n    } else {\r\n      this.active = true;\r\n      this.el.css({\r\n        left: -9999\r\n      }).show();\r\n      if (!this._labelWidth) {\r\n        this._initLabelWidth();\r\n      }\r\n      this.editor.util.reflow();\r\n      this.refresh(position);\r\n      return this.trigger('popovershow');\r\n    }\r\n  };\r\n\r\n  Popover.prototype.hide = function() {\r\n    if (!this.active) {\r\n      return;\r\n    }\r\n    if (this.target) {\r\n      this.target.removeClass('selected');\r\n    }\r\n    this.target = null;\r\n    this.active = false;\r\n    this.el.hide();\r\n    return this.trigger('popoverhide');\r\n  };\r\n\r\n  Popover.prototype.refresh = function(position) {\r\n    var editorOffset, left, maxLeft, targetH, targetOffset, top;\r\n    if (position == null) {\r\n      position = 'bottom';\r\n    }\r\n    if (!this.active) {\r\n      return;\r\n    }\r\n    editorOffset = this.editor.el.offset();\r\n    targetOffset = this.target.offset();\r\n    targetH = this.target.outerHeight();\r\n    if (position === 'bottom') {\r\n      top = targetOffset.top - editorOffset.top + targetH;\r\n    } else if (position === 'top') {\r\n      top = targetOffset.top - editorOffset.top - this.el.height();\r\n    }\r\n    maxLeft = this.editor.wrapper.width() - this.el.outerWidth() - 10;\r\n    left = Math.min(targetOffset.left - editorOffset.left, maxLeft);\r\n    return this.el.css({\r\n      top: top + this.offset.top,\r\n      left: left + this.offset.left\r\n    });\r\n  };\r\n\r\n  Popover.prototype.destroy = function() {\r\n    this.target = null;\r\n    this.active = false;\r\n    this.editor.off('.linkpopover');\r\n    return this.el.remove();\r\n  };\r\n\r\n  Popover.prototype._t = function() {\r\n    var args, ref, result;\r\n    args = 1 <= arguments.length ? Array.prototype.slice.call(arguments, 0) : [];\r\n    result = Module.prototype._t.apply(this, args);\r\n    if (!result) {\r\n      result = (ref = this.button)._t.apply(ref, args);\r\n    }\r\n    return result;\r\n  };\r\n\r\n  Simditor.Popover = Popover;\r\n\r\n  return Popover;\r\n\r\n\t\r\n});\ndefine('skylark-simditor/Toolbar',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-jquery\"\r\n],function(langx,$){ \r\n\r\n  var Toolbar = langx.Evented.inherit({\r\n    init : function(editor) {\r\n      var floatInitialized, initToolbarFloat, toolbarHeight;\r\n      this.editor = editor;\r\n\r\n      if (!this.opts.toolbar) {\r\n        return;\r\n      }\r\n      if (!$.isArray(this.opts.toolbar)) {\r\n        this.opts.toolbar = ['bold', 'italic', 'underline', 'strikethrough', '|', 'ol', 'ul', 'blockquote', 'code', '|', 'link', 'image', '|', 'indent', 'outdent'];\r\n      }\r\n      this._render();\r\n      this.list.on('click', function(e) {\r\n        return false;\r\n      });\r\n      this.wrapper.on('mousedown', (function(_this) {\r\n        return function(e) {\r\n          return _this.list.find('.menu-on').removeClass('.menu-on');\r\n        };\r\n      })(this));\r\n      $(document).on('mousedown.simditor' + this.editor.id, (function(_this) {\r\n        return function(e) {\r\n          return _this.list.find('.menu-on').removeClass('.menu-on');\r\n        };\r\n      })(this));\r\n      if (!this.opts.toolbarHidden && this.opts.toolbarFloat) {\r\n        this.wrapper.css('top', this.opts.toolbarFloatOffset);\r\n        toolbarHeight = 0;\r\n        initToolbarFloat = (function(_this) {\r\n          return function() {\r\n            _this.wrapper.css('position', 'static');\r\n            _this.wrapper.width('auto');\r\n            _this.editor.util.reflow(_this.wrapper);\r\n            _this.wrapper.width(_this.wrapper.outerWidth());\r\n            _this.wrapper.css('left', _this.editor.util.os.mobile ? _this.wrapper.position().left : _this.wrapper.offset().left);\r\n            _this.wrapper.css('position', '');\r\n            toolbarHeight = _this.wrapper.outerHeight();\r\n            _this.editor.placeholderEl.css('top', toolbarHeight);\r\n            return true;\r\n          };\r\n        })(this);\r\n        floatInitialized = null;\r\n        $(window).on('resize.simditor-' + this.editor.id, function(e) {\r\n          return floatInitialized = initToolbarFloat();\r\n        });\r\n        $(window).on('scroll.simditor-' + this.editor.id, (function(_this) {\r\n          return function(e) {\r\n            var bottomEdge, scrollTop, topEdge;\r\n            if (!_this.wrapper.is(':visible')) {\r\n              return;\r\n            }\r\n            topEdge = _this.editor.wrapper.offset().top;\r\n            bottomEdge = topEdge + _this.editor.wrapper.outerHeight() - 80;\r\n            scrollTop = $(document).scrollTop() + _this.opts.toolbarFloatOffset;\r\n            if (scrollTop <= topEdge || scrollTop >= bottomEdge) {\r\n              _this.editor.wrapper.removeClass('toolbar-floating').css('padding-top', '');\r\n              if (_this.editor.util.os.mobile) {\r\n                return _this.wrapper.css('top', _this.opts.toolbarFloatOffset);\r\n              }\r\n            } else {\r\n              floatInitialized || (floatInitialized = initToolbarFloat());\r\n              _this.editor.wrapper.addClass('toolbar-floating').css('padding-top', toolbarHeight);\r\n              if (_this.editor.util.os.mobile) {\r\n                return _this.wrapper.css('top', scrollTop - topEdge + _this.opts.toolbarFloatOffset);\r\n              }\r\n            }\r\n          };\r\n        })(this));\r\n      }\r\n      this.editor.on('destroy', (function(_this) {\r\n        return function() {\r\n          return _this.buttons.length = 0;\r\n        };\r\n      })(this));\r\n      $(document).on(\"mousedown.simditor-\" + this.editor.id, (function(_this) {\r\n        return function(e) {\r\n          return _this.list.find('li.menu-on').removeClass('menu-on');\r\n        };\r\n      })(this));\r\n    }\r\n\r\n  });\r\n\r\n  Toolbar.pluginName = 'Toolbar';\r\n\r\n  Toolbar.prototype.opts = {\r\n    toolbar: true,\r\n    toolbarFloat: true,\r\n    toolbarHidden: false,\r\n    toolbarFloatOffset: 0\r\n  };\r\n\r\n  Toolbar.prototype._tpl = {\r\n    wrapper: '<div class=\"simditor-toolbar\"><ul></ul></div>',\r\n    separator: '<li><span class=\"separator\"></span></li>'\r\n  };\r\n\r\n\r\n  Toolbar.prototype._render = function() {\r\n    var k, len, name, ref;\r\n    this.buttons = [];\r\n    this.wrapper = $(this._tpl.wrapper).prependTo(this.editor.wrapper);\r\n    this.list = this.wrapper.find('ul');\r\n    ref = this.opts.toolbar;\r\n    for (k = 0, len = ref.length; k < len; k++) {\r\n      name = ref[k];\r\n      if (name === '|') {\r\n        $(this._tpl.separator).appendTo(this.list);\r\n        continue;\r\n      }\r\n      if (!this.constructor.buttons[name]) {\r\n        throw new Error(\"simditor: invalid toolbar button \" + name);\r\n        continue;\r\n      }\r\n      this.buttons.push(new this.constructor.buttons[name]({\r\n        toolbar : this,\r\n        editor: this.editor\r\n      }));\r\n    }\r\n    if (this.opts.toolbarHidden) {\r\n      return this.wrapper.hide();\r\n    }\r\n  };\r\n\r\n  Toolbar.prototype.findButton = function(name) {\r\n    var button;\r\n    button = this.list.find('.toolbar-item-' + name).data('button');\r\n    return button != null ? button : null;\r\n  };\r\n\r\n  Toolbar.addButton = function(btn) {\r\n    return this.buttons[btn.prototype.name] = btn;\r\n  };\r\n\r\n  Toolbar.buttons = {};\r\n\r\n  return Toolbar;\r\n\r\n});\ndefine('skylark-simditor/buttons/AlignmentButton',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Button\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,Button){ \r\n   var AlignmentButton = Button.inherit({\r\n\r\n    });\r\n\r\n\r\n  AlignmentButton.prototype.name = \"alignment\";\r\n\r\n  AlignmentButton.prototype.icon = 'align-left';\r\n\r\n  AlignmentButton.prototype.htmlTag = 'p, h1, h2, h3, h4, td, th';\r\n\r\n  AlignmentButton.prototype._init = function() {\r\n    this.menu = [\r\n      {\r\n        name: 'left',\r\n        text: this._t('alignLeft'),\r\n        icon: 'align-left',\r\n        param: 'left'\r\n      }, {\r\n        name: 'center',\r\n        text: this._t('alignCenter'),\r\n        icon: 'align-center',\r\n        param: 'center'\r\n      }, {\r\n        name: 'right',\r\n        text: this._t('alignRight'),\r\n        icon: 'align-right',\r\n        param: 'right'\r\n      }\r\n    ];\r\n    return Button.prototype._init.call(this);\r\n  };\r\n\r\n  AlignmentButton.prototype.setActive = function(active, align) {\r\n    if (align == null) {\r\n      align = 'left';\r\n    }\r\n    if (align !== 'left' && align !== 'center' && align !== 'right') {\r\n      align = 'left';\r\n    }\r\n    if (align === 'left') {\r\n      Button.prototype.setActive.call(this, false);\r\n    } else {\r\n      Button.prototype.setActive.call(this, active);\r\n    }\r\n    this.el.removeClass('align-left align-center align-right');\r\n    if (active) {\r\n      this.el.addClass('align-' + align);\r\n    }\r\n    this.setIcon('align-' + align);\r\n    return this.menuEl.find('.menu-item').show().end().find('.menu-item-' + align).hide();\r\n  };\r\n\r\n  AlignmentButton.prototype._status = function() {\r\n    this.nodes = this.editor.selection.nodes().filter(this.htmlTag);\r\n    if (this.nodes.length < 1) {\r\n      this.setDisabled(true);\r\n      return this.setActive(false);\r\n    } else {\r\n      this.setDisabled(false);\r\n      return this.setActive(true, this.nodes.first().css('text-align'));\r\n    }\r\n  };\r\n\r\n  AlignmentButton.prototype.command = function(align) {\r\n    if (align !== 'left' && align !== 'center' && align !== 'right') {\r\n      throw new Error(\"simditor alignment button: invalid align \" + align);\r\n    }\r\n    this.nodes.css({\r\n      'text-align': align === 'left' ? '' : align\r\n    });\r\n    this.editor.trigger('valuechanged');\r\n    return this.editor.inputManager.throttledSelectionChanged();\r\n  };\r\n\r\n  Simditor.Toolbar.addButton(AlignmentButton);\r\n\r\n  return AlignmentButton;\r\n\r\n});\ndefine('skylark-simditor/buttons/BlockquoteButton',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Button\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,Button){ \r\n   var BlockquoteButton = Button.inherit({\r\n\r\n   });\r\n\r\n\r\n\r\n  BlockquoteButton.prototype.name = 'blockquote';\r\n\r\n  BlockquoteButton.prototype.icon = 'quote-left';\r\n\r\n  BlockquoteButton.prototype.htmlTag = 'blockquote';\r\n\r\n  BlockquoteButton.prototype.disableTag = 'pre, table';\r\n\r\n  BlockquoteButton.prototype.command = function() {\r\n    var $rootNodes, clearCache, nodeCache;\r\n    $rootNodes = this.editor.selection.rootNodes();\r\n    $rootNodes = $rootNodes.filter(function(i, node) {\r\n      return !$(node).parent().is('blockquote');\r\n    });\r\n    this.editor.selection.save();\r\n    nodeCache = [];\r\n    clearCache = (function(_this) {\r\n      return function() {\r\n        if (nodeCache.length > 0) {\r\n          $(\"<\" + _this.htmlTag + \"/>\").insertBefore(nodeCache[0]).append(nodeCache);\r\n          return nodeCache.length = 0;\r\n        }\r\n      };\r\n    })(this);\r\n    $rootNodes.each((function(_this) {\r\n      return function(i, node) {\r\n        var $node;\r\n        $node = $(node);\r\n        if (!$node.parent().is(_this.editor.body)) {\r\n          return;\r\n        }\r\n        if ($node.is(_this.htmlTag)) {\r\n          clearCache();\r\n          return $node.children().unwrap();\r\n        } else if ($node.is(_this.disableTag) || _this.editor.util.isDecoratedNode($node)) {\r\n          return clearCache();\r\n        } else {\r\n          return nodeCache.push(node);\r\n        }\r\n      };\r\n    })(this));\r\n    clearCache();\r\n    this.editor.selection.restore();\r\n    return this.editor.trigger('valuechanged');\r\n  };\r\n\r\n  Simditor.Toolbar.addButton(BlockquoteButton); \r\n\r\n  return BlockquoteButton;\r\n\r\n});\ndefine('skylark-simditor/buttons/BoldButton',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Button\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,Button){ \r\n    var BoldButton = Button.inherit({\r\n\r\n    });\r\n\r\n    BoldButton.prototype.name = 'bold';\r\n\r\n    BoldButton.prototype.icon = 'bold';\r\n\r\n    BoldButton.prototype.htmlTag = 'b, strong';\r\n\r\n    BoldButton.prototype.disableTag = 'pre';\r\n\r\n    BoldButton.prototype.shortcut = 'cmd+b';\r\n\r\n    BoldButton.prototype._init = function() {\r\n      if (this.editor.util.os.mac) {\r\n        this.title = this.title + ' ( Cmd + b )';\r\n      } else {\r\n        this.title = this.title + ' ( Ctrl + b )';\r\n        this.shortcut = 'ctrl+b';\r\n      }\r\n      return Button.prototype._init.call(this);\r\n    };\r\n\r\n    BoldButton.prototype._activeStatus = function() {\r\n      var active;\r\n      active = document.queryCommandState('bold') === true;\r\n      this.setActive(active);\r\n      return this.active;\r\n    };\r\n\r\n    BoldButton.prototype.command = function() {\r\n      document.execCommand('bold');\r\n      if (!this.editor.util.support.oninput) {\r\n        this.editor.trigger('valuechanged');\r\n      }\r\n      return $(document).trigger('selectionchange');\r\n    };\r\n\r\n\r\n    Simditor.Toolbar.addButton(BoldButton);\r\n\r\n    return BoldButton;\r\n\r\n});\ndefine('skylark-simditor/buttons/CodePopover',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Popover\"\r\n],function($,extend,Module,Popover){ \r\n\r\n   var CodePopover = Popover.inherit({\r\n\r\n   });\r\n\r\n  CodePopover.prototype.render = function() {\r\n    var $option, k, lang, len, ref;\r\n    this._tpl = \"<div class=\\\"code-settings\\\">\\n  <div class=\\\"settings-field\\\">\\n    <select class=\\\"select-lang\\\">\\n      <option value=\\\"-1\\\">\" + (this._t('selectLanguage')) + \"</option>\\n    </select>\\n  </div>\\n</div>\";\r\n    this.langs = this.editor.opts.codeLanguages || [\r\n      {\r\n        name: 'Bash',\r\n        value: 'bash'\r\n      }, {\r\n        name: 'C++',\r\n        value: 'c++'\r\n      }, {\r\n        name: 'C#',\r\n        value: 'cs'\r\n      }, {\r\n        name: 'CSS',\r\n        value: 'css'\r\n      }, {\r\n        name: 'Erlang',\r\n        value: 'erlang'\r\n      }, {\r\n        name: 'Less',\r\n        value: 'less'\r\n      }, {\r\n        name: 'Sass',\r\n        value: 'sass'\r\n      }, {\r\n        name: 'Diff',\r\n        value: 'diff'\r\n      }, {\r\n        name: 'CoffeeScript',\r\n        value: 'coffeescript'\r\n      }, {\r\n        name: 'HTML,XML',\r\n        value: 'html'\r\n      }, {\r\n        name: 'JSON',\r\n        value: 'json'\r\n      }, {\r\n        name: 'Java',\r\n        value: 'java'\r\n      }, {\r\n        name: 'JavaScript',\r\n        value: 'js'\r\n      }, {\r\n        name: 'Markdown',\r\n        value: 'markdown'\r\n      }, {\r\n        name: 'Objective C',\r\n        value: 'oc'\r\n      }, {\r\n        name: 'PHP',\r\n        value: 'php'\r\n      }, {\r\n        name: 'Perl',\r\n        value: 'parl'\r\n      }, {\r\n        name: 'Python',\r\n        value: 'python'\r\n      }, {\r\n        name: 'Ruby',\r\n        value: 'ruby'\r\n      }, {\r\n        name: 'SQL',\r\n        value: 'sql'\r\n      }\r\n    ];\r\n    this.el.addClass('code-popover').append(this._tpl);\r\n    this.selectEl = this.el.find('.select-lang');\r\n    ref = this.langs;\r\n    for (k = 0, len = ref.length; k < len; k++) {\r\n      lang = ref[k];\r\n      $option = $('<option/>', {\r\n        text: lang.name,\r\n        value: lang.value\r\n      }).appendTo(this.selectEl);\r\n    }\r\n    this.selectEl.on('change', (function(_this) {\r\n      return function(e) {\r\n        var selected;\r\n        _this.lang = _this.selectEl.val();\r\n        selected = _this.target.hasClass('selected');\r\n        _this.target.removeClass().removeAttr('data-lang');\r\n        if (_this.lang !== -1) {\r\n          _this.target.attr('data-lang', _this.lang);\r\n        }\r\n        if (selected) {\r\n          _this.target.addClass('selected');\r\n        }\r\n        return _this.editor.trigger('valuechanged');\r\n      };\r\n    })(this));\r\n    return this.editor.on('valuechanged', (function(_this) {\r\n      return function(e) {\r\n        if (_this.active) {\r\n          return _this.refresh();\r\n        }\r\n      };\r\n    })(this));\r\n  };\r\n\r\n  CodePopover.prototype.show = function() {\r\n    var args;\r\n    args = 1 <= arguments.length ? Array.prototype.slice.call(arguments, 0) : [];\r\n    Popover.prototype.show.apply(this, args);\r\n    this.lang = this.target.attr('data-lang');\r\n    if (this.lang != null) {\r\n      return this.selectEl.val(this.lang);\r\n    } else {\r\n      return this.selectEl.val(-1);\r\n    }\r\n  };\r\n\r\n  return CodePopover;\r\n\r\n});\ndefine('skylark-simditor/buttons/CodeButton',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Button\",\r\n  \"./CodePopover\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,Button,CodePopover){ \r\n\r\n   var CodeButton = Button.inherit({\r\n\r\n   });\r\n\r\n\r\n\r\n  CodeButton.prototype.name = 'code';\r\n\r\n  CodeButton.prototype.icon = 'code';\r\n\r\n  CodeButton.prototype.htmlTag = 'pre';\r\n\r\n  CodeButton.prototype.disableTag = 'ul, ol, table';\r\n\r\n  CodeButton.prototype._init = function() {\r\n    Button.prototype._init.call(this);\r\n    this.editor.on('decorate', (function(_this) {\r\n      return function(e, $el) {\r\n        return $el.find('pre').each(function(i, pre) {\r\n          return _this.decorate($(pre));\r\n        });\r\n      };\r\n    })(this));\r\n    return this.editor.on('undecorate', (function(_this) {\r\n      return function(e, $el) {\r\n        return $el.find('pre').each(function(i, pre) {\r\n          return _this.undecorate($(pre));\r\n        });\r\n      };\r\n    })(this));\r\n  };\r\n\r\n  CodeButton.prototype.render = function() {\r\n    var args;\r\n    args = 1 <= arguments.length ? Array.prototype.slice.call(arguments, 0) : [];\r\n    Button.prototype.render.apply(this, args);\r\n    return this.popover = new CodePopover({\r\n      button: this\r\n    });\r\n  };\r\n\r\n  CodeButton.prototype._checkMode = function() {\r\n    var $blockNodes, range;\r\n    range = this.editor.selection.range();\r\n    if (($blockNodes = $(range.cloneContents()).find(this.editor.util.blockNodes.join(','))) > 0 || (range.collapsed && this.editor.selection.startNodes().filter('code').length === 0)) {\r\n      this.inlineMode = false;\r\n      return this.htmlTag = 'pre';\r\n    } else {\r\n      this.inlineMode = true;\r\n      return this.htmlTag = 'code';\r\n    }\r\n  };\r\n\r\n  CodeButton.prototype._status = function() {\r\n    this._checkMode();\r\n    Button.prototype._status.call(this);\r\n    if (this.inlineMode) {\r\n      return;\r\n    }\r\n    if (this.active) {\r\n      return this.popover.show(this.node);\r\n    } else {\r\n      return this.popover.hide();\r\n    }\r\n  };\r\n\r\n  CodeButton.prototype.decorate = function($pre) {\r\n    var $code, lang, ref, ref1;\r\n    $code = $pre.find('> code');\r\n    if ($code.length > 0) {\r\n      lang = (ref = $code.attr('class')) != null ? (ref1 = ref.match(/lang-(\\S+)/)) != null ? ref1[1] : void 0 : void 0;\r\n      $code.contents().unwrap();\r\n      if (lang) {\r\n        return $pre.attr('data-lang', lang);\r\n      }\r\n    }\r\n  };\r\n\r\n  CodeButton.prototype.undecorate = function($pre) {\r\n    var $code, lang;\r\n    lang = $pre.attr('data-lang');\r\n    $code = $('<code/>');\r\n    if (lang && lang !== -1) {\r\n      $code.addClass('lang-' + lang);\r\n    }\r\n    return $pre.wrapInner($code).removeAttr('data-lang');\r\n  };\r\n\r\n  CodeButton.prototype.command = function() {\r\n    if (this.inlineMode) {\r\n      return this._inlineCommand();\r\n    } else {\r\n      return this._blockCommand();\r\n    }\r\n  };\r\n\r\n  CodeButton.prototype._blockCommand = function() {\r\n    var $rootNodes, clearCache, nodeCache, resultNodes;\r\n    $rootNodes = this.editor.selection.rootNodes();\r\n    nodeCache = [];\r\n    resultNodes = [];\r\n    clearCache = (function(_this) {\r\n      return function() {\r\n        var $pre;\r\n        if (!(nodeCache.length > 0)) {\r\n          return;\r\n        }\r\n        $pre = $(\"<\" + _this.htmlTag + \"/>\").insertBefore(nodeCache[0]).text(_this.editor.formatter.clearHtml(nodeCache));\r\n        resultNodes.push($pre[0]);\r\n        return nodeCache.length = 0;\r\n      };\r\n    })(this);\r\n    $rootNodes.each((function(_this) {\r\n      return function(i, node) {\r\n        var $node, $p;\r\n        $node = $(node);\r\n        if ($node.is(_this.htmlTag)) {\r\n          clearCache();\r\n          $p = $('<p/>').append($node.html().replace('\\n', '<br/>')).replaceAll($node);\r\n          return resultNodes.push($p[0]);\r\n        } else if ($node.is(_this.disableTag) || _this.editor.util.isDecoratedNode($node) || $node.is('blockquote')) {\r\n          return clearCache();\r\n        } else {\r\n          return nodeCache.push(node);\r\n        }\r\n      };\r\n    })(this));\r\n    clearCache();\r\n    this.editor.selection.setRangeAtEndOf($(resultNodes).last());\r\n    return this.editor.trigger('valuechanged');\r\n  };\r\n\r\n  CodeButton.prototype._inlineCommand = function() {\r\n    var $code, $contents, range;\r\n    range = this.editor.selection.range();\r\n    if (this.active) {\r\n      range.selectNodeContents(this.node[0]);\r\n      this.editor.selection.save(range);\r\n      this.node.contents().unwrap();\r\n      this.editor.selection.restore();\r\n    } else {\r\n      $contents = $(range.extractContents());\r\n      $code = $(\"<\" + this.htmlTag + \"/>\").append($contents.contents());\r\n      range.insertNode($code[0]);\r\n      range.selectNodeContents($code[0]);\r\n      this.editor.selection.range(range);\r\n    }\r\n    return this.editor.trigger('valuechanged');\r\n  };\r\n\r\n  Simditor.Toolbar.addButton(CodeButton);    \r\n\r\n  return CodeButton;\r\n\r\n});\ndefine('skylark-simditor/buttons/ColorButton',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Button\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,Button){ \r\n\r\n   var ColorButton = Button.inherit({\r\n\r\n   });\r\n\r\n\r\n  ColorButton.prototype.name = 'color';\r\n\r\n  ColorButton.prototype.icon = 'tint';\r\n\r\n  ColorButton.prototype.disableTag = 'pre';\r\n\r\n  ColorButton.prototype.menu = true;\r\n\r\n  ColorButton.prototype.render = function() {\r\n    var args;\r\n    args = 1 <= arguments.length ? Array.prototype.slice.call(arguments, 0) : [];\r\n    return Button.prototype.render.apply(this, args);\r\n  };\r\n\r\n  ColorButton.prototype.renderMenu = function() {\r\n    $('<ul class=\"color-list\">\\n  <li><a href=\"javascript:;\" class=\"font-color font-color-1\"></a></li>\\n  <li><a href=\"javascript:;\" class=\"font-color font-color-2\"></a></li>\\n  <li><a href=\"javascript:;\" class=\"font-color font-color-3\"></a></li>\\n  <li><a href=\"javascript:;\" class=\"font-color font-color-4\"></a></li>\\n  <li><a href=\"javascript:;\" class=\"font-color font-color-5\"></a></li>\\n  <li><a href=\"javascript:;\" class=\"font-color font-color-6\"></a></li>\\n  <li><a href=\"javascript:;\" class=\"font-color font-color-7\"></a></li>\\n  <li><a href=\"javascript:;\" class=\"font-color font-color-default\"></a></li>\\n</ul>').appendTo(this.menuWrapper);\r\n    this.menuWrapper.on('mousedown', '.color-list', function(e) {\r\n      return false;\r\n    });\r\n    return this.menuWrapper.on('click', '.font-color', (function(_this) {\r\n      return function(e) {\r\n        var $link, $p, hex, range, rgb, textNode;\r\n        _this.wrapper.removeClass('menu-on');\r\n        $link = $(e.currentTarget);\r\n        if ($link.hasClass('font-color-default')) {\r\n          $p = _this.editor.body.find('p, li');\r\n          if (!($p.length > 0)) {\r\n            return;\r\n          }\r\n          rgb = window.getComputedStyle($p[0], null).getPropertyValue('color');\r\n          hex = _this._convertRgbToHex(rgb);\r\n        } else {\r\n          rgb = window.getComputedStyle($link[0], null).getPropertyValue('background-color');\r\n          hex = _this._convertRgbToHex(rgb);\r\n        }\r\n        if (!hex) {\r\n          return;\r\n        }\r\n        range = _this.editor.selection.range();\r\n        if (!$link.hasClass('font-color-default') && range.collapsed) {\r\n          textNode = document.createTextNode(_this._t('coloredText'));\r\n          range.insertNode(textNode);\r\n          range.selectNodeContents(textNode);\r\n        }\r\n        _this.editor.selection.range(range);\r\n        document.execCommand('styleWithCSS', false, true);\r\n        document.execCommand('foreColor', false, hex);\r\n        document.execCommand('styleWithCSS', false, false);\r\n        if (!_this.editor.util.support.oninput) {\r\n          return _this.editor.trigger('valuechanged');\r\n        }\r\n      };\r\n    })(this));\r\n  };\r\n\r\n  ColorButton.prototype._convertRgbToHex = function(rgb) {\r\n    var match, re, rgbToHex;\r\n    re = /rgb\\((\\d+),\\s?(\\d+),\\s?(\\d+)\\)/g;\r\n    match = re.exec(rgb);\r\n    if (!match) {\r\n      return '';\r\n    }\r\n    rgbToHex = function(r, g, b) {\r\n      var componentToHex;\r\n      componentToHex = function(c) {\r\n        var hex;\r\n        hex = c.toString(16);\r\n        if (hex.length === 1) {\r\n          return '0' + hex;\r\n        } else {\r\n          return hex;\r\n        }\r\n      };\r\n      return \"#\" + componentToHex(r) + componentToHex(g) + componentToHex(b);\r\n    };\r\n    return rgbToHex(match[1] * 1, match[2] * 1, match[3] * 1);\r\n  };\r\n\r\n  Simditor.Toolbar.addButton(ColorButton);\r\n\r\n  return ColorButton;\r\n\t\r\n});\ndefine('skylark-simditor/buttons/FontScaleButton',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Button\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,Button){ \r\n   var FontScaleButton = Button.inherit({\r\n\r\n   });\r\n\r\n\r\n\r\n  FontScaleButton.prototype.name = 'fontScale';\r\n\r\n  FontScaleButton.prototype.icon = 'font';\r\n\r\n  FontScaleButton.prototype.htmlTag = 'span';\r\n\r\n  FontScaleButton.prototype.disableTag = 'pre, h1, h2, h3, h4, h5';\r\n\r\n  FontScaleButton.prototype.sizeMap = {\r\n    'x-large': '1.5em',\r\n    'large': '1.25em',\r\n    'small': '.75em',\r\n    'x-small': '.5em'\r\n  };\r\n\r\n  FontScaleButton.prototype._init = function() {\r\n    this.menu = [\r\n      {\r\n        name: '150%',\r\n        text: this._t('fontScaleXLarge'),\r\n        param: '5'\r\n      }, {\r\n        name: '125%',\r\n        text: this._t('fontScaleLarge'),\r\n        param: '4'\r\n      }, {\r\n        name: '100%',\r\n        text: this._t('fontScaleNormal'),\r\n        param: '3'\r\n      }, {\r\n        name: '75%',\r\n        text: this._t('fontScaleSmall'),\r\n        param: '2'\r\n      }, {\r\n        name: '50%',\r\n        text: this._t('fontScaleXSmall'),\r\n        param: '1'\r\n      }\r\n    ];\r\n    return Button.prototype._init.call(this);\r\n  };\r\n\r\n  FontScaleButton.prototype._activeStatus = function() {\r\n    var active, endNode, endNodes, range, startNode, startNodes;\r\n    range = this.editor.selection.range();\r\n    startNodes = this.editor.selection.startNodes();\r\n    endNodes = this.editor.selection.endNodes();\r\n    startNode = startNodes.filter('span[style*=\"font-size\"]');\r\n    endNode = endNodes.filter('span[style*=\"font-size\"]');\r\n    active = startNodes.length > 0 && endNodes.length > 0 && startNode.is(endNode);\r\n    this.setActive(active);\r\n    return this.active;\r\n  };\r\n\r\n  FontScaleButton.prototype.command = function(param) {\r\n    var $scales, containerNode, range;\r\n    range = this.editor.selection.range();\r\n    if (range.collapsed) {\r\n      return;\r\n    }\r\n    this.editor.selection.range(range);\r\n    document.execCommand('styleWithCSS', false, true);\r\n    document.execCommand('fontSize', false, param);\r\n    document.execCommand('styleWithCSS', false, false);\r\n    this.editor.selection.reset();\r\n    this.editor.selection.range();\r\n    containerNode = this.editor.selection.containerNode();\r\n    if (containerNode[0].nodeType === Node.TEXT_NODE) {\r\n      $scales = containerNode.closest('span[style*=\"font-size\"]');\r\n    } else {\r\n      $scales = containerNode.find('span[style*=\"font-size\"]');\r\n    }\r\n    $scales.each((function(_this) {\r\n      return function(i, n) {\r\n        var $span, size;\r\n        $span = $(n);\r\n        size = n.style.fontSize;\r\n        if (/large|x-large|small|x-small/.test(size)) {\r\n          return $span.css('fontSize', _this.sizeMap[size]);\r\n        } else if (size === 'medium') {\r\n          if ($span[0].style.length > 1) {\r\n            return $span.css('fontSize', '');\r\n          } else {\r\n            return $span.replaceWith($span.contents());\r\n          }\r\n        }\r\n      };\r\n    })(this));\r\n    return this.editor.trigger('valuechanged');\r\n  };\r\n\r\n  Simditor.Toolbar.addButton(FontScaleButton);\r\n\r\n  return FontScaleButton;\r\n\r\n});\ndefine('skylark-simditor/buttons/HrButton',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Button\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,Button){ \r\n\r\n   var HrButton = Button.inherit({\r\n\r\n   });\r\n\r\n\r\n  HrButton.prototype.name = 'hr';\r\n\r\n  HrButton.prototype.icon = 'minus';\r\n\r\n  HrButton.prototype.htmlTag = 'hr';\r\n\r\n  HrButton.prototype._status = function() {};\r\n\r\n  HrButton.prototype.command = function() {\r\n    var $hr, $newBlock, $nextBlock, $rootBlock;\r\n    $rootBlock = this.editor.selection.rootNodes().first();\r\n    $nextBlock = $rootBlock.next();\r\n    if ($nextBlock.length > 0) {\r\n      this.editor.selection.save();\r\n    } else {\r\n      $newBlock = $('<p/>').append(this.editor.util.phBr);\r\n    }\r\n    $hr = $('<hr/>').insertAfter($rootBlock);\r\n    if ($newBlock) {\r\n      $newBlock.insertAfter($hr);\r\n      this.editor.selection.setRangeAtStartOf($newBlock);\r\n    } else {\r\n      this.editor.selection.restore();\r\n    }\r\n    return this.editor.trigger('valuechanged');\r\n  };\r\n\r\n  Simditor.Toolbar.addButton(HrButton);\r\n\r\n  return HrButton;\r\n\t\r\n});\ndefine('skylark-simditor/buttons/ImagePopover',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Popover\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,Popover){ \r\n   var ImagePopover = Popover.inherit({\r\n\r\n   });\r\n\r\n  ImagePopover.prototype.offset = {\r\n    top: 6,\r\n    left: -4\r\n  };\r\n\r\n  ImagePopover.prototype.render = function() {\r\n    var tpl;\r\n    tpl = \"<div class=\\\"link-settings\\\">\\n  <div class=\\\"settings-field\\\">\\n    <label>\" + (this._t('imageUrl')) + \"</label>\\n    <input class=\\\"image-src\\\" type=\\\"text\\\" tabindex=\\\"1\\\" />\\n    <a class=\\\"btn-upload\\\" href=\\\"javascript:;\\\"\\n      title=\\\"\" + (this._t('uploadImage')) + \"\\\" tabindex=\\\"-1\\\">\\n      <span class=\\\"simditor-icon simditor-icon-upload\\\"></span>\\n    </a>\\n  </div>\\n  <div class='settings-field'>\\n    <label>\" + (this._t('imageAlt')) + \"</label>\\n    <input class=\\\"image-alt\\\" id=\\\"image-alt\\\" type=\\\"text\\\" tabindex=\\\"1\\\" />\\n  </div>\\n  <div class=\\\"settings-field\\\">\\n    <label>\" + (this._t('imageSize')) + \"</label>\\n    <input class=\\\"image-size\\\" id=\\\"image-width\\\" type=\\\"text\\\" tabindex=\\\"2\\\" />\\n    <span class=\\\"times\\\">×</span>\\n    <input class=\\\"image-size\\\" id=\\\"image-height\\\" type=\\\"text\\\" tabindex=\\\"3\\\" />\\n    <a class=\\\"btn-restore\\\" href=\\\"javascript:;\\\"\\n      title=\\\"\" + (this._t('restoreImageSize')) + \"\\\" tabindex=\\\"-1\\\">\\n      <span class=\\\"simditor-icon simditor-icon-undo\\\"></span>\\n    </a>\\n  </div>\\n</div>\";\r\n    this.el.addClass('image-popover').append(tpl);\r\n    this.srcEl = this.el.find('.image-src');\r\n    this.widthEl = this.el.find('#image-width');\r\n    this.heightEl = this.el.find('#image-height');\r\n    this.altEl = this.el.find('#image-alt');\r\n    this.srcEl.on('keydown', (function(_this) {\r\n      return function(e) {\r\n        var range;\r\n        if (!(e.which === 13 && !_this.target.hasClass('uploading'))) {\r\n          return;\r\n        }\r\n        e.preventDefault();\r\n        range = document.createRange();\r\n        _this.button.editor.selection.setRangeAfter(_this.target, range);\r\n        return _this.hide();\r\n      };\r\n    })(this));\r\n    this.srcEl.on('blur', (function(_this) {\r\n      return function(e) {\r\n        return _this._loadImage(_this.srcEl.val());\r\n      };\r\n    })(this));\r\n    this.el.find('.image-size').on('blur', (function(_this) {\r\n      return function(e) {\r\n        _this._resizeImg($(e.currentTarget));\r\n        return _this.el.data('popover').refresh();\r\n      };\r\n    })(this));\r\n    this.el.find('.image-size').on('keyup', (function(_this) {\r\n      return function(e) {\r\n        var inputEl;\r\n        inputEl = $(e.currentTarget);\r\n        if (!(e.which === 13 || e.which === 27 || e.which === 9)) {\r\n          return _this._resizeImg(inputEl, true);\r\n        }\r\n      };\r\n    })(this));\r\n    this.el.find('.image-size').on('keydown', (function(_this) {\r\n      return function(e) {\r\n        var $img, inputEl, range;\r\n        inputEl = $(e.currentTarget);\r\n        if (e.which === 13 || e.which === 27) {\r\n          e.preventDefault();\r\n          if (e.which === 13) {\r\n            _this._resizeImg(inputEl);\r\n          } else {\r\n            _this._restoreImg();\r\n          }\r\n          $img = _this.target;\r\n          _this.hide();\r\n          range = document.createRange();\r\n          return _this.button.editor.selection.setRangeAfter($img, range);\r\n        } else if (e.which === 9) {\r\n          return _this.el.data('popover').refresh();\r\n        }\r\n      };\r\n    })(this));\r\n    this.altEl.on('keydown', (function(_this) {\r\n      return function(e) {\r\n        var range;\r\n        if (e.which === 13) {\r\n          e.preventDefault();\r\n          range = document.createRange();\r\n          _this.button.editor.selection.setRangeAfter(_this.target, range);\r\n          return _this.hide();\r\n        }\r\n      };\r\n    })(this));\r\n    this.altEl.on('keyup', (function(_this) {\r\n      return function(e) {\r\n        if (e.which === 13 || e.which === 27 || e.which === 9) {\r\n          return;\r\n        }\r\n        _this.alt = _this.altEl.val();\r\n        return _this.target.attr('alt', _this.alt);\r\n      };\r\n    })(this));\r\n    this.el.find('.btn-restore').on('click', (function(_this) {\r\n      return function(e) {\r\n        _this._restoreImg();\r\n        return _this.el.data('popover').refresh();\r\n      };\r\n    })(this));\r\n    this.editor.on('valuechanged', (function(_this) {\r\n      return function(e) {\r\n        if (_this.active) {\r\n          return _this.refresh();\r\n        }\r\n      };\r\n    })(this));\r\n    return this._initUploader();\r\n  };\r\n\r\n  ImagePopover.prototype._initUploader = function() {\r\n    var $uploadBtn, createInput;\r\n    $uploadBtn = this.el.find('.btn-upload');\r\n    if (this.editor.uploader == null) {\r\n      $uploadBtn.remove();\r\n      return;\r\n    }\r\n    createInput = (function(_this) {\r\n      return function() {\r\n        if (_this.input) {\r\n          _this.input.remove();\r\n        }\r\n        return _this.input = $('<input/>', {\r\n          type: 'file',\r\n          title: _this._t('uploadImage'),\r\n          multiple: true,\r\n          accept: 'image/gif,image/jpeg,image/jpg,image/png,image/svg'\r\n        }).appendTo($uploadBtn);\r\n      };\r\n    })(this);\r\n    createInput();\r\n    this.el.on('click mousedown', 'input[type=file]', function(e) {\r\n      return e.stopPropagation();\r\n    });\r\n    return this.el.on('change', 'input[type=file]', (function(_this) {\r\n      return function(e) {\r\n        _this.editor.uploader.upload(_this.input, {\r\n          inline: true,\r\n          img: _this.target\r\n        });\r\n        return createInput();\r\n      };\r\n    })(this));\r\n  };\r\n\r\n  ImagePopover.prototype._resizeImg = function(inputEl, onlySetVal) {\r\n    var height, value, width;\r\n    if (onlySetVal == null) {\r\n      onlySetVal = false;\r\n    }\r\n    value = inputEl.val() * 1;\r\n    if (!(this.target && ($.isNumeric(value) || value < 0))) {\r\n      return;\r\n    }\r\n    if (inputEl.is(this.widthEl)) {\r\n      width = value;\r\n      height = this.height * value / this.width;\r\n      this.heightEl.val(height);\r\n    } else {\r\n      height = value;\r\n      width = this.width * value / this.height;\r\n      this.widthEl.val(width);\r\n    }\r\n    if (!onlySetVal) {\r\n      this.target.attr({\r\n        width: width,\r\n        height: height\r\n      });\r\n      return this.editor.trigger('valuechanged');\r\n    }\r\n  };\r\n\r\n  ImagePopover.prototype._restoreImg = function() {\r\n    var ref, size;\r\n    size = ((ref = this.target.data('image-size')) != null ? ref.split(\",\") : void 0) || [this.width, this.height];\r\n    this.target.attr({\r\n      width: size[0] * 1,\r\n      height: size[1] * 1\r\n    });\r\n    this.widthEl.val(size[0]);\r\n    this.heightEl.val(size[1]);\r\n    return this.editor.trigger('valuechanged');\r\n  };\r\n\r\n  ImagePopover.prototype._loadImage = function(src, callback) {\r\n    if (/^data:image/.test(src) && !this.editor.uploader) {\r\n      if (callback) {\r\n        callback(false);\r\n      }\r\n      return;\r\n    }\r\n    if (this.target.attr('src') === src) {\r\n      return;\r\n    }\r\n    return this.button.loadImage(this.target, src, (function(_this) {\r\n      return function(img) {\r\n        var blob;\r\n        if (!img) {\r\n          return;\r\n        }\r\n        if (_this.active) {\r\n          _this.width = img.width;\r\n          _this.height = img.height;\r\n          _this.widthEl.val(_this.width);\r\n          _this.heightEl.val(_this.height);\r\n        }\r\n        if (/^data:image/.test(src)) {\r\n          blob = _this.editor.util.dataURLtoBlob(src);\r\n          blob.name = \"Base64 Image.png\";\r\n          _this.editor.uploader.upload(blob, {\r\n            inline: true,\r\n            img: _this.target\r\n          });\r\n        } else {\r\n          _this.editor.trigger('valuechanged');\r\n        }\r\n        if (callback) {\r\n          return callback(img);\r\n        }\r\n      };\r\n    })(this));\r\n  };\r\n\r\n  ImagePopover.prototype.show = function() {\r\n    var $img, args;\r\n    args = 1 <= arguments.length ? Array.prototype.slice.call(arguments, 0) : [];\r\n    Popover.prototype.show.apply(this, args);\r\n    $img = this.target;\r\n    this.width = $img.width();\r\n    this.height = $img.height();\r\n    this.alt = $img.attr('alt');\r\n    if ($img.hasClass('uploading')) {\r\n      return this.srcEl.val(this._t('uploading')).prop('disabled', true);\r\n    } else {\r\n      this.srcEl.val($img.attr('src')).prop('disabled', false);\r\n      this.widthEl.val(this.width);\r\n      this.heightEl.val(this.height);\r\n      return this.altEl.val(this.alt);\r\n    }\r\n  };\r\n\r\n  return ImagePopover;\r\n\r\n});\ndefine('skylark-simditor/buttons/ImageButton',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Button\",\r\n  \"./ImagePopover\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,Button,ImagePopover){ \r\n   var ImageButton = Button.inherit({\r\n\r\n   });\r\n\r\n\r\n  ImageButton.prototype.name = 'image';\r\n\r\n  ImageButton.prototype.icon = 'picture-o';\r\n\r\n  ImageButton.prototype.htmlTag = 'img';\r\n\r\n  ImageButton.prototype.disableTag = 'pre, table';\r\n\r\n  ImageButton.prototype.defaultImage = '';\r\n\r\n  ImageButton.prototype.needFocus = false;\r\n\r\n  ImageButton.prototype._init = function() {\r\n    var item, k, len, ref;\r\n    if (this.editor.opts.imageButton) {\r\n      if (Array.isArray(this.editor.opts.imageButton)) {\r\n        this.menu = [];\r\n        ref = this.editor.opts.imageButton;\r\n        for (k = 0, len = ref.length; k < len; k++) {\r\n          item = ref[k];\r\n          this.menu.push({\r\n            name: item + '-image',\r\n            text: this._t(item + 'Image')\r\n          });\r\n        }\r\n      } else {\r\n        this.menu = false;\r\n      }\r\n    } else {\r\n      if (this.editor.uploader != null) {\r\n        this.menu = [\r\n          {\r\n            name: 'upload-image',\r\n            text: this._t('uploadImage')\r\n          }, {\r\n            name: 'external-image',\r\n            text: this._t('externalImage')\r\n          }\r\n        ];\r\n      } else {\r\n        this.menu = false;\r\n      }\r\n    }\r\n    this.defaultImage = this.editor.opts.defaultImage;\r\n    this.editor.body.on('click', 'img:not([data-non-image])', (function(_this) {\r\n      return function(e) {\r\n        var $img, range;\r\n        $img = $(e.currentTarget);\r\n        range = document.createRange();\r\n        range.selectNode($img[0]);\r\n        _this.editor.selection.range(range);\r\n        if (!_this.editor.util.support.onselectionchange) {\r\n          _this.editor.trigger('selectionchanged');\r\n        }\r\n        return false;\r\n      };\r\n    })(this));\r\n    this.editor.body.on('mouseup', 'img:not([data-non-image])', function(e) {\r\n      return false;\r\n    });\r\n    this.editor.on('selectionchanged.image', (function(_this) {\r\n      return function() {\r\n        var $contents, $img, range;\r\n        range = _this.editor.selection.range();\r\n        if (range == null) {\r\n          return;\r\n        }\r\n        $contents = $(range.cloneContents()).contents();\r\n        if ($contents.length === 1 && $contents.is('img:not([data-non-image])')) {\r\n          $img = $(range.startContainer).contents().eq(range.startOffset);\r\n          return _this.popover.show($img);\r\n        } else {\r\n          return _this.popover.hide();\r\n        }\r\n      };\r\n    })(this));\r\n    this.editor.on('valuechanged.image', (function(_this) {\r\n      return function() {\r\n        var $masks;\r\n        $masks = _this.editor.wrapper.find('.simditor-image-loading');\r\n        if (!($masks.length > 0)) {\r\n          return;\r\n        }\r\n        return $masks.each(function(i, mask) {\r\n          var $img, $mask, file;\r\n          $mask = $(mask);\r\n          $img = $mask.data('img');\r\n          if (!($img && $img.parent().length > 0)) {\r\n            $mask.remove();\r\n            if ($img) {\r\n              file = $img.data('file');\r\n              if (file) {\r\n                _this.editor.uploader.cancel(file);\r\n                if (_this.editor.body.find('img.uploading').length < 1) {\r\n                  return _this.editor.uploader.trigger('uploadready', [file]);\r\n                }\r\n              }\r\n            }\r\n          }\r\n        });\r\n      };\r\n    })(this));\r\n    return Button.prototype._init.call(this);\r\n  };\r\n\r\n  ImageButton.prototype.render = function() {\r\n    var args;\r\n    args = 1 <= arguments.length ? Array.prototype.slice.call(arguments, 0) : [];\r\n    Button.prototype.render.apply(this, args);\r\n    this.popover = new ImagePopover({\r\n      button: this\r\n    });\r\n    if (this.editor.opts.imageButton === 'upload') {\r\n      return this._initUploader(this.el);\r\n    }\r\n  };\r\n\r\n  ImageButton.prototype.renderMenu = function() {\r\n    Button.prototype.renderMenu.call(this);\r\n    return this._initUploader();\r\n  };\r\n\r\n  ImageButton.prototype._initUploader = function($uploadItem) {\r\n    var $input, createInput, uploadProgress;\r\n    if ($uploadItem == null) {\r\n      $uploadItem = this.menuEl.find('.menu-item-upload-image');\r\n    }\r\n    if (this.editor.uploader == null) {\r\n      this.el.find('.btn-upload').remove();\r\n      return;\r\n    }\r\n    $input = null;\r\n    createInput = (function(_this) {\r\n      return function() {\r\n        if ($input) {\r\n          $input.remove();\r\n        }\r\n        return $input = $('<input/>', {\r\n          type: 'file',\r\n          title: _this._t('uploadImage'),\r\n          multiple: true,\r\n          accept: 'image/gif,image/jpeg,image/jpg,image/png,image/svg'\r\n        }).appendTo($uploadItem);\r\n      };\r\n    })(this);\r\n    createInput();\r\n    $uploadItem.on('click mousedown', 'input[type=file]', function(e) {\r\n      return e.stopPropagation();\r\n    });\r\n    $uploadItem.on('change', 'input[type=file]', (function(_this) {\r\n      return function(e) {\r\n        if (_this.editor.inputManager.focused) {\r\n          _this.editor.uploader.upload($input, {\r\n            inline: true\r\n          });\r\n          createInput();\r\n        } else {\r\n          _this.editor.one('focus', function(e) {\r\n            _this.editor.uploader.upload($input, {\r\n              inline: true\r\n            });\r\n            return createInput();\r\n          });\r\n          _this.editor.focus();\r\n        }\r\n        return _this.wrapper.removeClass('menu-on');\r\n      };\r\n    })(this));\r\n    this.editor.uploader.on('beforeupload', (function(_this) {\r\n      return function(e, file) {\r\n        var $img;\r\n        if (!file.inline) {\r\n          return;\r\n        }\r\n        if (file.img) {\r\n          $img = $(file.img);\r\n        } else {\r\n          $img = _this.createImage(file.name);\r\n          file.img = $img;\r\n        }\r\n        $img.addClass('uploading');\r\n        $img.data('file', file);\r\n        return _this.editor.uploader.readImageFile(file.obj, function(img) {\r\n          var src;\r\n          if (!$img.hasClass('uploading')) {\r\n            return;\r\n          }\r\n          src = img ? img.src : _this.defaultImage;\r\n          return _this.loadImage($img, src, function() {\r\n            if (_this.popover.active) {\r\n              _this.popover.refresh();\r\n              return _this.popover.srcEl.val(_this._t('uploading')).prop('disabled', true);\r\n            }\r\n          });\r\n        });\r\n      };\r\n    })(this));\r\n    uploadProgress = $.proxy(this.editor.util.throttle(function(e, file, loaded, total) {\r\n      var $img, $mask, percent;\r\n      if (!file.inline) {\r\n        return;\r\n      }\r\n      $mask = file.img.data('mask');\r\n      if (!$mask) {\r\n        return;\r\n      }\r\n      $img = $mask.data('img');\r\n      if (!($img.hasClass('uploading') && $img.parent().length > 0)) {\r\n        $mask.remove();\r\n        return;\r\n      }\r\n      percent = loaded / total;\r\n      percent = (percent * 100).toFixed(0);\r\n      if (percent > 99) {\r\n        percent = 99;\r\n      }\r\n      return $mask.find('.progress').height((100 - percent) + \"%\");\r\n    }, 500), this);\r\n    this.editor.uploader.on('uploadprogress', uploadProgress);\r\n    this.editor.uploader.on('uploadsuccess', (function(_this) {\r\n      return function(e, file, result) {\r\n        var $img, img_path, msg;\r\n        if (!file.inline) {\r\n          return;\r\n        }\r\n        $img = file.img;\r\n        if (!($img.hasClass('uploading') && $img.parent().length > 0)) {\r\n          return;\r\n        }\r\n        if (typeof result !== 'object') {\r\n          try {\r\n            result = $.parseJSON(result);\r\n          } catch (_error) {\r\n            e = _error;\r\n            result = {\r\n              success: false\r\n            };\r\n          }\r\n        }\r\n        if (result.success === false) {\r\n          msg = result.msg || _this._t('uploadFailed');\r\n          alert(msg);\r\n          img_path = _this.defaultImage;\r\n        } else {\r\n          img_path = result.file_path;\r\n        }\r\n        _this.loadImage($img, img_path, function() {\r\n          var $mask;\r\n          $img.removeData('file');\r\n          $img.removeClass('uploading').removeClass('loading');\r\n          $mask = $img.data('mask');\r\n          if ($mask) {\r\n            $mask.remove();\r\n          }\r\n          $img.removeData('mask');\r\n          _this.editor.trigger('valuechanged');\r\n          if (_this.editor.body.find('img.uploading').length < 1) {\r\n            return _this.editor.uploader.trigger('uploadready', [file, result]);\r\n          }\r\n        });\r\n        if (_this.popover.active) {\r\n          _this.popover.srcEl.prop('disabled', false);\r\n          return _this.popover.srcEl.val(result.file_path);\r\n        }\r\n      };\r\n    })(this));\r\n    return this.editor.uploader.on('uploaderror', (function(_this) {\r\n      return function(e, file, xhr) {\r\n        var $img, msg, result;\r\n        if (!file.inline) {\r\n          return;\r\n        }\r\n        if (xhr.statusText === 'abort') {\r\n          return;\r\n        }\r\n        if (xhr.responseText) {\r\n          try {\r\n            result = $.parseJSON(xhr.responseText);\r\n            msg = result.msg;\r\n          } catch (_error) {\r\n            e = _error;\r\n            msg = _this._t('uploadError');\r\n          }\r\n        }\r\n        $img = file.img;\r\n        if (!($img.hasClass('uploading') && $img.parent().length > 0)) {\r\n          return;\r\n        }\r\n        _this.loadImage($img, _this.defaultImage, function() {\r\n          var $mask;\r\n          $img.removeData('file');\r\n          $img.removeClass('uploading').removeClass('loading');\r\n          $mask = $img.data('mask');\r\n          if ($mask) {\r\n            $mask.remove();\r\n          }\r\n          return $img.removeData('mask');\r\n        });\r\n        if (_this.popover.active) {\r\n          _this.popover.srcEl.prop('disabled', false);\r\n          _this.popover.srcEl.val(_this.defaultImage);\r\n        }\r\n        _this.editor.trigger('valuechanged');\r\n        if (_this.editor.body.find('img.uploading').length < 1) {\r\n          return _this.editor.uploader.trigger('uploadready', [file, result]);\r\n        }\r\n      };\r\n    })(this));\r\n  };\r\n\r\n  ImageButton.prototype._status = function() {\r\n    return this._disableStatus();\r\n  };\r\n\r\n  ImageButton.prototype.loadImage = function($img, src, callback) {\r\n    var $mask, img, positionMask;\r\n    positionMask = (function(_this) {\r\n      return function() {\r\n        var imgOffset, wrapperOffset;\r\n        imgOffset = $img.offset();\r\n        wrapperOffset = _this.editor.wrapper.offset();\r\n        return $mask.css({\r\n          top: imgOffset.top - wrapperOffset.top,\r\n          left: imgOffset.left - wrapperOffset.left,\r\n          width: $img.width(),\r\n          height: $img.height()\r\n        }).show();\r\n      };\r\n    })(this);\r\n    $img.addClass('loading');\r\n    $mask = $img.data('mask');\r\n    if (!$mask) {\r\n      $mask = $('<div class=\"simditor-image-loading\">\\n  <div class=\"progress\"></div>\\n</div>').hide().appendTo(this.editor.wrapper);\r\n      positionMask();\r\n      $img.data('mask', $mask);\r\n      $mask.data('img', $img);\r\n    }\r\n    img = new Image();\r\n    img.onload = (function(_this) {\r\n      return function() {\r\n        var height, width;\r\n        if (!$img.hasClass('loading') && !$img.hasClass('uploading')) {\r\n          return;\r\n        }\r\n        width = img.width;\r\n        height = img.height;\r\n        $img.attr({\r\n          src: src,\r\n          width: width,\r\n          height: height,\r\n          'data-image-size': width + ',' + height\r\n        }).removeClass('loading');\r\n        if ($img.hasClass('uploading')) {\r\n          _this.editor.util.reflow(_this.editor.body);\r\n          positionMask();\r\n        } else {\r\n          $mask.remove();\r\n          $img.removeData('mask');\r\n        }\r\n        if ($.isFunction(callback)) {\r\n          return callback(img);\r\n        }\r\n      };\r\n    })(this);\r\n    img.onerror = function() {\r\n      if ($.isFunction(callback)) {\r\n        callback(false);\r\n      }\r\n      $mask.remove();\r\n      return $img.removeData('mask').removeClass('loading');\r\n    };\r\n    return img.src = src;\r\n  };\r\n\r\n  ImageButton.prototype.createImage = function(name) {\r\n    var $img, range;\r\n    if (name == null) {\r\n      name = 'Image';\r\n    }\r\n    if (!this.editor.inputManager.focused) {\r\n      this.editor.focus();\r\n    }\r\n    range = this.editor.selection.range();\r\n    range.deleteContents();\r\n    this.editor.selection.range(range);\r\n    $img = $('<img/>').attr('alt', name);\r\n    range.insertNode($img[0]);\r\n    this.editor.selection.setRangeAfter($img, range);\r\n    this.editor.trigger('valuechanged');\r\n    return $img;\r\n  };\r\n\r\n  ImageButton.prototype.command = function(src) {\r\n    var $img;\r\n    $img = this.createImage();\r\n    return this.loadImage($img, src || this.defaultImage, (function(_this) {\r\n      return function() {\r\n        _this.editor.trigger('valuechanged');\r\n        _this.editor.util.reflow($img);\r\n        $img.click();\r\n        return _this.popover.one('popovershow', function() {\r\n          _this.popover.srcEl.focus();\r\n          return _this.popover.srcEl[0].select();\r\n        });\r\n      };\r\n    })(this));\r\n  };\r\n\r\n  Simditor.Toolbar.addButton(ImageButton);\t\r\n\r\n  return ImageButton;\r\n\r\n});\ndefine('skylark-simditor/buttons/IndentButton',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Button\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,Button){ \r\n   var IndentButton = Button.inherit({\r\n\r\n   });\r\n\r\n\r\n  IndentButton.prototype.name = 'indent';\r\n\r\n  IndentButton.prototype.icon = 'indent';\r\n\r\n  IndentButton.prototype._init = function() {\r\n    var hotkey;\r\n    hotkey = this.editor.opts.tabIndent === false ? '' : ' (Tab)';\r\n    this.title = this._t(this.name) + hotkey;\r\n    return Button.prototype._init.call(this);\r\n  };\r\n\r\n  IndentButton.prototype._status = function() {};\r\n\r\n  IndentButton.prototype.command = function() {\r\n    return this.editor.indentation.indent();\r\n  };\r\n\r\n  Simditor.Toolbar.addButton(IndentButton);\t\r\n\r\n  return IndentButton;\r\n});\ndefine('skylark-simditor/buttons/ItalicButton',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Button\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,Button){ \r\n\r\n  var ItalicButton = Button.inherit({\r\n\r\n   });\r\n\r\n\r\n  ItalicButton.prototype.name = 'italic';\r\n\r\n  ItalicButton.prototype.icon = 'italic';\r\n\r\n  ItalicButton.prototype.htmlTag = 'i';\r\n\r\n  ItalicButton.prototype.disableTag = 'pre';\r\n\r\n  ItalicButton.prototype.shortcut = 'cmd+i';\r\n\r\n  ItalicButton.prototype._init = function() {\r\n    if (this.editor.util.os.mac) {\r\n      this.title = this.title + \" ( Cmd + i )\";\r\n    } else {\r\n      this.title = this.title + \" ( Ctrl + i )\";\r\n      this.shortcut = 'ctrl+i';\r\n    }\r\n    return Button.prototype._init.call(this);\r\n  };\r\n\r\n  ItalicButton.prototype._activeStatus = function() {\r\n    var active;\r\n    active = document.queryCommandState('italic') === true;\r\n    this.setActive(active);\r\n    return this.active;\r\n  };\r\n\r\n  ItalicButton.prototype.command = function() {\r\n    document.execCommand('italic');\r\n    if (!this.editor.util.support.oninput) {\r\n      this.editor.trigger('valuechanged');\r\n    }\r\n    return $(document).trigger('selectionchange');\r\n  };\r\n\r\n  Simditor.Toolbar.addButton(ItalicButton); \r\n\r\n  return ItalicButton;\r\n\r\n});\ndefine('skylark-simditor/buttons/LinkPopover',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Popover\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,Popover){ \r\n  var LinkPopover = Popover.inherit({\r\n\r\n  });\r\n\r\n  LinkPopover.prototype.render = function() {\r\n    var tpl;\r\n    tpl = \"<div class=\\\"link-settings\\\">\\n  <div class=\\\"settings-field\\\">\\n    <label>\" + (this._t('linkText')) + \"</label>\\n    <input class=\\\"link-text\\\" type=\\\"text\\\"/>\\n    <a class=\\\"btn-unlink\\\" href=\\\"javascript:;\\\" title=\\\"\" + (this._t('removeLink')) + \"\\\"\\n      tabindex=\\\"-1\\\">\\n      <span class=\\\"simditor-icon simditor-icon-unlink\\\"></span>\\n    </a>\\n  </div>\\n  <div class=\\\"settings-field\\\">\\n    <label>\" + (this._t('linkUrl')) + \"</label>\\n    <input class=\\\"link-url\\\" type=\\\"text\\\"/>\\n  </div>\\n  <div class=\\\"settings-field\\\">\\n    <label>\" + (this._t('linkTarget')) + \"</label>\\n    <select class=\\\"link-target\\\">\\n      <option value=\\\"_blank\\\">\" + (this._t('openLinkInNewWindow')) + \" (_blank)</option>\\n      <option value=\\\"_self\\\">\" + (this._t('openLinkInCurrentWindow')) + \" (_self)</option>\\n    </select>\\n  </div>\\n</div>\";\r\n    this.el.addClass('link-popover').append(tpl);\r\n    this.textEl = this.el.find('.link-text');\r\n    this.urlEl = this.el.find('.link-url');\r\n    this.unlinkEl = this.el.find('.btn-unlink');\r\n    this.selectTarget = this.el.find('.link-target');\r\n    this.textEl.on('keyup', (function(_this) {\r\n      return function(e) {\r\n        if (e.which === 13) {\r\n          return;\r\n        }\r\n        _this.target.text(_this.textEl.val());\r\n        return _this.editor.inputManager.throttledValueChanged();\r\n      };\r\n    })(this));\r\n    this.urlEl.on('keyup', (function(_this) {\r\n      return function(e) {\r\n        var val;\r\n        if (e.which === 13) {\r\n          return;\r\n        }\r\n        val = _this.urlEl.val();\r\n        if (!(/^(http|https|ftp|ftps|file)?:\\/\\/|^(mailto|tel)?:|^\\//ig.test(val) || !val)) {\r\n          val = 'http://' + val;\r\n        }\r\n        _this.target.attr('href', val);\r\n        return _this.editor.inputManager.throttledValueChanged();\r\n      };\r\n    })(this));\r\n    $([this.urlEl[0], this.textEl[0]]).on('keydown', (function(_this) {\r\n      return function(e) {\r\n        var range;\r\n        if (e.which === 13 || e.which === 27 || (!e.shiftKey && e.which === 9 && $(e.target).hasClass('link-url'))) {\r\n          e.preventDefault();\r\n          range = document.createRange();\r\n          _this.editor.selection.setRangeAfter(_this.target, range);\r\n          _this.hide();\r\n          return _this.editor.inputManager.throttledValueChanged();\r\n        }\r\n      };\r\n    })(this));\r\n    this.unlinkEl.on('click', (function(_this) {\r\n      return function(e) {\r\n        var range, txtNode;\r\n        txtNode = document.createTextNode(_this.target.text());\r\n        _this.target.replaceWith(txtNode);\r\n        _this.hide();\r\n        range = document.createRange();\r\n        _this.editor.selection.setRangeAfter(txtNode, range);\r\n        return _this.editor.inputManager.throttledValueChanged();\r\n      };\r\n    })(this));\r\n    return this.selectTarget.on('change', (function(_this) {\r\n      return function(e) {\r\n        _this.target.attr('target', _this.selectTarget.val());\r\n        return _this.editor.inputManager.throttledValueChanged();\r\n      };\r\n    })(this));\r\n  };\r\n\r\n  LinkPopover.prototype.show = function() {\r\n    var args;\r\n    args = 1 <= arguments.length ? Array.prototype.slice.call(arguments, 0) : [];\r\n    Popover.prototype.show.apply(this, args);\r\n    this.textEl.val(this.target.text());\r\n    return this.urlEl.val(this.target.attr('href'));\r\n  };\r\n\r\n  return LinkPopover;\r\n\r\n});\ndefine('skylark-simditor/buttons/LinkButton',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Button\",\r\n  \"./LinkPopover\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,Button,LinkPopover){ \r\n\r\n  var LinkButton = Button.inherit({\r\n\r\n   });\r\n\r\n\r\n  LinkButton.prototype.name = 'link';\r\n\r\n  LinkButton.prototype.icon = 'link';\r\n\r\n  LinkButton.prototype.htmlTag = 'a';\r\n\r\n  LinkButton.prototype.disableTag = 'pre';\r\n\r\n  LinkButton.prototype.render = function() {\r\n    var args;\r\n    args = 1 <= arguments.length ? Array.prototype.slice.call(arguments, 0) : [];\r\n    Button.prototype.render.apply(this, args);\r\n    return this.popover = new LinkPopover({\r\n      button: this\r\n    });\r\n  };\r\n\r\n  LinkButton.prototype._status = function() {\r\n   Button.prototype._status.call(this);\r\n    if (this.active && !this.editor.selection.rangeAtEndOf(this.node)) {\r\n      return this.popover.show(this.node);\r\n    } else {\r\n      return this.popover.hide();\r\n    }\r\n  };\r\n\r\n  LinkButton.prototype.command = function() {\r\n    var $contents, $link, $newBlock, linkText, range, txtNode;\r\n    range = this.editor.selection.range();\r\n    if (this.active) {\r\n      txtNode = document.createTextNode(this.node.text());\r\n      this.node.replaceWith(txtNode);\r\n      range.selectNode(txtNode);\r\n    } else {\r\n      $contents = $(range.extractContents());\r\n      linkText = this.editor.formatter.clearHtml($contents.contents(), false);\r\n      $link = $('<a/>', {\r\n        href: '',\r\n        target: '_blank',\r\n        text: linkText || this._t('linkText')\r\n      });\r\n      if (this.editor.selection.blockNodes().length > 0) {\r\n        range.insertNode($link[0]);\r\n      } else {\r\n        $newBlock = $('<p/>').append($link);\r\n        range.insertNode($newBlock[0]);\r\n      }\r\n      range.selectNodeContents($link[0]);\r\n      this.popover.one('popovershow', (function(_this) {\r\n        return function() {\r\n          if (linkText) {\r\n            _this.popover.urlEl.focus();\r\n            return _this.popover.urlEl[0].select();\r\n          } else {\r\n            _this.popover.textEl.focus();\r\n            return _this.popover.textEl[0].select();\r\n          }\r\n        };\r\n      })(this));\r\n    }\r\n    this.editor.selection.range(range);\r\n    return this.editor.trigger('valuechanged');\r\n  };\r\n\r\n  Simditor.Toolbar.addButton(LinkButton);\r\n\r\n  return LinkButton;\r\n\r\n});\ndefine('skylark-simditor/buttons/ListButton',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Button\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,Button){ \r\n  var ListButton = Button.inherit({\r\n\r\n   });\r\n\r\n\r\n    ListButton.prototype.type = '';\r\n\r\n    ListButton.prototype.disableTag = 'pre, table';\r\n\r\n    ListButton.prototype.command = function(param) {\r\n      var $list, $rootNodes, anotherType;\r\n      $rootNodes = this.editor.selection.blockNodes();\r\n      anotherType = this.type === 'ul' ? 'ol' : 'ul';\r\n      this.editor.selection.save();\r\n      $list = null;\r\n      $rootNodes.each((function(_this) {\r\n        return function(i, node) {\r\n          var $node;\r\n          $node = $(node);\r\n          if ($node.is('blockquote, li') || $node.is(_this.disableTag) || _this.editor.util.isDecoratedNode($node) || !$.contains(document, node)) {\r\n            return;\r\n          }\r\n          if ($node.is(_this.type)) {\r\n            $node.children('li').each(function(i, li) {\r\n              var $childList, $li;\r\n              $li = $(li);\r\n              $childList = $li.children('ul, ol').insertAfter($node);\r\n              return $('<p/>').append($(li).html() || _this.editor.util.phBr).insertBefore($node);\r\n            });\r\n            return $node.remove();\r\n          } else if ($node.is(anotherType)) {\r\n            return $('<' + _this.type + '/>').append($node.contents()).replaceAll($node);\r\n          } else if ($list && $node.prev().is($list)) {\r\n            $('<li/>').append($node.html() || _this.editor.util.phBr).appendTo($list);\r\n            return $node.remove();\r\n          } else {\r\n            $list = $(\"<\" + _this.type + \"><li></li></\" + _this.type + \">\");\r\n            $list.find('li').append($node.html() || _this.editor.util.phBr);\r\n            return $list.replaceAll($node);\r\n          }\r\n        };\r\n      })(this));\r\n      this.editor.selection.restore();\r\n      return this.editor.trigger('valuechanged');\r\n    };\r\n\r\n    return ListButton;\r\n\t\r\n});\ndefine('skylark-simditor/buttons/OrderListButton',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"./ListButton\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,ListButton){ \r\n  var OrderListButton = ListButton.inherit({\r\n\r\n   });\r\n\r\n\r\n    OrderListButton.prototype.type = 'ol';\r\n\r\n    OrderListButton.prototype.name = 'ol';\r\n\r\n    OrderListButton.prototype.icon = 'list-ol';\r\n\r\n    OrderListButton.prototype.htmlTag = 'ol';\r\n\r\n    OrderListButton.prototype.shortcut = 'cmd+/';\r\n\r\n    OrderListButton.prototype._init = function() {\r\n      if (this.editor.util.os.mac) {\r\n        this.title = this.title + ' ( Cmd + / )';\r\n      } else {\r\n        this.title = this.title + ' ( ctrl + / )';\r\n        this.shortcut = 'ctrl+/';\r\n      }\r\n      return ListButton.prototype._init.call(this);\r\n    };\r\n\r\n    Simditor.Toolbar.addButton(OrderListButton);\r\n\r\n    return OrderListButton;\r\n\t\r\n});\ndefine('skylark-simditor/buttons/OutdentButton',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Button\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,Button){ \r\n  var OutdentButton = Button.inherit({\r\n\r\n   });\r\n\r\n\r\n  OutdentButton.prototype.name = 'outdent';\r\n\r\n  OutdentButton.prototype.icon = 'outdent';\r\n\r\n  OutdentButton.prototype._init = function() {\r\n    var hotkey;\r\n    hotkey = this.editor.opts.tabIndent === false ? '' : ' (Shift + Tab)';\r\n    this.title = this._t(this.name) + hotkey;\r\n    return Button.prototype._init.call(this);\r\n  };\r\n\r\n  OutdentButton.prototype._status = function() {};\r\n\r\n  OutdentButton.prototype.command = function() {\r\n    return this.editor.indentation.indent(true);\r\n  };\r\n\r\n  Simditor.Toolbar.addButton(OutdentButton);\t\r\n\r\n  return OutdentButton;\r\n\r\n});\ndefine('skylark-simditor/buttons/StrikethroughButton',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Button\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,Button){ \r\n  var StrikethroughButton = Button.inherit({\r\n\r\n   });\r\n\r\n\r\n  StrikethroughButton.prototype.name = 'strikethrough';\r\n\r\n  StrikethroughButton.prototype.icon = 'strikethrough';\r\n\r\n  StrikethroughButton.prototype.htmlTag = 'strike';\r\n\r\n  StrikethroughButton.prototype.disableTag = 'pre';\r\n\r\n  StrikethroughButton.prototype._activeStatus = function() {\r\n    var active;\r\n    active = document.queryCommandState('strikethrough') === true;\r\n    this.setActive(active);\r\n    return this.active;\r\n  };\r\n\r\n  StrikethroughButton.prototype.command = function() {\r\n    document.execCommand('strikethrough');\r\n    if (!this.editor.util.support.oninput) {\r\n      this.editor.trigger('valuechanged');\r\n    }\r\n    return $(document).trigger('selectionchange');\r\n  };\r\n\r\n  Simditor.Toolbar.addButton(StrikethroughButton);\t\r\n\r\n  return StrikethroughButton;\r\n\r\n});\ndefine('skylark-utils-dom/tables',[\r\n    \"./dom\",\r\n    \"./langx\",\r\n    \"./query\"\r\n], function(dom, langx,$) {\r\n  //TODO : don't use query\r\n\r\n  function tables() {\r\n      return tables;\r\n  }\r\n\r\n  function _changeCellTag($tr, tagName) {\r\n    return $tr.find('td, th').each(function(i, cell) {\r\n      var $cell;\r\n      $cell = $(cell);\r\n      return $cell.replaceWith(\"<\" + tagName + \">\" + ($cell.html()) + \"</\" + tagName + \">\");\r\n    });\r\n  }\r\n\r\n  function _nextRow($tr) {\r\n    var $nextTr;\r\n    $nextTr = $tr.next('tr');\r\n    if ($nextTr.length < 1 && $tr.parent('thead').length > 0) {\r\n      $nextTr = $tr.parent('thead').next('tbody').find('tr:first');\r\n    }\r\n    return $nextTr;\r\n  };\r\n\r\n  function _prevRow($tr) {\r\n    var $prevTr;\r\n    $prevTr = $tr.prev('tr');\r\n    if ($prevTr.length < 1 && $tr.parent('tbody').length > 0) {\r\n      $prevTr = $tr.parent('tbody').prev('thead').find('tr');\r\n    }\r\n    return $prevTr;\r\n  }\r\n\r\n  function createTable(row, col, phBr) {\r\n    var $table, $tbody, $td, $thead, $tr, c, k, l, r, ref, ref1;\r\n    $table = $('<table/>');\r\n    $thead = $('<thead/>').appendTo($table);\r\n    $tbody = $('<tbody/>').appendTo($table);\r\n    for (r = k = 0, ref = row; 0 <= ref ? k < ref : k > ref; r = 0 <= ref ? ++k : --k) {\r\n        $tr = $('<tr/>');\r\n        $tr.appendTo(r === 0 ? $thead : $tbody);\r\n        for (c = l = 0, ref1 = col; 0 <= ref1 ? l < ref1 : l > ref1; c = 0 <= ref1 ? ++l : --l) {\r\n          $td = $(r === 0 ? '<th/>' : '<td/>').appendTo($tr);\r\n          if (phBr) {\r\n              $td.append(phBr);\r\n          }\r\n        }\r\n    }   \r\n    return $table[0];\r\n  }\r\n    \r\n\r\n  //cls = simditor-table\r\n  function decorate(table,cssClasses) {\r\n    var $table = $(table);\r\n\r\n    var $colgroup, $headRow, $resizeHandle, $tbody, $thead, $wrapper;\r\n    if ($table.parent('.' + cssClasses.tableDecorate).length > 0) {\r\n      undecorate(table);\r\n    }\r\n    $table.wrap('<div class=\"' + cssClasses.tableDecorate + '\"></div>');\r\n    $wrapper = $table.parent('.' + cssClasses.tableDecorate );\r\n    $colgroup = $table.find('colgroup');\r\n    if ($table.find('thead').length < 1) {\r\n      $thead = $('<thead />');\r\n      $headRow = $table.find('tr').first();\r\n      $thead.append($headRow);\r\n      _changeCellTag($headRow, 'th');\r\n      $tbody = $table.find('tbody');\r\n      if ($tbody.length > 0) {\r\n        $tbody.before($thead);\r\n      } else {\r\n        $table.prepend($thead);\r\n      }\r\n    }\r\n    if ($colgroup.length < 1) {\r\n      $colgroup = $('<colgroup/>').prependTo($table);\r\n      $table.find('thead tr th').each(function(i, td) {\r\n        var $col;\r\n        return $col = $('<col/>').appendTo($colgroup);\r\n      });\r\n      refreshTableWidth($table);\r\n    }\r\n    $resizeHandle = $('<div />', {\r\n      \"class\": cssClasses.resizeHandle, // 'simditor-resize-handle',\r\n      contenteditable: 'false'\r\n    }).appendTo($wrapper);\r\n    return $table.parent();\r\n  }\r\n\r\n  function deleteTable(td,callback) {\r\n    var $td = $(td);\r\n\r\n    var $block, $table;\r\n    $table = $td.closest('.simditor-table');\r\n    $block = $table.next('p');\r\n    $table.remove();\r\n    if (callback) {\r\n      callback($block);\r\n    }\r\n  }\r\n\r\n  function deleteRow(td,callback) {\r\n    var $td = $(td);\r\n\r\n    var $newTr, $tr, index;\r\n    $tr = $td.parent('tr');\r\n    if ($tr.closest('table').find('tr').length < 1) {\r\n      return deleteTable(td);\r\n    } else {\r\n      $newTr = _nextRow($tr);\r\n      if (!($newTr.length > 0)) {\r\n        $newTr = _prevRow($tr);\r\n      }\r\n      index = $tr.find('td, th').index($td);\r\n      if ($tr.parent().is('thead')) {\r\n        $newTr.appendTo($tr.parent());\r\n        _changeCellTag($newTr, 'th');\r\n      }\r\n      $tr.remove();\r\n    \r\n      if (callback) {\r\n        callback($newTr[0],index);\r\n      }\r\n      //return this.editor.selection.setRangeAtEndOf($newTr.find('td, th').eq(index));\r\n    }\r\n  }\r\n\r\n  function insertRow(td, direction,phBr,callback) {\r\n    var $td = $(td);\r\n\r\n    var $newTr, $table, $tr, cellTag, colNum, i, index, k, ref;\r\n    if (direction == null) {\r\n      direction = 'after';\r\n    }\r\n    $tr = $td.parent('tr');\r\n    $table = $tr.closest('table');\r\n    colNum = 0;\r\n    $table.find('tr').each(function(i, tr) {\r\n      return colNum = Math.max(colNum, $(tr).find('td').length);\r\n    });\r\n    index = $tr.find('td, th').index($td);\r\n    $newTr = $('<tr/>');\r\n    cellTag = 'td';\r\n    if (direction === 'after' && $tr.parent().is('thead')) {\r\n      $tr.parent().next('tbody').prepend($newTr);\r\n    } else if (direction === 'before' && $tr.parent().is('thead')) {\r\n      $tr.before($newTr);\r\n      $tr.parent().next('tbody').prepend($tr);\r\n      _changeCellTag($tr, 'td');\r\n      cellTag = 'th';\r\n    } else {\r\n      $tr[direction]($newTr);\r\n    }\r\n    for (i = k = 1, ref = colNum; 1 <= ref ? k <= ref : k >= ref; i = 1 <= ref ? ++k : --k) {\r\n      $(\"<\" + cellTag + \"/>\").append(phBr).appendTo($newTr);\r\n    }\r\n\r\n    if (callback) {\r\n      callback($newTr[0],index);\r\n    }\r\n  }\r\n\r\n  function deleteCol(td,callback) {\r\n    var $td = $(td);\r\n\r\n    var $newTd, $table, $tr, index, noOtherCol, noOtherRow;\r\n    $tr = $td.parent('tr');\r\n    noOtherRow = $tr.closest('table').find('tr').length < 2;\r\n    noOtherCol = $td.siblings('td, th').length < 1;\r\n    if (noOtherRow && noOtherCol) {\r\n      return deleteTable(td);\r\n    } else {\r\n      index = $tr.find('td, th').index($td);\r\n      $newTd = $td.next('td, th');\r\n      if (!($newTd.length > 0)) {\r\n        $newTd = $tr.prev('td, th');\r\n      }\r\n      $table = $tr.closest('table');\r\n      $table.find('col').eq(index).remove();\r\n      $table.find('tr').each(function(i, tr) {\r\n        return $(tr).find('td, th').eq(index).remove();\r\n      });\r\n      refreshTableWidth($table);\r\n      //return this.editor.selection.setRangeAtEndOf($newTd);\r\n      if (callback) {\r\n        callback($newTd[0]);\r\n      }\r\n    }\r\n  }\r\n\r\n  function insertCol(td, direction,phBr,callback) {\r\n    var $td = $(td);\r\n\r\n    var $col, $newCol, $newTd, $table, $tr, index, tableWidth, width;\r\n    if (direction == null) {\r\n      direction = 'after';\r\n    }\r\n    $tr = $td.parent('tr');\r\n    index = $tr.find('td, th').index($td);\r\n    $table = $td.closest('table');\r\n    $col = $table.find('col').eq(index);\r\n    $table.find('tr').each((function(_this) {\r\n      return function(i, tr) {\r\n        var $newTd, cellTag;\r\n        cellTag = $(tr).parent().is('thead') ? 'th' : 'td';\r\n        $newTd = $(\"<\" + cellTag + \"/>\").append(phBr);\r\n        return $(tr).find('td, th').eq(index)[direction]($newTd);\r\n      };\r\n    })(this));\r\n    $newCol = $('<col/>');\r\n    $col[direction]($newCol);\r\n    tableWidth = $table.width();\r\n    width = Math.max(parseFloat($col.attr('width')) / 2, 50 / tableWidth * 100);\r\n    $col.attr('width', width + '%');\r\n    $newCol.attr('width', width + '%');\r\n    refreshTableWidth($table);\r\n    $newTd = direction === 'after' ? $td.next('td, th') : $td.prev('td, th');\r\n    //return this.editor.selection.setRangeAtStartOf($newTd);\r\n    if (callback) {\r\n      callback($newTd[0]);\r\n    }\r\n  }\r\n\r\n\r\n  function refreshTableWidth($table) {\r\n    return setTimeout((function(_this) {\r\n      return function() {\r\n        var cols, tableWidth;\r\n        tableWidth = $table.width();\r\n        cols = $table.find('col');\r\n        return $table.find('thead tr th').each(function(i, td) {\r\n          var $col;\r\n          $col = cols.eq(i);\r\n          return $col.attr('width', ($(td).outerWidth() / tableWidth * 100) + '%');\r\n        });\r\n      };\r\n    })(this), 0);\r\n  }\r\n\r\n\r\n  function resizable(container,options) {\r\n    var cssClasses = options.cssClasses,\r\n        clsResizeHandle = cssClasses.resizeHandle, // simditor-resize-handle\r\n        clsWrapper = cssClasses.wrapper, // .simditor-table\r\n        selectorWrapper = \".\" + clsWrapper,\r\n        selectorResizeHandle = \".\" + clsResizeHandle;\r\n\r\n    $(container).on('mousemove.table', selectorWrapper +' td, ' + selectorWrapper +' th', function(e) {\r\n      var $col, $colgroup, $resizeHandle, $td, $wrapper, index, ref, ref1, x;\r\n      $wrapper = $(this).parents(selectorWrapper);\r\n      $resizeHandle = $wrapper.find(selectorResizeHandle);\r\n      $colgroup = $wrapper.find('colgroup');\r\n      if ($wrapper.hasClass('resizing')) {\r\n        return;\r\n      }\r\n      $td = $(e.currentTarget);\r\n      x = e.pageX - $(e.currentTarget).offset().left;\r\n      if (x < 5 && $td.prev().length > 0) {\r\n        $td = $td.prev();\r\n      }\r\n      if ($td.next('td, th').length < 1) {\r\n        $resizeHandle.hide();\r\n        return;\r\n      }\r\n      if ((ref = $resizeHandle.data('td')) != null ? ref.is($td) : void 0) {\r\n        $resizeHandle.show();\r\n        return;\r\n      }\r\n      index = $td.parent().find('td, th').index($td);\r\n      $col = $colgroup.find('col').eq(index);\r\n      if ((ref1 = $resizeHandle.data('col')) != null ? ref1.is($col) : void 0) {\r\n        $resizeHandle.show();\r\n        return;\r\n      }\r\n      return $resizeHandle.css('left', $td.position().left + $td.outerWidth() - 5).data('td', $td).data('col', $col).show();\r\n    });\r\n\r\n    $(container).on('mouseleave'+ selectorWrapper, selectorWrapper, function(e) {\r\n      return $(this).find(selectorResizeHandle).hide();\r\n    });\r\n    return $(container).on('mousedown'+ selectorResizeHandle, selectorResizeHandle, function(e) {\r\n      var $handle, $leftCol, $leftTd, $rightCol, $rightTd, $wrapper, minWidth, startHandleLeft, startLeftWidth, startRightWidth, startX, tableWidth;\r\n      $wrapper = $(this).parent(selectorWrapper);\r\n      $handle = $(e.currentTarget);\r\n      $leftTd = $handle.data('td');\r\n      $leftCol = $handle.data('col');\r\n      $rightTd = $leftTd.next('td, th');\r\n      $rightCol = $leftCol.next('col');\r\n      startX = e.pageX;\r\n      startLeftWidth = $leftTd.outerWidth() * 1;\r\n      startRightWidth = $rightTd.outerWidth() * 1;\r\n      startHandleLeft = parseFloat($handle.css('left'));\r\n      tableWidth = $leftTd.closest(selectorWrapper).width();\r\n      minWidth = 50;\r\n      $(container).on('mousemove.resize-table', function(e) {\r\n        var deltaX, leftWidth, rightWidth;\r\n        deltaX = e.pageX - startX;\r\n        leftWidth = startLeftWidth + deltaX;\r\n        rightWidth = startRightWidth - deltaX;\r\n        if (leftWidth < minWidth) {\r\n          leftWidth = minWidth;\r\n          deltaX = minWidth - startLeftWidth;\r\n          rightWidth = startRightWidth - deltaX;\r\n        } else if (rightWidth < minWidth) {\r\n          rightWidth = minWidth;\r\n          deltaX = startRightWidth - minWidth;\r\n          leftWidth = startLeftWidth + deltaX;\r\n        }\r\n        $leftCol.attr('width', (leftWidth / tableWidth * 100) + '%');\r\n        $rightCol.attr('width', (rightWidth / tableWidth * 100) + '%');\r\n        return $handle.css('left', startHandleLeft + deltaX);\r\n      });\r\n      $(container).one('mouseup.resize-table', function(e) {\r\n        //$editor.sync();\r\n        $(container).off('.resize-table');\r\n        return $wrapper.removeClass('resizing');\r\n      });\r\n      $wrapper.addClass('resizing');\r\n      return false;\r\n    });\r\n  };\r\n\r\n  function undecorate(table) {\r\n    var $table = $(table);\r\n    if (!($table.parent('.simditor-table').length > 0)) {\r\n      return;\r\n    }\r\n    return $table.parent().replaceWith($table)[0];\r\n  };\r\n\r\n\r\n\r\n  langx.mixin(tables,{\r\n    \"createTable\" : createTable,\r\n    \"decorate\" : decorate,\r\n    \"deleteCol\" : deleteCol,\r\n    \"deleteRow\" : deleteRow,\r\n    \"deleteTable\" : deleteTable,\r\n    \"insertCol\" : insertCol,\r\n    \"insertRow\" : insertRow,\r\n    \"refreshTableWidth\" : refreshTableWidth,\r\n    \"resizable\" : resizable,\r\n    \"undecorate\" : undecorate\r\n  })\r\n\r\n\r\n  return dom.tables = tables;\r\n});\ndefine('skylark-simditor/buttons/TableButton',[\r\n  \"skylark-utils-dom/tables\",\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Button\"\r\n],function(tables,$,extend,SimpleModule,Toolbar,Simditor,Button){ \r\n  var TableButton = Button.inherit({\r\n\r\n   });\r\n\r\n\r\n  TableButton.prototype.name = 'table';\r\n\r\n  TableButton.prototype.icon = 'table';\r\n\r\n  TableButton.prototype.htmlTag = 'table';\r\n\r\n  TableButton.prototype.disableTag = 'pre, li, blockquote';\r\n\r\n  TableButton.prototype.menu = true;\r\n\r\n  TableButton.prototype._init = function() {\r\n    Button.prototype._init.call(this);\r\n    $.merge(this.editor.formatter._allowedTags, ['thead', 'th', 'tbody', 'tr', 'td', 'colgroup', 'col']);\r\n    $.extend(this.editor.formatter._allowedAttributes, {\r\n      td: ['rowspan', 'colspan'],\r\n      col: ['width']\r\n    });\r\n    $.extend(this.editor.formatter._allowedStyles, {\r\n      td: ['text-align'],\r\n      th: ['text-align']\r\n    });\r\n    this._initShortcuts();\r\n    this._initResize();\r\n    this.editor.on('decorate', (function(_this) {\r\n      return function(e, $el) {\r\n        return $el.find('table').each(function(i, table) {\r\n          return _this.decorate($(table));\r\n        });\r\n      };\r\n    })(this));\r\n    this.editor.on('undecorate', (function(_this) {\r\n      return function(e, $el) {\r\n        return $el.find('table').each(function(i, table) {\r\n          return _this.undecorate($(table));\r\n        });\r\n      };\r\n    })(this));\r\n    this.editor.on('selectionchanged.table', (function(_this) {\r\n      return function(e) {\r\n        var $container, range;\r\n        _this.editor.body.find('.simditor-table td, .simditor-table th').removeClass('active');\r\n        range = _this.editor.selection.range();\r\n        if (!range) {\r\n          return;\r\n        }\r\n        $container = _this.editor.selection.containerNode();\r\n        if (range.collapsed && $container.is('.simditor-table')) {\r\n          _this.editor.selection.setRangeAtEndOf($container);\r\n        }\r\n        return $container.closest('td, th', _this.editor.body).addClass('active');\r\n      };\r\n    })(this));\r\n    this.editor.on('blur.table', (function(_this) {\r\n      return function(e) {\r\n        return _this.editor.body.find('.simditor-table td, .simditor-table th').removeClass('active');\r\n      };\r\n    })(this));\r\n    this.editor.keystroke.add('up', 'td', (function(_this) {\r\n      return function(e, $node) {\r\n        _this._tdNav($node, 'up');\r\n        return true;\r\n      };\r\n    })(this));\r\n    this.editor.keystroke.add('up', 'th', (function(_this) {\r\n      return function(e, $node) {\r\n        _this._tdNav($node, 'up');\r\n        return true;\r\n      };\r\n    })(this));\r\n    this.editor.keystroke.add('down', 'td', (function(_this) {\r\n      return function(e, $node) {\r\n        _this._tdNav($node, 'down');\r\n        return true;\r\n      };\r\n    })(this));\r\n    return this.editor.keystroke.add('down', 'th', (function(_this) {\r\n      return function(e, $node) {\r\n        _this._tdNav($node, 'down');\r\n        return true;\r\n      };\r\n    })(this));\r\n  };\r\n\r\n  TableButton.prototype._tdNav = function($td, direction) {\r\n    var $anotherTr, $tr, action, anotherTag, index, parentTag, ref;\r\n    if (direction == null) {\r\n      direction = 'up';\r\n    }\r\n    action = direction === 'up' ? 'prev' : 'next';\r\n    ref = direction === 'up' ? ['tbody', 'thead'] : ['thead', 'tbody'], parentTag = ref[0], anotherTag = ref[1];\r\n    $tr = $td.parent('tr');\r\n    $anotherTr = this[\"_\" + action + \"Row\"]($tr);\r\n    if (!($anotherTr.length > 0)) {\r\n      return true;\r\n    }\r\n    index = $tr.find('td, th').index($td);\r\n    return this.editor.selection.setRangeAtEndOf($anotherTr.find('td, th').eq(index));\r\n  };\r\n\r\n  TableButton.prototype._initResize = function() {\r\n\r\n    tables.resizable(document,{\r\n      cssClasses : {\r\n        resizeHandle : \"simditor-resize-handle\",\r\n        wrapper : \"simditor-table\"\r\n      }\r\n    });\r\n\r\n  };\r\n\r\n  TableButton.prototype._initShortcuts = function() {\r\n    this.editor.hotkeys.add('ctrl+alt+up', (function(_this) {\r\n      return function(e) {\r\n        _this.editMenu.find('.menu-item[data-param=insertRowAbove]').click();\r\n        return false;\r\n      };\r\n    })(this));\r\n    this.editor.hotkeys.add('ctrl+alt+down', (function(_this) {\r\n      return function(e) {\r\n        _this.editMenu.find('.menu-item[data-param=insertRowBelow]').click();\r\n        return false;\r\n      };\r\n    })(this));\r\n    this.editor.hotkeys.add('ctrl+alt+left', (function(_this) {\r\n      return function(e) {\r\n        _this.editMenu.find('.menu-item[data-param=insertColLeft]').click();\r\n        return false;\r\n      };\r\n    })(this));\r\n    return this.editor.hotkeys.add('ctrl+alt+right', (function(_this) {\r\n      return function(e) {\r\n        _this.editMenu.find('.menu-item[data-param=insertColRight]').click();\r\n        return false;\r\n      };\r\n    })(this));\r\n  };\r\n\r\n  TableButton.prototype.renderMenu = function() {\r\n    var $table;\r\n    $(\"<div class=\\\"menu-create-table\\\">\\n</div>\\n<div class=\\\"menu-edit-table\\\">\\n  <ul>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"deleteRow\\\">\\n        <span>\" + (this._t('deleteRow')) + \"</span>\\n      </a>\\n    </li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"insertRowAbove\\\">\\n        <span>\" + (this._t('insertRowAbove')) + \" ( Ctrl + Alt + ↑ )</span>\\n      </a>\\n    </li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"insertRowBelow\\\">\\n        <span>\" + (this._t('insertRowBelow')) + \" ( Ctrl + Alt + ↓ )</span>\\n      </a>\\n    </li>\\n    <li><span class=\\\"separator\\\"></span></li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"deleteCol\\\">\\n        <span>\" + (this._t('deleteColumn')) + \"</span>\\n      </a>\\n    </li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"insertColLeft\\\">\\n        <span>\" + (this._t('insertColumnLeft')) + \" ( Ctrl + Alt + ← )</span>\\n      </a>\\n    </li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"insertColRight\\\">\\n        <span>\" + (this._t('insertColumnRight')) + \" ( Ctrl + Alt + → )</span>\\n      </a>\\n    </li>\\n    <li><span class=\\\"separator\\\"></span></li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"deleteTable\\\">\\n        <span>\" + (this._t('deleteTable')) + \"</span>\\n      </a>\\n    </li>\\n  </ul>\\n</div>\").appendTo(this.menuWrapper);\r\n    this.createMenu = this.menuWrapper.find('.menu-create-table');\r\n    this.editMenu = this.menuWrapper.find('.menu-edit-table');\r\n    $table = this.createTable(6, 6).appendTo(this.createMenu);\r\n    this.createMenu.on('mouseenter', 'td, th', (function(_this) {\r\n      return function(e) {\r\n        var $td, $tr, $trs, num;\r\n        _this.createMenu.find('td, th').removeClass('selected');\r\n        $td = $(e.currentTarget);\r\n        $tr = $td.parent();\r\n        num = $tr.find('td, th').index($td) + 1;\r\n        $trs = $tr.prevAll('tr').addBack();\r\n        if ($tr.parent().is('tbody')) {\r\n          $trs = $trs.add($table.find('thead tr'));\r\n        }\r\n        return $trs.find(\"td:lt(\" + num + \"), th:lt(\" + num + \")\").addClass('selected');\r\n      };\r\n    })(this));\r\n    this.createMenu.on('mouseleave', function(e) {\r\n      return $(e.currentTarget).find('td, th').removeClass('selected');\r\n    });\r\n    return this.createMenu.on('mousedown', 'td, th', (function(_this) {\r\n      return function(e) {\r\n        var $closestBlock, $td, $tr, colNum, rowNum;\r\n        _this.wrapper.removeClass('menu-on');\r\n        if (!_this.editor.inputManager.focused) {\r\n          return;\r\n        }\r\n        $td = $(e.currentTarget);\r\n        $tr = $td.parent();\r\n        colNum = $tr.find('td').index($td) + 1;\r\n        rowNum = $tr.prevAll('tr').length + 1;\r\n        if ($tr.parent().is('tbody')) {\r\n          rowNum += 1;\r\n        }\r\n        $table = _this.createTable(rowNum, colNum, true);\r\n        $closestBlock = _this.editor.selection.blockNodes().last();\r\n        if (_this.editor.util.isEmptyNode($closestBlock)) {\r\n          $closestBlock.replaceWith($table);\r\n        } else {\r\n          $closestBlock.after($table);\r\n        }\r\n        _this.decorate($table);\r\n        _this.editor.selection.setRangeAtStartOf($table.find('th:first'));\r\n        _this.editor.trigger('valuechanged');\r\n        return false;\r\n      };\r\n    })(this));\r\n  };\r\n\r\n  TableButton.prototype.decorate = function($table) {\r\n    return $(tables.decorate($table[0],{\r\n      tableDecorate : 'simditor-table',\r\n      resizeHandle : 'simditor-resize-handle'\r\n    }));\r\n\r\n  };\r\n\r\n  TableButton.prototype.undecorate = function($table) {\r\n    return $(tables.undecorate($table[0],{\r\n      tableDecorate : 'simditor-table',\r\n      resizeHandle : 'simditor-resize-handle'\r\n    }));\r\n\r\n  };\r\n\r\n\r\n  TableButton.prototype.createTable = function(row, col, phBr) {\r\n    return $(tables.createTable(row,col,phBr ? this.editor.util.phBr : null));\r\n  };\r\n\r\n  TableButton.prototype.refreshTableWidth = function($table) {\r\n    return table.refreshTableWidth($table[0]);\r\n  };\r\n\r\n  TableButton.prototype.setActive = function(active) {\r\n    Button.prototype.setActive.call(this, active);\r\n    if (active) {\r\n      this.createMenu.hide();\r\n      return this.editMenu.show();\r\n    } else {\r\n      this.createMenu.show();\r\n      return this.editMenu.hide();\r\n    }\r\n  };\r\n\r\n  TableButton.prototype.deleteRow = function($td) {\r\n    var self = this,\r\n        ret; \r\n\r\n    tables.deleteRow($td[0],function(newTr,index){\r\n      if (newTr) {\r\n        ret = self.editor.selection.setRangeAtEndOf($(newTr).find('td, th').eq(index));\r\n      }\r\n    })\r\n\r\n    return ret;\r\n  };\r\n\r\n  TableButton.prototype.insertRow = function($td, direction) {\r\n    var self = this,\r\n        ret; \r\n\r\n    tables.insertRow($td[0],direction,self.editor.util.phBr,function(newTr,index){\r\n      ret =  self.editor.selection.setRangeAtStartOf($(newTr).find('td, th').eq(index));\r\n    })\r\n\r\n    return ret;\r\n\r\n  };\r\n\r\n  TableButton.prototype.deleteCol = function($td) {\r\n    var self = this,\r\n        ret; \r\n\r\n    tables.deleteCol($td[0],function(newTd){\r\n      if (newTd) {\r\n        ret = self.editor.selection.setRangeAtEndOf($(newTd));\r\n      }\r\n    })\r\n\r\n    return ret;\r\n  };\r\n\r\n  TableButton.prototype.insertCol = function($td, direction) {\r\n    var self = this,\r\n        ret; \r\n\r\n    tables.insertCol($td[0],direction,self.editor.util.phBr,function(newTd){\r\n      ret = self.editor.selection.setRangeAtStartOf($(newTd));\r\n    })\r\n\r\n    return ret;\r\n  };\r\n\r\n  TableButton.prototype.deleteTable = function($td) {\r\n    var self = this;\r\n    tables.deleteTable($td[0],function($block){\r\n      if ($block.length > 0) {\r\n        return self.editor.selection.setRangeAtStartOf($block);\r\n      }\r\n    });\r\n  };\r\n\r\n  TableButton.prototype.command = function(param) {\r\n    var $td;\r\n    $td = this.editor.selection.containerNode().closest('td, th');\r\n    if (!($td.length > 0)) {\r\n      return;\r\n    }\r\n    if (param === 'deleteRow') {\r\n      this.deleteRow($td);\r\n    } else if (param === 'insertRowAbove') {\r\n      this.insertRow($td, 'before');\r\n    } else if (param === 'insertRowBelow') {\r\n      this.insertRow($td);\r\n    } else if (param === 'deleteCol') {\r\n      this.deleteCol($td);\r\n    } else if (param === 'insertColLeft') {\r\n      this.insertCol($td, 'before');\r\n    } else if (param === 'insertColRight') {\r\n      this.insertCol($td);\r\n    } else if (param === 'deleteTable') {\r\n      this.deleteTable($td);\r\n    } else {\r\n      return;\r\n    }\r\n    return this.editor.trigger('valuechanged');\r\n  };\r\n\r\n  Simditor.Toolbar.addButton(TableButton);\r\n\r\n  return TableButton;\r\n\r\n\r\n});\ndefine('skylark-simditor/buttons/TitleButton',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Button\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,Button){ \r\n  var TitleButton = Button.inherit({\r\n\r\n   });\r\n\r\n  TitleButton.prototype.name = 'title';\r\n\r\n  TitleButton.prototype.htmlTag = 'h1, h2, h3, h4, h5';\r\n\r\n  TitleButton.prototype.disableTag = 'pre, table';\r\n\r\n  TitleButton.prototype._init = function() {\r\n    this.menu = [\r\n      {\r\n        name: 'normal',\r\n        text: this._t('normalText'),\r\n        param: 'p'\r\n      }, '|', {\r\n        name: 'h1',\r\n        text: this._t('title') + ' 1',\r\n        param: 'h1'\r\n      }, {\r\n        name: 'h2',\r\n        text: this._t('title') + ' 2',\r\n        param: 'h2'\r\n      }, {\r\n        name: 'h3',\r\n        text: this._t('title') + ' 3',\r\n        param: 'h3'\r\n      }, {\r\n        name: 'h4',\r\n        text: this._t('title') + ' 4',\r\n        param: 'h4'\r\n      }, {\r\n        name: 'h5',\r\n        text: this._t('title') + ' 5',\r\n        param: 'h5'\r\n      }\r\n    ];\r\n    return Button.prototype._init.call(this);\r\n  };\r\n\r\n  TitleButton.prototype.setActive = function(active, param) {\r\n    Button.prototype.setActive.call(this, active);\r\n    if (active) {\r\n      param || (param = this.node[0].tagName.toLowerCase());\r\n    }\r\n    this.el.removeClass('active-p active-h1 active-h2 active-h3 active-h4 active-h5');\r\n    if (active) {\r\n      return this.el.addClass('active active-' + param);\r\n    }\r\n  };\r\n\r\n  TitleButton.prototype.command = function(param) {\r\n    var $rootNodes;\r\n    $rootNodes = this.editor.selection.rootNodes();\r\n    this.editor.selection.save();\r\n    $rootNodes.each((function(_this) {\r\n      return function(i, node) {\r\n        var $node;\r\n        $node = $(node);\r\n        if ($node.is('blockquote') || $node.is(param) || $node.is(_this.disableTag) || _this.editor.util.isDecoratedNode($node)) {\r\n          return;\r\n        }\r\n        return $('<' + param + '/>').append($node.contents()).replaceAll($node);\r\n      };\r\n    })(this));\r\n    this.editor.selection.restore();\r\n    return this.editor.trigger('valuechanged');\r\n  };\r\n\r\n  Simditor.Toolbar.addButton(TitleButton);\r\n\r\n  return TitleButton;\r\n\r\n});\ndefine('skylark-simditor/buttons/UnderlineButton',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Button\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,Button){\r\n  var UnderlineButton = Button.inherit({\r\n\r\n   });\r\n\r\n\r\n  UnderlineButton.prototype.name = 'underline';\r\n\r\n  UnderlineButton.prototype.icon = 'underline';\r\n\r\n  UnderlineButton.prototype.htmlTag = 'u';\r\n\r\n  UnderlineButton.prototype.disableTag = 'pre';\r\n\r\n  UnderlineButton.prototype.shortcut = 'cmd+u';\r\n\r\n  UnderlineButton.prototype.render = function() {\r\n    if (this.editor.util.os.mac) {\r\n      this.title = this.title + ' ( Cmd + u )';\r\n    } else {\r\n      this.title = this.title + ' ( Ctrl + u )';\r\n      this.shortcut = 'ctrl+u';\r\n    }\r\n    return Button.prototype.render.call(this);\r\n  };\r\n\r\n  UnderlineButton.prototype._activeStatus = function() {\r\n    var active;\r\n    active = document.queryCommandState('underline') === true;\r\n    this.setActive(active);\r\n    return this.active;\r\n  };\r\n\r\n  UnderlineButton.prototype.command = function() {\r\n    document.execCommand('underline');\r\n    if (!this.editor.util.support.oninput) {\r\n      this.editor.trigger('valuechanged');\r\n    }\r\n    return $(document).trigger('selectionchange');\r\n  };\r\n\r\n\r\n  Simditor.Toolbar.addButton(UnderlineButton);\r\n\r\n  return UnderlineButton;\r\n\r\n});\ndefine('skylark-simditor/buttons/UnorderListButton',[\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"./ListButton\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,ListButton){ \r\n   var UnorderListButton = ListButton.inherit({\r\n\r\n   });\r\n\r\n    UnorderListButton.prototype.type = 'ul';\r\n\r\n    UnorderListButton.prototype.name = 'ul';\r\n\r\n    UnorderListButton.prototype.icon = 'list-ul';\r\n\r\n    UnorderListButton.prototype.htmlTag = 'ul';\r\n\r\n    UnorderListButton.prototype.shortcut = 'cmd+.';\r\n\r\n    UnorderListButton.prototype._init = function() {\r\n      if (this.editor.util.os.mac) {\r\n        this.title = this.title + ' ( Cmd + . )';\r\n      } else {\r\n        this.title = this.title + ' ( Ctrl + . )';\r\n        this.shortcut = 'ctrl+.';\r\n      }\r\n      return ListButton.prototype._init.call(this);\r\n    };\r\n\r\n    Simditor.Toolbar.addButton(UnorderListButton);  \r\n\r\n    return UnorderListButton;\r\n\r\n});\ndefine('skylark-simditor/main',[\r\n  \"./Simditor\", \r\n  \"./Button\", \r\n  \"./Popover\", \r\n\r\n  \"./buttons/AlignmentButton\", \r\n  \"./buttons/BlockquoteButton\", \r\n  \"./buttons/BoldButton\", \r\n  \"./buttons/CodeButton\", \r\n  \"./buttons/CodePopover\", \r\n  \"./buttons/ColorButton\", \r\n  \"./buttons/FontScaleButton\", \r\n  \"./buttons/HrButton\", \r\n  \"./buttons/ImageButton\", \r\n  \"./buttons/ImagePopover\", \r\n  \"./buttons/IndentButton\", \r\n  \"./buttons/ItalicButton\", \r\n  \"./buttons/LinkButton\", \r\n  \"./buttons/LinkPopover\", \r\n  \"./buttons/ListButton\", \r\n  \"./buttons/OrderListButton\", \r\n  \"./buttons/OutdentButton\",\r\n  \"./buttons/StrikethroughButton\", \r\n  \"./buttons/TableButton\", \r\n  \"./buttons/TitleButton\", \r\n  \"./buttons/UnderlineButton\", \r\n  \"./buttons/UnorderListButton\"\r\n],function(Simditor){\r\n\t\r\n  return Simditor;\r\n});\ndefine('skylark-simditor', ['skylark-simditor/main'], function (main) { return main; });\n\n"]}