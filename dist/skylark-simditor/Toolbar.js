/**
 * skylark-simditor - A version of simditor.js that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-simditor/
 * @license MIT
 */
define(["skylark-jquery","./_extend","./Module"],function(t,o,r){var i=r.inherit({});return i.pluginName="Toolbar",i.prototype.opts={toolbar:!0,toolbarFloat:!0,toolbarHidden:!1,toolbarFloatOffset:0},i.prototype._tpl={wrapper:'<div class="simditor-toolbar"><ul></ul></div>',separator:'<li><span class="separator"></span></li>'},i.prototype._init=function(){var o,r,i,e;if(this.editor=this._module,this.opts.toolbar)return t.isArray(this.opts.toolbar)||(this.opts.toolbar=["bold","italic","underline","strikethrough","|","ol","ul","blockquote","code","|","link","image","|","indent","outdent"]),this._render(),this.list.on("click",function(t){return!1}),this.wrapper.on("mousedown",(e=this,function(t){return e.list.find(".menu-on").removeClass(".menu-on")})),t(document).on("mousedown.simditor"+this.editor.id,function(t){return function(o){return t.list.find(".menu-on").removeClass(".menu-on")}}(this)),!this.opts.toolbarHidden&&this.opts.toolbarFloat&&(this.wrapper.css("top",this.opts.toolbarFloatOffset),i=0,r=function(t){return function(){return t.wrapper.css("position","static"),t.wrapper.width("auto"),t.editor.util.reflow(t.wrapper),t.wrapper.width(t.wrapper.outerWidth()),t.wrapper.css("left",t.editor.util.os.mobile?t.wrapper.position().left:t.wrapper.offset().left),t.wrapper.css("position",""),i=t.wrapper.outerHeight(),t.editor.placeholderEl.css("top",i),!0}}(this),o=null,t(window).on("resize.simditor-"+this.editor.id,function(t){return o=r()}),t(window).on("scroll.simditor-"+this.editor.id,function(e){return function(s){var n,p,l;if(e.wrapper.is(":visible"))if(n=(l=e.editor.wrapper.offset().top)+e.editor.wrapper.outerHeight()-80,(p=t(document).scrollTop()+e.opts.toolbarFloatOffset)<=l||p>=n){if(e.editor.wrapper.removeClass("toolbar-floating").css("padding-top",""),e.editor.util.os.mobile)return e.wrapper.css("top",e.opts.toolbarFloatOffset)}else if(o||(o=r()),e.editor.wrapper.addClass("toolbar-floating").css("padding-top",i),e.editor.util.os.mobile)return e.wrapper.css("top",p-l+e.opts.toolbarFloatOffset)}}(this))),this.editor.on("destroy",function(t){return function(){return t.buttons.length=0}}(this)),t(document).on("mousedown.simditor-"+this.editor.id,function(t){return function(o){return t.list.find("li.menu-on").removeClass("menu-on")}}(this))},i.prototype._render=function(){var o,r,i,e;for(this.buttons=[],this.wrapper=t(this._tpl.wrapper).prependTo(this.editor.wrapper),this.list=this.wrapper.find("ul"),o=0,r=(e=this.opts.toolbar).length;o<r;o++)if("|"!==(i=e[o])){if(!this.constructor.buttons[i])throw new Error("simditor: invalid toolbar button "+i);this.buttons.push(new this.constructor.buttons[i]({editor:this.editor}))}else t(this._tpl.separator).appendTo(this.list);if(this.opts.toolbarHidden)return this.wrapper.hide()},i.prototype.findButton=function(t){var o;return null!=(o=this.list.find(".toolbar-item-"+t).data("button"))?o:null},i.addButton=function(t){return this.buttons[t.prototype.name]=t},i.buttons={},i});
//# sourceMappingURL=sourcemaps/Toolbar.js.map
