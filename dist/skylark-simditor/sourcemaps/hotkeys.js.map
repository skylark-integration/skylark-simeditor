{"version":3,"sources":["hotkeys.js"],"names":["define","$","extend","Module","Hotkeys","inherit","count","keyNameMap","8","9","13","16","17","18","19","20","27","32","33","34","35","36","37","38","39","40","45","46","91","93","48","49","50","51","52","53","54","55","56","57","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","96","97","98","99","100","101","102","103","104","105","106","107","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","59","61","186","187","188","190","191","192","219","220","221","222","aliases","escape","delete","return","ctrl","space","ins","cmd","command","wins","windows","normalize","shortcut","i","j","key","keyname","keys","len","toLowerCase","replace","split","length","this","pop","sort","push","join","prototype","opts","el","document","_init","id","constructor","_map","_delegate","on","_this","e","ref","_getHander","call","which","altKey","ctrlKey","metaKey","shiftKey","respondTo","subject","add","handler","remove","destroy","off"],"mappings":"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","file":"../hotkeys.js","sourcesContent":["define([\n  \"skylark-jquery\",\n  \"./_extend\",\n  \"./Module\"\n],function($,extend,Module){ \n\n\n  var Hotkeys = Module.inherit({\n\n  });\n\n\n  Hotkeys.count = 0;\n\n  Hotkeys.keyNameMap = {\n    8: \"Backspace\",\n    9: \"Tab\",\n    13: \"Enter\",\n    16: \"Shift\",\n    17: \"Control\",\n    18: \"Alt\",\n    19: \"Pause\",\n    20: \"CapsLock\",\n    27: \"Esc\",\n    32: \"Spacebar\",\n    33: \"PageUp\",\n    34: \"PageDown\",\n    35: \"End\",\n    36: \"Home\",\n    37: \"Left\",\n    38: \"Up\",\n    39: \"Right\",\n    40: \"Down\",\n    45: \"Insert\",\n    46: \"Del\",\n    91: \"Meta\",\n    93: \"Meta\",\n    48: \"0\",\n    49: \"1\",\n    50: \"2\",\n    51: \"3\",\n    52: \"4\",\n    53: \"5\",\n    54: \"6\",\n    55: \"7\",\n    56: \"8\",\n    57: \"9\",\n    65: \"A\",\n    66: \"B\",\n    67: \"C\",\n    68: \"D\",\n    69: \"E\",\n    70: \"F\",\n    71: \"G\",\n    72: \"H\",\n    73: \"I\",\n    74: \"J\",\n    75: \"K\",\n    76: \"L\",\n    77: \"M\",\n    78: \"N\",\n    79: \"O\",\n    80: \"P\",\n    81: \"Q\",\n    82: \"R\",\n    83: \"S\",\n    84: \"T\",\n    85: \"U\",\n    86: \"V\",\n    87: \"W\",\n    88: \"X\",\n    89: \"Y\",\n    90: \"Z\",\n    96: \"0\",\n    97: \"1\",\n    98: \"2\",\n    99: \"3\",\n    100: \"4\",\n    101: \"5\",\n    102: \"6\",\n    103: \"7\",\n    104: \"8\",\n    105: \"9\",\n    106: \"Multiply\",\n    107: \"Add\",\n    109: \"Subtract\",\n    110: \"Decimal\",\n    111: \"Divide\",\n    112: \"F1\",\n    113: \"F2\",\n    114: \"F3\",\n    115: \"F4\",\n    116: \"F5\",\n    117: \"F6\",\n    118: \"F7\",\n    119: \"F8\",\n    120: \"F9\",\n    121: \"F10\",\n    122: \"F11\",\n    123: \"F12\",\n    124: \"F13\",\n    125: \"F14\",\n    126: \"F15\",\n    127: \"F16\",\n    128: \"F17\",\n    129: \"F18\",\n    130: \"F19\",\n    131: \"F20\",\n    132: \"F21\",\n    133: \"F22\",\n    134: \"F23\",\n    135: \"F24\",\n    59: \";\",\n    61: \"=\",\n    186: \";\",\n    187: \"=\",\n    188: \",\",\n    190: \".\",\n    191: \"/\",\n    192: \"`\",\n    219: \"[\",\n    220: \"\\\\\",\n    221: \"]\",\n    222: \"'\"\n  };\n\n  Hotkeys.aliases = {\n    \"escape\": \"esc\",\n    \"delete\": \"del\",\n    \"return\": \"enter\",\n    \"ctrl\": \"control\",\n    \"space\": \"spacebar\",\n    \"ins\": \"insert\",\n    \"cmd\": \"meta\",\n    \"command\": \"meta\",\n    \"wins\": \"meta\",\n    \"windows\": \"meta\"\n  };\n\n  Hotkeys.normalize = function(shortcut) {\n    var i, j, key, keyname, keys, len;\n    keys = shortcut.toLowerCase().replace(/\\s+/gi, \"\").split(\"+\");\n    for (i = j = 0, len = keys.length; j < len; i = ++j) {\n      key = keys[i];\n      keys[i] = this.aliases[key] || key;\n    }\n    keyname = keys.pop();\n    keys.sort().push(keyname);\n    return keys.join(\"_\");\n  };\n\n  Hotkeys.prototype.opts = {\n    el: document\n  };\n\n  Hotkeys.prototype._init = function() {\n    this.id = ++this.constructor.count;\n    this._map = {};\n    this._delegate = typeof this.opts.el === \"string\" ? document : this.opts.el;\n    return $(this._delegate).on(\"keydown.simple-hotkeys-\" + this.id, this.opts.el, (function(_this) {\n      return function(e) {\n        var ref;\n        return (ref = _this._getHander(e)) != null ? ref.call(_this, e) : void 0;\n      };\n    })(this));\n  };\n\n  Hotkeys.prototype._getHander = function(e) {\n    var keyname, shortcut;\n    if (!(keyname = this.constructor.keyNameMap[e.which])) {\n      return;\n    }\n    shortcut = \"\";\n    if (e.altKey) {\n      shortcut += \"alt_\";\n    }\n    if (e.ctrlKey) {\n      shortcut += \"control_\";\n    }\n    if (e.metaKey) {\n      shortcut += \"meta_\";\n    }\n    if (e.shiftKey) {\n      shortcut += \"shift_\";\n    }\n    shortcut += keyname.toLowerCase();\n    return this._map[shortcut];\n  };\n\n  Hotkeys.prototype.respondTo = function(subject) {\n    if (typeof subject === 'string') {\n      return this._map[this.constructor.normalize(subject)] != null;\n    } else {\n      return this._getHander(subject) != null;\n    }\n  };\n\n  Hotkeys.prototype.add = function(shortcut, handler) {\n    this._map[this.constructor.normalize(shortcut)] = handler;\n    return this;\n  };\n\n  Hotkeys.prototype.remove = function(shortcut) {\n    delete this._map[this.constructor.normalize(shortcut)];\n    return this;\n  };\n\n  Hotkeys.prototype.destroy = function() {\n    $(this._delegate).off(\".simple-hotkeys-\" + this.id);\n    this._map = {};\n    return this;\n  };\n\n  return function(opts) {\n    return new Hotkeys(opts);\n  };\n\n});\n\n"]}