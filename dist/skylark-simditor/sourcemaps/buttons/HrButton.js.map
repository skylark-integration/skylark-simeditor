{"version":3,"sources":["buttons/HrButton.js"],"names":["define","$","Toolbar","Simditor","Button","HrButton","inherit","prototype","name","icon","htmlTag","_status","command","$hr","$newBlock","$rootBlock","this","editor","editable","selection","rootNodes","first","next","length","save","append","util","phBr","insertAfter","setRangeAtStartOf","restore","trigger","addButton"],"mappings":";;;;;;;AAAAA,QACE,0BACA,aACA,cACA,aACA,SAASC,EAAEC,EAAQC,EAASC,GAG3B,IAAIC,EAAWD,EAAOE,YAkCvB,OA7BAD,EAASE,UAAUC,KAAO,KAE1BH,EAASE,UAAUE,KAAO,QAE1BJ,EAASE,UAAUG,QAAU,KAE7BL,EAASE,UAAUI,QAAU,aAE7BN,EAASE,UAAUK,QAAU,WAC3B,IAAIC,EAAKC,EAAuBC,EAehC,OAdAA,EAAaC,KAAKC,OAAOC,SAASC,UAAUC,YAAYC,SAChCC,OACTC,OAAS,EACtBP,KAAKC,OAAOC,SAASC,UAAUK,OAE/BV,EAAYb,EAAE,QAAQwB,OAAOT,KAAKC,OAAOC,SAASQ,KAAKC,MAEzDd,EAAMZ,EAAE,SAAS2B,YAAYb,GACzBD,GACFA,EAAUc,YAAYf,GACtBG,KAAKC,OAAOC,SAASC,UAAUU,kBAAkBf,IAEjDE,KAAKC,OAAOC,SAASC,UAAUW,UAE1Bd,KAAKC,OAAOc,QAAQ,iBAG7B5B,EAASD,QAAQ8B,UAAU3B,GAEpBA","file":"../../buttons/HrButton.js","sourcesContent":["define([\r\n  \"skylark-utils-dom/query\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Button\"\r\n],function($,Toolbar,Simditor,Button){ \r\n  \r\n\r\n   var HrButton = Button.inherit({\r\n\r\n   });\r\n\r\n\r\n  HrButton.prototype.name = 'hr';\r\n\r\n  HrButton.prototype.icon = 'minus';\r\n\r\n  HrButton.prototype.htmlTag = 'hr';\r\n\r\n  HrButton.prototype._status = function() {};\r\n\r\n  HrButton.prototype.command = function() {\r\n    var $hr, $newBlock, $nextBlock, $rootBlock;\r\n    $rootBlock = this.editor.editable.selection.rootNodes().first();\r\n    $nextBlock = $rootBlock.next();\r\n    if ($nextBlock.length > 0) {\r\n      this.editor.editable.selection.save();\r\n    } else {\r\n      $newBlock = $('<p/>').append(this.editor.editable.util.phBr);\r\n    }\r\n    $hr = $('<hr/>').insertAfter($rootBlock);\r\n    if ($newBlock) {\r\n      $newBlock.insertAfter($hr);\r\n      this.editor.editable.selection.setRangeAtStartOf($newBlock);\r\n    } else {\r\n      this.editor.editable.selection.restore();\r\n    }\r\n    return this.editor.trigger('valuechanged');\r\n  };\r\n\r\n  Simditor.Toolbar.addButton(HrButton);\r\n\r\n  return HrButton;\r\n\t\r\n});"]}