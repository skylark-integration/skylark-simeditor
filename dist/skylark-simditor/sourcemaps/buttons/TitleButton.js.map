{"version":3,"sources":["buttons/TitleButton.js"],"names":["define","$","extend","SimpleModule","Toolbar","Simditor","Button","TitleButton","inherit","prototype","name","htmlTag","disableTag","_init","this","menu","text","_t","param","call","setActive","active","node","tagName","toLowerCase","el","removeClass","addClass","command","$rootNodes","_this","editor","selection","rootNodes","save","each","i","$node","is","util","isDecoratedNode","append","contents","replaceAll","restore","trigger","addButton"],"mappings":";;;;;;;AAAAA,QACE,iBACA,aACA,YACA,aACA,cACA,aACA,SAASC,EAAEC,EAAOC,EAAaC,EAAQC,EAASC,GAChD,IAAIC,EAAcD,EAAOE,YAwEzB,OApEAD,EAAYE,UAAUC,KAAO,QAE7BH,EAAYE,UAAUE,QAAU,qBAEhCJ,EAAYE,UAAUG,WAAa,aAEnCL,EAAYE,UAAUI,MAAQ,WA4B5B,OA3BAC,KAAKC,OAEDL,KAAM,SACNM,KAAMF,KAAKG,GAAG,cACdC,MAAO,KACN,KACDR,KAAM,KACNM,KAAMF,KAAKG,GAAG,SAAW,KACzBC,MAAO,OAEPR,KAAM,KACNM,KAAMF,KAAKG,GAAG,SAAW,KACzBC,MAAO,OAEPR,KAAM,KACNM,KAAMF,KAAKG,GAAG,SAAW,KACzBC,MAAO,OAEPR,KAAM,KACNM,KAAMF,KAAKG,GAAG,SAAW,KACzBC,MAAO,OAEPR,KAAM,KACNM,KAAMF,KAAKG,GAAG,SAAW,KACzBC,MAAO,OAGJZ,EAAOG,UAAUI,MAAMM,KAAKL,OAGrCP,EAAYE,UAAUW,UAAY,SAASC,EAAQH,GAMjD,GALAZ,EAAOG,UAAUW,UAAUD,KAAKL,KAAMO,GAClCA,IACFH,IAAUA,EAAQJ,KAAKQ,KAAK,GAAGC,QAAQC,gBAEzCV,KAAKW,GAAGC,YAAY,8DAChBL,EACF,OAAOP,KAAKW,GAAGE,SAAS,iBAAmBT,IAI/CX,EAAYE,UAAUmB,QAAU,SAASV,GACvC,IAAIW,EAGsBC,EAW1B,OAbAD,EAAaf,KAAKiB,OAAOC,UAAUC,YACnCnB,KAAKiB,OAAOC,UAAUE,OACtBL,EAAWM,MAAeL,EASvBhB,KARM,SAASsB,EAAGd,GACjB,IAAIe,EAEJ,MADAA,EAAQpC,EAAEqB,IACAgB,GAAG,eAAiBD,EAAMC,GAAGpB,IAAUmB,EAAMC,GAAGR,EAAMlB,aAAekB,EAAMC,OAAOQ,KAAKC,gBAAgBH,IAGjH,OAAOpC,EAAE,IAAMiB,EAAQ,MAAMuB,OAAOJ,EAAMK,YAAYC,WAAWN,MAGrEvB,KAAKiB,OAAOC,UAAUY,UACf9B,KAAKiB,OAAOc,QAAQ,iBAG7BxC,EAASD,QAAQ0C,UAAUvC,GAEpBA","file":"../../buttons/TitleButton.js","sourcesContent":["define([\r\n  \"skylark-jquery\",\r\n  \"../_extend\",\r\n  \"../Module\",\r\n  \"../Toolbar\",\r\n  \"../Simditor\",\r\n  \"../Button\"\r\n],function($,extend,SimpleModule,Toolbar,Simditor,Button){ \r\n  var TitleButton = Button.inherit({\r\n\r\n   });\r\n\r\n  TitleButton.prototype.name = 'title';\r\n\r\n  TitleButton.prototype.htmlTag = 'h1, h2, h3, h4, h5';\r\n\r\n  TitleButton.prototype.disableTag = 'pre, table';\r\n\r\n  TitleButton.prototype._init = function() {\r\n    this.menu = [\r\n      {\r\n        name: 'normal',\r\n        text: this._t('normalText'),\r\n        param: 'p'\r\n      }, '|', {\r\n        name: 'h1',\r\n        text: this._t('title') + ' 1',\r\n        param: 'h1'\r\n      }, {\r\n        name: 'h2',\r\n        text: this._t('title') + ' 2',\r\n        param: 'h2'\r\n      }, {\r\n        name: 'h3',\r\n        text: this._t('title') + ' 3',\r\n        param: 'h3'\r\n      }, {\r\n        name: 'h4',\r\n        text: this._t('title') + ' 4',\r\n        param: 'h4'\r\n      }, {\r\n        name: 'h5',\r\n        text: this._t('title') + ' 5',\r\n        param: 'h5'\r\n      }\r\n    ];\r\n    return Button.prototype._init.call(this);\r\n  };\r\n\r\n  TitleButton.prototype.setActive = function(active, param) {\r\n    Button.prototype.setActive.call(this, active);\r\n    if (active) {\r\n      param || (param = this.node[0].tagName.toLowerCase());\r\n    }\r\n    this.el.removeClass('active-p active-h1 active-h2 active-h3 active-h4 active-h5');\r\n    if (active) {\r\n      return this.el.addClass('active active-' + param);\r\n    }\r\n  };\r\n\r\n  TitleButton.prototype.command = function(param) {\r\n    var $rootNodes;\r\n    $rootNodes = this.editor.selection.rootNodes();\r\n    this.editor.selection.save();\r\n    $rootNodes.each((function(_this) {\r\n      return function(i, node) {\r\n        var $node;\r\n        $node = $(node);\r\n        if ($node.is('blockquote') || $node.is(param) || $node.is(_this.disableTag) || _this.editor.util.isDecoratedNode($node)) {\r\n          return;\r\n        }\r\n        return $('<' + param + '/>').append($node.contents()).replaceAll($node);\r\n      };\r\n    })(this));\r\n    this.editor.selection.restore();\r\n    return this.editor.trigger('valuechanged');\r\n  };\r\n\r\n  Simditor.Toolbar.addButton(TitleButton);\r\n\r\n  return TitleButton;\r\n\r\n});"]}