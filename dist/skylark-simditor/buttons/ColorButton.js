/**
 * skylark-simditor - A version of simditor.js that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-simditor/
 * @license MIT
 */
define(["skylark-utils-dom/query","../Toolbar","../Simditor","../Button"],function(o,t,e,r){var n=r.inherit({});return n.prototype.name="color",n.prototype.icon="tint",n.prototype.disableTag="pre",n.prototype.menu=!0,n.prototype.render=function(){var o;return o=1<=arguments.length?Array.prototype.slice.call(arguments,0):[],r.prototype.render.apply(this,o)},n.prototype.renderMenu=function(){return o('<ul class="color-list">\n  <li><a href="javascript:;" class="font-color font-color-1"></a></li>\n  <li><a href="javascript:;" class="font-color font-color-2"></a></li>\n  <li><a href="javascript:;" class="font-color font-color-3"></a></li>\n  <li><a href="javascript:;" class="font-color font-color-4"></a></li>\n  <li><a href="javascript:;" class="font-color font-color-5"></a></li>\n  <li><a href="javascript:;" class="font-color font-color-6"></a></li>\n  <li><a href="javascript:;" class="font-color font-color-7"></a></li>\n  <li><a href="javascript:;" class="font-color font-color-default"></a></li>\n</ul>').appendTo(this.menuWrapper),this.menuWrapper.on("mousedown",".color-list",function(o){return!1}),this.menuWrapper.on("click",".font-color",(t=this,function(e){var r,n,l,a,i,c;if(t.wrapper.removeClass("menu-on"),(r=o(e.currentTarget)).hasClass("font-color-default")){if(!((n=t.editor.body.find("p, li")).length>0))return;i=window.getComputedStyle(n[0],null).getPropertyValue("color"),l=t._convertRgbToHex(i)}else i=window.getComputedStyle(r[0],null).getPropertyValue("background-color"),l=t._convertRgbToHex(i);if(l)return a=t.editor.editable.selection.range(),!r.hasClass("font-color-default")&&a.collapsed&&(c=document.createTextNode(t._t("coloredText")),a.insertNode(c),a.selectNodeContents(c)),t.editor.editable.selection.range(a),document.execCommand("styleWithCSS",!1,!0),document.execCommand("foreColor",!1,l),document.execCommand("styleWithCSS",!1,!1),t.editor.editable.util.support.oninput?void 0:t.editor.trigger("valuechanged")}));var t},n.prototype._convertRgbToHex=function(o){var t;return(t=/rgb\((\d+),\s?(\d+),\s?(\d+)\)/g.exec(o))?function(o,t,e){var r;return"#"+(r=function(o){var t;return 1===(t=o.toString(16)).length?"0"+t:t})(o)+r(t)+r(e)}(1*t[1],1*t[2],1*t[3]):""},e.Toolbar.addButton(n),n});
//# sourceMappingURL=../sourcemaps/buttons/ColorButton.js.map
