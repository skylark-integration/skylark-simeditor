/**
 * skylark-simditor - A version of simditor.js that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-simditor/
 * @license MIT
 */
define(["skylark-jquery","./_extend","./Module","./Simditor"],function(t,e,i,o){var r=i.inherit({init:function(t){this.button=t.button,this.editor=t.button.editor,i.prototype.init.call(this,t)}});return r.prototype.offset={top:4,left:0},r.prototype.target=null,r.prototype.active=!1,r.prototype._init=function(){var e;return this.el=t('<div class="simditor-popover"></div>').appendTo(this.editor.el).data("popover",this),this.render(),this.el.on("mouseenter",(e=this,function(t){return e.el.addClass("hover")})),this.el.on("mouseleave",function(t){return function(e){return t.el.removeClass("hover")}}(this))},r.prototype.render=function(){},r.prototype._initLabelWidth=function(){var e,i;if((e=this.el.find(".settings-field")).length>0)return this._labelWidth=0,e.each((i=this,function(e,o){var r;if((r=t(o).find("label")).length>0)return i._labelWidth=Math.max(i._labelWidth,r.width())})),e.find("label").width(this._labelWidth)},r.prototype.show=function(e,i){if(null==i&&(i="bottom"),null!=e)return this.el.siblings(".simditor-popover").each(function(e,i){if((i=t(i).data("popover")).active)return i.hide()}),this.active&&this.target&&this.target.removeClass("selected"),this.target=e.addClass("selected"),this.active?(this.refresh(i),this.trigger("popovershow")):(this.active=!0,this.el.css({left:-9999}).show(),this._labelWidth||this._initLabelWidth(),this.editor.util.reflow(),this.refresh(i),this.trigger("popovershow"))},r.prototype.hide=function(){if(this.active)return this.target&&this.target.removeClass("selected"),this.target=null,this.active=!1,this.el.hide(),this.trigger("popoverhide")},r.prototype.refresh=function(t){var e,i,o,r,s,h;if(null==t&&(t="bottom"),this.active)return e=this.editor.el.offset(),s=this.target.offset(),r=this.target.outerHeight(),"bottom"===t?h=s.top-e.top+r:"top"===t&&(h=s.top-e.top-this.el.height()),o=this.editor.wrapper.width()-this.el.outerWidth()-10,i=Math.min(s.left-e.left,o),this.el.css({top:h+this.offset.top,left:i+this.offset.left})},r.prototype.destroy=function(){return this.target=null,this.active=!1,this.editor.off(".linkpopover"),this.el.remove()},r.prototype._t=function(){var t,e,o;return t=1<=arguments.length?Array.prototype.slice.call(arguments,0):[],(o=i.prototype._t.apply(this,t))||(o=(e=this.button)._t.apply(e,t)),o},o.Popover=r,r});
//# sourceMappingURL=sourcemaps/Popover.js.map
